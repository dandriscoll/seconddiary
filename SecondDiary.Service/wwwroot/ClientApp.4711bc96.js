function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n,r,o,i,a,s,l=globalThis,c={},u={},d=l.parcelRequire461e;null==d&&((d=function(e){if(e in c)return c[e].exports;if(e in u){var t=u[e];delete u[e];var n={id:e,exports:{}};return c[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){u[e]=t},l.parcelRequire461e=d);var h=d.register;h("1b2ls",function(t,n){e(t.exports,"Fragment",()=>r,e=>r=e),e(t.exports,"jsx",()=>o,e=>o=e),e(t.exports,"jsxs",()=>i,e=>i=e);var r,o,i,a=d("acw62"),s=Symbol.for("react.element"),l=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,u=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function g(e,t,n){var r,o={},i=null,a=null;for(r in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(a=t.ref),t)c.call(t,r)&&!h.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:s,type:e,key:i,ref:a,props:o,_owner:u.current}}r=l,o=g,i=g}),h("acw62",function(e,t){e.exports=d("2pUnB")}),h("2pUnB",function(t,n){e(t.exports,"Children",()=>r,e=>r=e),e(t.exports,"Component",()=>o,e=>o=e),e(t.exports,"Fragment",()=>i,e=>i=e),e(t.exports,"Profiler",()=>a,e=>a=e),e(t.exports,"PureComponent",()=>s,e=>s=e),e(t.exports,"StrictMode",()=>l,e=>l=e),e(t.exports,"Suspense",()=>c,e=>c=e),e(t.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",()=>u,e=>u=e),e(t.exports,"act",()=>d,e=>d=e),e(t.exports,"cloneElement",()=>h,e=>h=e),e(t.exports,"createContext",()=>g,e=>g=e),e(t.exports,"createElement",()=>f,e=>f=e),e(t.exports,"createFactory",()=>p,e=>p=e),e(t.exports,"createRef",()=>m,e=>m=e),e(t.exports,"forwardRef",()=>y,e=>y=e),e(t.exports,"isValidElement",()=>v,e=>v=e),e(t.exports,"lazy",()=>C,e=>C=e),e(t.exports,"memo",()=>w,e=>w=e),e(t.exports,"startTransition",()=>T,e=>T=e),e(t.exports,"unstable_act",()=>k,e=>k=e),e(t.exports,"useCallback",()=>S,e=>S=e),e(t.exports,"useContext",()=>b,e=>b=e),e(t.exports,"useDebugValue",()=>I,e=>I=e),e(t.exports,"useDeferredValue",()=>E,e=>E=e),e(t.exports,"useEffect",()=>A,e=>A=e),e(t.exports,"useId",()=>_,e=>_=e),e(t.exports,"useImperativeHandle",()=>R,e=>R=e),e(t.exports,"useInsertionEffect",()=>P,e=>P=e),e(t.exports,"useLayoutEffect",()=>N,e=>N=e),e(t.exports,"useMemo",()=>O,e=>O=e),e(t.exports,"useReducer",()=>M,e=>M=e),e(t.exports,"useRef",()=>x,e=>x=e),e(t.exports,"useState",()=>L,e=>L=e),e(t.exports,"useSyncExternalStore",()=>q,e=>q=e),e(t.exports,"useTransition",()=>U,e=>U=e),e(t.exports,"version",()=>D,e=>D=e);var r,o,i,a,s,l,c,u,d,h,g,f,p,m,y,v,C,w,T,k,S,b,I,E,A,_,R,P,N,O,M,x,L,q,U,D,H=Symbol.for("react.element"),F=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),$=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),Q=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),Y=Symbol.iterator,J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,Z={};function ee(e,t,n){this.props=e,this.context=t,this.refs=Z,this.updater=n||J}function et(){}function en(e,t,n){this.props=e,this.context=t,this.refs=Z,this.updater=n||J}ee.prototype.isReactComponent={},ee.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},ee.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},et.prototype=ee.prototype;var er=en.prototype=new et;er.constructor=en,X(er,ee.prototype),er.isPureReactComponent=!0;var eo=Array.isArray,ei=Object.prototype.hasOwnProperty,ea={current:null},es={key:!0,ref:!0,__self:!0,__source:!0};function el(e,t,n){var r,o={},i=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)ei.call(t,r)&&!es.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return{$$typeof:H,type:e,key:i,ref:a,props:o,_owner:ea.current}}function ec(e){return"object"==typeof e&&null!==e&&e.$$typeof===H}var eu=/\/+/g;function ed(e,t){var n,r;return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36)}function eh(e,t,n){if(null==e)return e;var r=[],o=0;return function e(t,n,r,o,i){var a,s,l,c=typeof t;("undefined"===c||"boolean"===c)&&(t=null);var u=!1;if(null===t)u=!0;else switch(c){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case H:case F:u=!0}}if(u)return i=i(u=t),t=""===o?"."+ed(u,0):o,eo(i)?(r="",null!=t&&(r=t.replace(eu,"$&/")+"/"),e(i,n,r,"",function(e){return e})):null!=i&&(ec(i)&&(a=i,s=r+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(eu,"$&/")+"/")+t,i={$$typeof:H,type:a.type,key:s,ref:a.ref,props:a.props,_owner:a._owner}),n.push(i)),1;if(u=0,o=""===o?".":o+":",eo(t))for(var d=0;d<t.length;d++){var h=o+ed(c=t[d],d);u+=e(c,n,r,h,i)}else if("function"==typeof(h=null===(l=t)||"object"!=typeof l?null:"function"==typeof(l=Y&&l[Y]||l["@@iterator"])?l:null))for(t=h.call(t),d=0;!(c=t.next()).done;)h=o+ed(c=c.value,d++),u+=e(c,n,r,h,i);else if("object"===c)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(n=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return u}(e,r,"","",function(e){return t.call(n,e,o++)}),r}function eg(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var ef={current:null},ep={transition:null};function em(){throw Error("act(...) is not supported in production builds of React.")}r={map:eh,forEach:function(e,t,n){eh(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return eh(e,function(){t++}),t},toArray:function(e){return eh(e,function(e){return e})||[]},only:function(e){if(!ec(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},o=ee,i=B,a=K,s=en,l=z,c=V,u={ReactCurrentDispatcher:ef,ReactCurrentBatchConfig:ep,ReactCurrentOwner:ea},d=em,h=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=X({},e.props),o=e.key,i=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,a=ea.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)ei.call(t,l)&&!es.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==s?s[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:H,type:e.type,key:o,ref:i,props:r,_owner:a}},g=function(e){return(e={$$typeof:$,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:G,_context:e},e.Consumer=e},f=el,p=function(e){var t=el.bind(null,e);return t.type=e,t},m=function(){return{current:null}},y=function(e){return{$$typeof:j,render:e}},v=ec,C=function(e){return{$$typeof:W,_payload:{_status:-1,_result:e},_init:eg}},w=function(e,t){return{$$typeof:Q,type:e,compare:void 0===t?null:t}},T=function(e){var t=ep.transition;ep.transition={};try{e()}finally{ep.transition=t}},k=em,S=function(e,t){return ef.current.useCallback(e,t)},b=function(e){return ef.current.useContext(e)},I=function(){},E=function(e){return ef.current.useDeferredValue(e)},A=function(e,t){return ef.current.useEffect(e,t)},_=function(){return ef.current.useId()},R=function(e,t,n){return ef.current.useImperativeHandle(e,t,n)},P=function(e,t){return ef.current.useInsertionEffect(e,t)},N=function(e,t){return ef.current.useLayoutEffect(e,t)},O=function(e,t){return ef.current.useMemo(e,t)},M=function(e,t,n){return ef.current.useReducer(e,t,n)},x=function(e){return ef.current.useRef(e)},L=function(e){return ef.current.useState(e)},q=function(e,t,n){return ef.current.useSyncExternalStore(e,t,n)},U=function(){return ef.current.useTransition()},D="18.3.1"}),h("Xw6Mv",function(t,n){e(t.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",()=>K,e=>K=e),e(t.exports,"createPortal",()=>G,e=>G=e),e(t.exports,"createRoot",()=>$,e=>$=e),e(t.exports,"findDOMNode",()=>j,e=>j=e),e(t.exports,"flushSync",()=>V,e=>V=e),e(t.exports,"hydrate",()=>Q,e=>Q=e),e(t.exports,"hydrateRoot",()=>W,e=>W=e),e(t.exports,"render",()=>Y,e=>Y=e),e(t.exports,"unmountComponentAtNode",()=>J,e=>J=e),e(t.exports,"unstable_batchedUpdates",()=>X,e=>X=e),e(t.exports,"unstable_renderSubtreeIntoContainer",()=>Z,e=>Z=e),e(t.exports,"version",()=>ee,e=>ee=e);var r,o,i,a,s,l,c=d("acw62"),u=d("fO90s");function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g=new Set,f={};function p(e,t){m(e,t),m(e+"Capture",t)}function m(e,t){for(f[e]=t,e=0;e<t.length;e++)g.add(t[e])}var y="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,v=Object.prototype.hasOwnProperty,C=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},T={};function k(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){S[e]=new k(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];S[t]=new k(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){S[e]=new k(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){S[e]=new k(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){S[e]=new k(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){S[e]=new k(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){S[e]=new k(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){S[e]=new k(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){S[e]=new k(e,5,!1,e.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function I(e){return e[1].toUpperCase()}function E(e,t,n,r){var o,i=S.hasOwnProperty(t)?S[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":if(r)return!1;if(null!==n)return!n.acceptsBooleans;return"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e;default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?(o=t,(!!v.call(T,o)||!v.call(w,o)&&(C.test(o)?T[o]=!0:(w[o]=!0,!1)))&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n))):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(b,I);S[t]=new k(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(b,I);S[t]=new k(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(b,I);S[t]=new k(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){S[e]=new k(e,1,!1,e.toLowerCase(),null,!1,!1)}),S.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){S[e]=new k(e,1,!1,e.toLowerCase(),null,!0,!0)});var A=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),R=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),x=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),H=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var F=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var B=Symbol.iterator;function z(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=B&&e[B]||e["@@iterator"])?e:null}var K,G,$,j,V,Q,W,Y,J,X,Z,ee,et,en=Object.assign;function er(e){if(void 0===et)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);et=t&&t[1]||""}return"\n"+et+e}var eo=!1;function ei(e,t){if(!e||eo)return"";eo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var o=t.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do if(a--,0>--s||o[a]!==i[s]){var l="\n"+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s)break}}}finally{eo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?er(e):""}function ea(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function es(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function el(e){e._valueTracker||(e._valueTracker=function(e){var t=es(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ec(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=es(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function eu(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function ed(e,t){var n=t.checked;return en({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function eh(e,t){var n=null==t.defaultValue?"":t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:n=ea(null!=t.value?t.value:n),controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function eg(e,t){null!=(t=t.checked)&&E(e,"checked",t,!1)}function ef(e,t){eg(e,t);var n=ea(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r){e.removeAttribute("value");return}t.hasOwnProperty("value")?em(e,t.type,n):t.hasOwnProperty("defaultValue")&&em(e,t.type,ea(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ep(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(("submit"===r||"reset"===r)&&(void 0===t.value||null===t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function em(e,t,n){("number"!==t||eu(e.ownerDocument)!==e)&&(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ey=Array.isArray;function ev(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(o=0,n=""+ea(n),t=null;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function eC(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(h(91));return en({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ew(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(h(92));if(ey(n)){if(1<n.length)throw Error(h(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ea(n)}}function eT(e,t){var n=ea(t.value),r=ea(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ek(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function eS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eb(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?eS(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var eI,eE,eA=(eI=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((eE=eE||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=eE.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return eI(e,t,n,r)})}:eI);function e_(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType){n.nodeValue=t;return}}e.textContent=t}var eR={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eP=["Webkit","ms","Moz","O"];function eN(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||eR.hasOwnProperty(e)&&eR[e]?(""+t).trim():t+"px"}function eO(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=eN(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(eR).forEach(function(e){eP.forEach(function(t){eR[t=t+e.charAt(0).toUpperCase()+e.substring(1)]=eR[e]})});var eM=en({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ex(e,t){if(t){if(eM[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(h(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(h(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(h(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(h(62))}}function eL(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eq=null;function eU(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var eD=null,eH=null,eF=null;function eB(e){if(e=rW(e)){if("function"!=typeof eD)throw Error(h(280));var t=e.stateNode;t&&(t=rJ(t),eD(e.stateNode,e.type,t))}}function ez(e){eH?eF?eF.push(e):eF=[e]:eH=e}function eK(){if(eH){var e=eH,t=eF;if(eF=eH=null,eB(e),t)for(e=0;e<t.length;e++)eB(t[e])}}function eG(e,t){return e(t)}function e$(){}var ej=!1;function eV(e,t,n){if(ej)return e(t,n);ej=!0;try{return eG(e,t,n)}finally{ej=!1,(null!==eH||null!==eF)&&(e$(),eK())}}function eQ(e,t){var n=e.stateNode;if(null===n)return null;var r=rJ(n);if(null===r)return null;switch(n=r[t],t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r="button"!==(e=e.type)&&"input"!==e&&"select"!==e&&"textarea"!==e),e=!r;break;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(h(231,t,typeof n));return n}var eW=!1;if(y)try{var eY={};Object.defineProperty(eY,"passive",{get:function(){eW=!0}}),window.addEventListener("test",eY,eY),window.removeEventListener("test",eY,eY)}catch(e){eW=!1}function eJ(e,t,n,r,o,i,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var eX=!1,eZ=null,e0=!1,e1=null,e2={onError:function(e){eX=!0,eZ=e}};function e3(e,t,n,r,o,i,a,s,l){eX=!1,eZ=null,eJ.apply(e2,arguments)}function e4(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(4098&(t=e).flags)&&(n=t.return),e=t.return;while(e)}return 3===t.tag?n:null}function e6(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function e8(e){if(e4(e)!==e)throw Error(h(188))}function e5(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=e4(e)))throw Error(h(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return e8(o),e;if(i===r)return e8(o),t;i=i.sibling}throw Error(h(188))}if(n.return!==r.return)n=o,r=i;else{for(var a=!1,s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a){for(s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a)throw Error(h(189))}}if(n.alternate!==r)throw Error(h(190))}if(3!==n.tag)throw Error(h(188));return n.stateNode.current===n?e:t}(e))?function e(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var n=e(t);if(null!==n)return n;t=t.sibling}return null}(e):null}var e9=u.unstable_scheduleCallback,e7=u.unstable_cancelCallback,te=u.unstable_shouldYield,tt=u.unstable_requestPaint,tn=u.unstable_now,tr=u.unstable_getCurrentPriorityLevel,to=u.unstable_ImmediatePriority,ti=u.unstable_UserBlockingPriority,ta=u.unstable_NormalPriority,ts=u.unstable_LowPriority,tl=u.unstable_IdlePriority,tc=null,tu=null,td=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(th(e)/tg|0)|0},th=Math.log,tg=Math.LN2,tf=64,tp=4194304;function tm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return 0x7c00000&e;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return e}}function ty(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=0xfffffff&n;if(0!==a){var s=a&~o;0!==s?r=tm(s):0!=(i&=a)&&(r=tm(i))}else 0!=(a=n&~o)?r=tm(a):0!==i&&(r=tm(i));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!=(4194240&i)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-td(t)),r|=e[n],t&=~o;return r}function tv(e){return 0!=(e=-0x40000001&e.pendingLanes)?e:0x40000000&e?0x40000000:0}function tC(){var e=tf;return 0==(4194240&(tf<<=1))&&(tf=64),e}function tw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tT(e,t,n){e.pendingLanes|=t,0x20000000!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-td(t)]=n}function tk(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-td(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var tS=0;function tb(e){return 1<(e&=-e)?4<e?0!=(0xfffffff&e)?16:0x20000000:4:1}var tI,tE,tA,t_,tR,tP=!1,tN=[],tO=null,tM=null,tx=null,tL=new Map,tq=new Map,tU=[],tD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tH(e,t){switch(e){case"focusin":case"focusout":tO=null;break;case"dragenter":case"dragleave":tM=null;break;case"mouseover":case"mouseout":tx=null;break;case"pointerover":case"pointerout":tL.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tq.delete(t.pointerId)}}function tF(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&null!==(t=rW(t))&&tE(t)):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o)),e}function tB(e){var t=rQ(e.target);if(null!==t){var n=e4(t);if(null!==n){if(13===(t=n.tag)){if(null!==(t=e6(n))){e.blockedOn=t,tR(e.priority,function(){tA(n)});return}}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=3===n.tag?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tz(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=tZ(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=rW(n))&&tE(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);eq=r,n.target.dispatchEvent(r),eq=null,t.shift()}return!0}function tK(e,t,n){tz(e)&&n.delete(t)}function tG(){tP=!1,null!==tO&&tz(tO)&&(tO=null),null!==tM&&tz(tM)&&(tM=null),null!==tx&&tz(tx)&&(tx=null),tL.forEach(tK),tq.forEach(tK)}function t$(e,t){e.blockedOn===t&&(e.blockedOn=null,tP||(tP=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,tG)))}function tj(e){function t(t){return t$(t,e)}if(0<tN.length){t$(tN[0],e);for(var n=1;n<tN.length;n++){var r=tN[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==tO&&t$(tO,e),null!==tM&&t$(tM,e),null!==tx&&t$(tx,e),tL.forEach(t),tq.forEach(t),n=0;n<tU.length;n++)(r=tU[n]).blockedOn===e&&(r.blockedOn=null);for(;0<tU.length&&null===(n=tU[0]).blockedOn;)tB(n),null===n.blockedOn&&tU.shift()}var tV=A.ReactCurrentBatchConfig,tQ=!0;function tW(e,t,n,r){var o=tS,i=tV.transition;tV.transition=null;try{tS=1,tJ(e,t,n,r)}finally{tS=o,tV.transition=i}}function tY(e,t,n,r){var o=tS,i=tV.transition;tV.transition=null;try{tS=4,tJ(e,t,n,r)}finally{tS=o,tV.transition=i}}function tJ(e,t,n,r){if(tQ){var o=tZ(e,t,n,r);if(null===o)rw(e,t,r,tX,n),tH(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return tO=tF(tO,e,t,n,r,o),!0;case"dragenter":return tM=tF(tM,e,t,n,r,o),!0;case"mouseover":return tx=tF(tx,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return tL.set(i,tF(tL.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,tq.set(i,tF(tq.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(tH(e,r),4&t&&-1<tD.indexOf(e)){for(;null!==o;){var i=rW(o);if(null!==i&&tI(i),null===(i=tZ(e,t,n,r))&&rw(e,t,r,tX,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else rw(e,t,r,null,n)}}var tX=null;function tZ(e,t,n,r){if(tX=null,null!==(e=rQ(e=eU(r)))){if(null===(t=e4(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=e6(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}return tX=e,null}function t0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tr()){case to:return 1;case ti:return 4;case ta:case ts:return 16;case tl:return 0x20000000;default:return 16}default:return 16}}var t1=null,t2=null,t3=null;function t4(){if(t3)return t3;var e,t,n=t2,r=n.length,o="value"in t1?t1.value:t1.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return t3=o.slice(e,1<t?1-t:void 0)}function t6(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function t8(){return!0}function t5(){return!1}function t9(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?t8:t5,this.isPropagationStopped=t5,this}return en(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=t8)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=t8)},persist:function(){},isPersistent:t8}),t}var t7,ne,nt,nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nr=t9(nn),no=en({},nn,{view:0,detail:0}),ni=t9(no),na=en({},no,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ny,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nt&&(nt&&"mousemove"===e.type?(t7=e.screenX-nt.screenX,ne=e.screenY-nt.screenY):ne=t7=0,nt=e),t7)},movementY:function(e){return"movementY"in e?e.movementY:ne}}),ns=t9(na),nl=t9(en({},na,{dataTransfer:0})),nc=t9(en({},no,{relatedTarget:0})),nu=t9(en({},nn,{animationName:0,elapsedTime:0,pseudoElement:0})),nd=t9(en({},nn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),nh=t9(en({},nn,{data:0})),ng={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},np={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=np[e])&&!!t[e]}function ny(){return nm}var nv=t9(en({},no,{key:function(e){if(e.key){var t=ng[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=t6(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?nf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ny,charCode:function(e){return"keypress"===e.type?t6(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?t6(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),nC=t9(en({},na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),nw=t9(en({},no,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ny})),nT=t9(en({},nn,{propertyName:0,elapsedTime:0,pseudoElement:0})),nk=t9(en({},na,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),nS=[9,13,27,32],nb=y&&"CompositionEvent"in window,nI=null;y&&"documentMode"in document&&(nI=document.documentMode);var nE=y&&"TextEvent"in window&&!nI,nA=y&&(!nb||nI&&8<nI&&11>=nI),n_=!1;function nR(e,t){switch(e){case"keyup":return -1!==nS.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nP(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var nN=!1,nO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!nO[e.type]:"textarea"===t}function nx(e,t,n,r){ez(r),0<(t=rk(t,"onChange")).length&&(n=new nr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var nL=null,nq=null;function nU(e){rf(e,0)}function nD(e){if(ec(rY(e)))return e}function nH(e,t){if("change"===e)return t}var nF=!1;if(y){if(y){var nB="oninput"in document;if(!nB){var nz=document.createElement("div");nz.setAttribute("oninput","return;"),nB="function"==typeof nz.oninput}r=nB}else r=!1;nF=r&&(!document.documentMode||9<document.documentMode)}function nK(){nL&&(nL.detachEvent("onpropertychange",nG),nq=nL=null)}function nG(e){if("value"===e.propertyName&&nD(nq)){var t=[];nx(t,nq,e,eU(e)),eV(nU,t)}}function n$(e,t,n){"focusin"===e?(nK(),nL=t,nq=n,nL.attachEvent("onpropertychange",nG)):"focusout"===e&&nK()}function nj(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return nD(nq)}function nV(e,t){if("click"===e)return nD(t)}function nQ(e,t){if("input"===e||"change"===e)return nD(t)}var nW="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function nY(e,t){if(nW(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!v.call(t,o)||!nW(e[o],t[o]))return!1}return!0}function nJ(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nX(e,t){var n,r=nJ(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nJ(r)}}function nZ(){for(var e=window,t=eu();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(n)e=t.contentWindow;else break;t=eu(e.document)}return t}function n0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var n1=y&&"documentMode"in document&&11>=document.documentMode,n2=null,n3=null,n4=null,n6=!1;function n8(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;n6||null==n2||n2!==eu(r)||(r="selectionStart"in(r=n2)&&n0(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},n4&&nY(n4,r)||(n4=r,0<(r=rk(n3,"onSelect")).length&&(t=new nr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=n2)))}function n5(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var n9={animationend:n5("Animation","AnimationEnd"),animationiteration:n5("Animation","AnimationIteration"),animationstart:n5("Animation","AnimationStart"),transitionend:n5("Transition","TransitionEnd")},n7={},re={};function rt(e){if(n7[e])return n7[e];if(!n9[e])return e;var t,n=n9[e];for(t in n)if(n.hasOwnProperty(t)&&t in re)return n7[e]=n[t];return e}y&&(re=document.createElement("div").style,"AnimationEvent"in window||(delete n9.animationend.animation,delete n9.animationiteration.animation,delete n9.animationstart.animation),"TransitionEvent"in window||delete n9.transitionend.transition);var rn=rt("animationend"),rr=rt("animationiteration"),ro=rt("animationstart"),ri=rt("transitionend"),ra=new Map,rs="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rl(e,t){ra.set(e,t),p(t,[e])}for(var rc=0;rc<rs.length;rc++){var ru=rs[rc];rl(ru.toLowerCase(),"on"+(ru[0].toUpperCase()+ru.slice(1)))}rl(rn,"onAnimationEnd"),rl(rr,"onAnimationIteration"),rl(ro,"onAnimationStart"),rl("dblclick","onDoubleClick"),rl("focusin","onFocus"),rl("focusout","onBlur"),rl(ri,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rh=new Set("cancel close invalid load scroll toggle".split(" ").concat(rd));function rg(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,a,s,l){if(e3.apply(this,arguments),eX){if(eX){var c=eZ;eX=!1,eZ=null}else throw Error(h(198));e0||(e0=!0,e1=c)}}(r,t,void 0,e),e.currentTarget=null}function rf(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;rg(o,s,c),i=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;rg(o,s,c),i=l}}}if(e0)throw e=e1,e0=!1,e1=null,e}function rp(e,t){var n=t[r$];void 0===n&&(n=t[r$]=new Set);var r=e+"__bubble";n.has(r)||(rC(t,e,2,!1),n.add(r))}function rm(e,t,n){var r=0;t&&(r|=4),rC(n,e,r,t)}var ry="_reactListening"+Math.random().toString(36).slice(2);function rv(e){if(!e[ry]){e[ry]=!0,g.forEach(function(t){"selectionchange"!==t&&(rh.has(t)||rm(t,!1,e),rm(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ry]||(t[ry]=!0,rm("selectionchange",!1,t))}}function rC(e,t,n,r){switch(t0(t)){case 1:var o=tW;break;case 4:o=tY;break;default:o=tJ}n=o.bind(null,t,n,e),o=void 0,eW&&("touchstart"===t||"touchmove"===t||"wheel"===t)&&(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function rw(e,t,n,r,o){var i=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=rQ(s)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}s=s.parentNode}}r=r.return}eV(function(){var r=i,o=eU(n),a=[];e:{var s=ra.get(e);if(void 0!==s){var l=nr,c=e;switch(e){case"keypress":if(0===t6(n))break e;case"keydown":case"keyup":l=nv;break;case"focusin":c="focus",l=nc;break;case"focusout":c="blur",l=nc;break;case"beforeblur":case"afterblur":l=nc;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ns;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=nl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=nw;break;case rn:case rr:case ro:l=nu;break;case ri:l=nT;break;case"scroll":l=ni;break;case"wheel":l=nk;break;case"copy":case"cut":case"paste":l=nd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=nC}var u=0!=(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var g,f=r;null!==f;){var p=(g=f).stateNode;if(5===g.tag&&null!==p&&(g=p,null!==h&&null!=(p=eQ(f,h))&&u.push(rT(f,p,g))),d)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,o),a.push({event:s,listeners:u}))}}if(0==(7&t)){if(s="mouseover"===e||"pointerover"===e,l="mouseout"===e||"pointerout"===e,!(s&&n!==eq&&(c=n.relatedTarget||n.fromElement)&&(rQ(c)||c[rG]))&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(c=n.relatedTarget||n.toElement,l=r,null!==(c=c?rQ(c):null)&&(d=e4(c),c!==d||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=ns,p="onMouseLeave",h="onMouseEnter",f="mouse",("pointerout"===e||"pointerover"===e)&&(u=nC,p="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?s:rY(l),g=null==c?s:rY(c),(s=new u(p,f+"leave",l,n,o)).target=d,s.relatedTarget=g,p=null,rQ(o)===r&&((u=new u(h,f+"enter",c,n,o)).target=g,u.relatedTarget=d,p=u),d=p,l&&c)t:{for(u=l,h=c,f=0,g=u;g;g=rS(g))f++;for(g=0,p=h;p;p=rS(p))g++;for(;0<f-g;)u=rS(u),f--;for(;0<g-f;)h=rS(h),g--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break t;u=rS(u),h=rS(h)}u=null}else u=null;null!==l&&rb(a,s,l,u,!1),null!==c&&null!==d&&rb(a,d,c,u,!0)}e:{if("select"===(l=(s=r?rY(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m,y=nH;else if(nM(s)){if(nF)y=nQ;else{y=nj;var v=n$}}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=nV);if(y&&(y=y(e,r))){nx(a,y,n,o);break e}v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&em(s,"number",s.value)}switch(v=r?rY(r):window,e){case"focusin":(nM(v)||"true"===v.contentEditable)&&(n2=v,n3=r,n4=null);break;case"focusout":n4=n3=n2=null;break;case"mousedown":n6=!0;break;case"contextmenu":case"mouseup":case"dragend":n6=!1,n8(a,n,o);break;case"selectionchange":if(n1)break;case"keydown":case"keyup":n8(a,n,o)}if(nb)t:{switch(e){case"compositionstart":var C="onCompositionStart";break t;case"compositionend":C="onCompositionEnd";break t;case"compositionupdate":C="onCompositionUpdate";break t}C=void 0}else nN?nR(e,n)&&(C="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(C="onCompositionStart");C&&(nA&&"ko"!==n.locale&&(nN||"onCompositionStart"!==C?"onCompositionEnd"===C&&nN&&(m=t4()):(t2="value"in(t1=o)?t1.value:t1.textContent,nN=!0)),0<(v=rk(r,C)).length&&(C=new nh(C,e,null,n,o),a.push({event:C,listeners:v}),m?C.data=m:null!==(m=nP(n))&&(C.data=m))),(m=nE?function(e,t){switch(e){case"compositionend":return nP(t);case"keypress":if(32!==t.which)return null;return n_=!0," ";case"textInput":return" "===(e=t.data)&&n_?null:e;default:return null}}(e,n):function(e,t){if(nN)return"compositionend"===e||!nb&&nR(e,t)?(e=t4(),t3=t2=t1=null,nN=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nA&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=rk(r,"onBeforeInput")).length&&(o=new nh("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=m)}rf(a,t)})}function rT(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rk(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=eQ(e,n))&&r.unshift(rT(e,i,o)),null!=(i=eQ(e,t))&&r.push(rT(e,i,o))),e=e.return}return r}function rS(e){if(null===e)return null;do e=e.return;while(e&&5!==e.tag)return e||null}function rb(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=eQ(n,i))&&a.unshift(rT(n,l,s)):o||null!=(l=eQ(n,i))&&a.push(rT(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var rI=/\r\n?/g,rE=/\u0000|\uFFFD/g;function rA(e){return("string"==typeof e?e:""+e).replace(rI,"\n").replace(rE,"")}function r_(e,t,n){if(t=rA(t),rA(e)!==t&&n)throw Error(h(425))}function rR(){}var rP=null,rN=null;function rO(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rM="function"==typeof setTimeout?setTimeout:void 0,rx="function"==typeof clearTimeout?clearTimeout:void 0,rL="function"==typeof Promise?Promise:void 0,rq="function"==typeof queueMicrotask?queueMicrotask:void 0!==rL?function(e){return rL.resolve(null).then(e).catch(rU)}:rM;function rU(e){setTimeout(function(){throw e})}function rD(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType){if("/$"===(n=o.data)){if(0===r){e.removeChild(o),tj(t);return}r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++}n=o}while(n)tj(t)}function rH(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function rF(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var rB=Math.random().toString(36).slice(2),rz="__reactFiber$"+rB,rK="__reactProps$"+rB,rG="__reactContainer$"+rB,r$="__reactEvents$"+rB,rj="__reactListeners$"+rB,rV="__reactHandles$"+rB;function rQ(e){var t=e[rz];if(t)return t;for(var n=e.parentNode;n;){if(t=n[rG]||n[rz]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=rF(e);null!==e;){if(n=e[rz])return n;e=rF(e)}return t}n=(e=n).parentNode}return null}function rW(e){return(e=e[rz]||e[rG])&&(5===e.tag||6===e.tag||13===e.tag||3===e.tag)?e:null}function rY(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(h(33))}function rJ(e){return e[rK]||null}var rX=[],rZ=-1;function r0(e){return{current:e}}function r1(e){0>rZ||(e.current=rX[rZ],rX[rZ]=null,rZ--)}function r2(e,t){rX[++rZ]=e.current,e.current=t}var r3={},r4=r0(r3),r6=r0(!1),r8=r3;function r5(e,t){var n=e.type.contextTypes;if(!n)return r3;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function r9(e){return null!=(e=e.childContextTypes)}function r7(){r1(r6),r1(r4)}function oe(e,t,n){if(r4.current!==r3)throw Error(h(168));r2(r4,t),r2(r6,n)}function ot(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(h(108,function(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return function e(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case P:return"Fragment";case R:return"Portal";case O:return"Profiler";case N:return"StrictMode";case q:return"Suspense";case U:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case x:return(t.displayName||"Context")+".Consumer";case M:return(t._context.displayName||"Context")+".Provider";case L:var n=t.render;return(t=t.displayName)||(t=""!==(t=n.displayName||n.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case D:return null!==(n=t.displayName||null)?n:e(t.type)||"Memo";case H:n=t._payload,t=t._init;try{return e(t(n))}catch(e){}}return null}(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}(e)||"Unknown",o));return en({},n,r)}function on(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||r3,r8=r4.current,r2(r4,e),r2(r6,r6.current),!0}function or(e,t,n){var r=e.stateNode;if(!r)throw Error(h(169));n?(r.__reactInternalMemoizedMergedChildContext=e=ot(e,t,r8),r1(r6),r1(r4),r2(r4,e)):r1(r6),r2(r6,n)}var oo=null,oi=!1,oa=!1;function os(e){null===oo?oo=[e]:oo.push(e)}function ol(){if(!oa&&null!==oo){oa=!0;var e=0,t=tS;try{var n=oo;for(tS=1;e<n.length;e++){var r=n[e];do r=r(!0);while(null!==r)}oo=null,oi=!1}catch(t){throw null!==oo&&(oo=oo.slice(e+1)),e9(to,ol),t}finally{tS=t,oa=!1}}return null}var oc=[],ou=0,od=null,oh=0,og=[],of=0,op=null,om=1,oy="";function ov(e,t){oc[ou++]=oh,oc[ou++]=od,od=e,oh=t}function oC(e,t,n){og[of++]=om,og[of++]=oy,og[of++]=op,op=e;var r=om;e=oy;var o=32-td(r)-1;r&=~(1<<o),n+=1;var i=32-td(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,om=1<<32-td(t)+o|n<<o|r,oy=i+e}else om=1<<i|n<<o|r,oy=e}function ow(e){null!==e.return&&(ov(e,1),oC(e,1,0))}function oT(e){for(;e===od;)od=oc[--ou],oc[ou]=null,oh=oc[--ou],oc[ou]=null;for(;e===op;)op=og[--of],og[of]=null,oy=og[--of],og[of]=null,om=og[--of],og[of]=null}var ok=null,oS=null,ob=!1,oI=null;function oE(e,t){var n=s5(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oA(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ok=e,oS=rH(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ok=e,oS=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(e.memoizedState={dehydrated:t,treeContext:n=null!==op?{id:om,overflow:oy}:null,retryLane:0x40000000},(n=s5(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ok=e,oS=null,!0);default:return!1}}function o_(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function oR(e){if(ob){var t=oS;if(t){var n=t;if(!oA(e,t)){if(o_(e))throw Error(h(418));t=rH(n.nextSibling);var r=ok;t&&oA(e,t)?oE(r,n):(e.flags=-4097&e.flags|2,ob=!1,ok=e)}}else{if(o_(e))throw Error(h(418));e.flags=-4097&e.flags|2,ob=!1,ok=e}}}function oP(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ok=e}function oN(e){if(e!==ok)return!1;if(!ob)return oP(e),ob=!0,!1;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!rO(e.type,e.memoizedProps)),t&&(t=oS)){if(o_(e))throw oO(),Error(h(418));for(;t;)oE(e,t),t=rH(t.nextSibling)}if(oP(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(h(317));e:{for(t=0,e=e.nextSibling;e;){if(8===e.nodeType){var t,n=e.data;if("/$"===n){if(0===t){oS=rH(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oS=null}}else oS=ok?rH(e.stateNode.nextSibling):null;return!0}function oO(){for(var e=oS;e;)e=rH(e.nextSibling)}function oM(){oS=ok=null,ob=!1}function ox(e){null===oI?oI=[e]:oI.push(e)}var oL=A.ReactCurrentBatchConfig;function oq(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(h(309));var r=n.stateNode}if(!r)throw Error(h(147,e));var o=r,i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=o.refs;null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(h(284));if(!n._owner)throw Error(h(290,e))}return e}function oU(e,t){throw Error(h(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function oD(e){return(0,e._init)(e._payload)}function oH(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=s7(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return(t.index=r,e)?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?(t=lr(n,e.mode,r)).return=e:(t=o(t,n)).return=e,t}function l(e,t,n,r){var i=n.type;return i===P?u(e,t,n.props.children,r,n.key):(null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===H&&oD(i)===t.type)?(r=o(t,n.props)).ref=oq(e,t,n):(r=le(n.type,n.key,n.props,null,e.mode,r)).ref=oq(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=lo(n,e.mode,r)).return=e:(t=o(t,n.children||[])).return=e,t}function u(e,t,n,r,i){return null===t||7!==t.tag?(t=lt(n,e.mode,r,i)).return=e:(t=o(t,n)).return=e,t}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=lr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case _:return(n=le(t.type,t.key,t.props,null,e.mode,n)).ref=oq(e,null,t),n.return=e,n;case R:return(t=lo(t,e.mode,n)).return=e,t;case H:return d(e,(0,t._init)(t._payload),n)}if(ey(t)||z(t))return(t=lt(t,e.mode,n,null)).return=e,t;oU(e,t)}return null}function g(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==o?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===o?l(e,t,n,r):null;case R:return n.key===o?c(e,t,n,r):null;case H:return g(e,t,(o=n._init)(n._payload),r)}if(ey(n)||z(n))return null!==o?null:u(e,t,n,r,null);oU(e,n)}return null}function f(e,t,n,r,o){if("string"==typeof r&&""!==r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o);case R:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case H:return f(e,t,n,(0,r._init)(r._payload),o)}if(ey(r)||z(r))return u(t,e=e.get(n)||null,r,o,null);oU(t,r)}return null}return function s(l,c,u,p){if("object"==typeof u&&null!==u&&u.type===P&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case _:e:{for(var m=u.key,y=c;null!==y;){if(y.key===m){if((m=u.type)===P){if(7===y.tag){n(l,y.sibling),(c=o(y,u.props.children)).return=l,l=c;break e}}else if(y.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===H&&oD(m)===y.type){n(l,y.sibling),(c=o(y,u.props)).ref=oq(l,y,u),c.return=l,l=c;break e}n(l,y);break}t(l,y),y=y.sibling}u.type===P?((c=lt(u.props.children,l.mode,p,u.key)).return=l,l=c):((p=le(u.type,u.key,u.props,null,l.mode,p)).ref=oq(l,c,u),p.return=l,l=p)}return a(l);case R:e:{for(y=u.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(c=o(c,u.children||[])).return=l,l=c;break e}n(l,c);break}t(l,c),c=c.sibling}(c=lo(u,l.mode,p)).return=l,l=c}return a(l);case H:return s(l,c,(y=u._init)(u._payload),p)}if(ey(u))return function(o,a,s,l){for(var c=null,u=null,h=a,p=a=0,m=null;null!==h&&p<s.length;p++){h.index>p?(m=h,h=null):m=h.sibling;var y=g(o,h,s[p],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(o,h),a=i(y,a,p),null===u?c=y:u.sibling=y,u=y,h=m}if(p===s.length)return n(o,h),ob&&ov(o,p),c;if(null===h){for(;p<s.length;p++)null!==(h=d(o,s[p],l))&&(a=i(h,a,p),null===u?c=h:u.sibling=h,u=h);return ob&&ov(o,p),c}for(h=r(o,h);p<s.length;p++)null!==(m=f(h,o,p,s[p],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?p:m.key),a=i(m,a,p),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(o,e)}),ob&&ov(o,p),c}(l,c,u,p);if(z(u))return function(o,a,s,l){var c=z(s);if("function"!=typeof c)throw Error(h(150));if(null==(s=c.call(s)))throw Error(h(151));for(var u=c=null,p=a,m=a=0,y=null,v=s.next();null!==p&&!v.done;m++,v=s.next()){p.index>m?(y=p,p=null):y=p.sibling;var C=g(o,p,v.value,l);if(null===C){null===p&&(p=y);break}e&&p&&null===C.alternate&&t(o,p),a=i(C,a,m),null===u?c=C:u.sibling=C,u=C,p=y}if(v.done)return n(o,p),ob&&ov(o,m),c;if(null===p){for(;!v.done;m++,v=s.next())null!==(v=d(o,v.value,l))&&(a=i(v,a,m),null===u?c=v:u.sibling=v,u=v);return ob&&ov(o,m),c}for(p=r(o,p);!v.done;m++,v=s.next())null!==(v=f(p,o,m,v.value,l))&&(e&&null!==v.alternate&&p.delete(null===v.key?m:v.key),a=i(v,a,m),null===u?c=v:u.sibling=v,u=v);return e&&p.forEach(function(e){return t(o,e)}),ob&&ov(o,m),c}(l,c,u,p);oU(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(c=o(c,u)).return=l):(n(l,c),(c=lr(u,l.mode,p)).return=l),a(l=c)):n(l,c)}}var oF=oH(!0),oB=oH(!1),oz=r0(null),oK=null,oG=null,o$=null;function oj(){o$=oG=oK=null}function oV(e){var t=oz.current;r1(oz),e._currentValue=t}function oQ(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function oW(e,t){oK=e,o$=oG=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(aw=!0),e.firstContext=null)}function oY(e){var t=e._currentValue;if(o$!==e){if(e={context:e,memoizedValue:t,next:null},null===oG){if(null===oK)throw Error(h(308));oG=e,oK.dependencies={lanes:0,firstContext:e}}else oG=oG.next=e}return t}var oJ=null;function oX(e){null===oJ?oJ=[e]:oJ.push(e)}function oZ(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,oX(t)):(n.next=o.next,o.next=n),t.interleaved=n,o0(e,r)}function o0(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var o1=!1;function o2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function o3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function o4(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function o6(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&ss)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,o0(e,n)}return null===(o=r.interleaved)?(t.next=t,oX(r)):(t.next=o.next,o.next=t),r.interleaved=t,o0(e,n)}function o8(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tk(e,n)}}function o5(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n)null===i?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function o9(e,t,n,r){var o=e.updateQueue;o1=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&(s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l)}if(null!==i){var d=o.baseState;for(a=0,u=c=l=null,s=i;;){var h=s.lane,g=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:g,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,p=s;switch(h=t,g=n,p.tag){case 1:if("function"==typeof(f=p.payload)){d=f.call(g,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(h="function"==typeof(f=p.payload)?f.call(g,d,h):f))break e;d=en({},d,h);break e;case 2:o1=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else g={eventTime:g,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=g,l=d):u=u.next=g,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do a|=o.lane,o=o.next;while(o!==t)}else null===i&&(o.shared.lanes=0);sp|=a,e.lanes=a,e.memoizedState=d}}function o7(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!=typeof o)throw Error(h(191,o));o.call(r)}}}var ie={},it=r0(ie),ir=r0(ie),io=r0(ie);function ii(e){if(e===ie)throw Error(h(174));return e}function ia(e,t){switch(r2(io,t),r2(ir,e),r2(it,ie),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:eb(null,"");break;default:t=eb(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}r1(it),r2(it,t)}function is(){r1(it),r1(ir),r1(io)}function il(e){ii(io.current);var t=ii(it.current),n=eb(t,e.type);t!==n&&(r2(ir,e),r2(it,n))}function ic(e){ir.current===e&&(r1(it),r1(ir))}var iu=r0(0);function id(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ih=[];function ig(){for(var e=0;e<ih.length;e++)ih[e]._workInProgressVersionPrimary=null;ih.length=0}var ip=A.ReactCurrentDispatcher,im=A.ReactCurrentBatchConfig,iy=0,iv=null,iC=null,iw=null,iT=!1,ik=!1,iS=0,ib=0;function iI(){throw Error(h(321))}function iE(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nW(e[n],t[n]))return!1;return!0}function iA(e,t,n,r,o,i){if(iy=i,iv=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ip.current=null===e||null===e.memoizedState?ae:at,e=n(r,o),ik){i=0;do{if(ik=!1,iS=0,25<=i)throw Error(h(301));i+=1,iw=iC=null,t.updateQueue=null,ip.current=an,e=n(r,o)}while(ik)}if(ip.current=i7,t=null!==iC&&null!==iC.next,iy=0,iw=iC=iv=null,iT=!1,t)throw Error(h(300));return e}function i_(){var e=0!==iS;return iS=0,e}function iR(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===iw?iv.memoizedState=iw=e:iw=iw.next=e,iw}function iP(){if(null===iC){var e=iv.alternate;e=null!==e?e.memoizedState:null}else e=iC.next;var t=null===iw?iv.memoizedState:iw.next;if(null!==t)iw=t,iC=e;else{if(null===e)throw Error(h(310));e={memoizedState:(iC=e).memoizedState,baseState:iC.baseState,baseQueue:iC.baseQueue,queue:iC.queue,next:null},null===iw?iv.memoizedState=iw=e:iw=iw.next=e}return iw}function iN(e,t){return"function"==typeof t?t(e):t}function iO(e){var t=iP(),n=t.queue;if(null===n)throw Error(h(311));n.lastRenderedReducer=e;var r=iC,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var a=o.next;o.next=i.next,i.next=a}r.baseQueue=o=i,n.pending=null}if(null!==o){i=o.next,r=r.baseState;var s=a=null,l=null,c=i;do{var u=c.lane;if((iy&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(s=l=d,a=r):l=l.next=d,iv.lanes|=u,sp|=u}c=c.next}while(null!==c&&c!==i)null===l?a=r:l.next=s,nW(r,t.memoizedState)||(aw=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do i=o.lane,iv.lanes|=i,sp|=i,o=o.next;while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function iM(e){var t=iP(),n=t.queue;if(null===n)throw Error(h(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var a=o=o.next;do i=e(i,a.action),a=a.next;while(a!==o)nW(i,t.memoizedState)||(aw=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ix(){}function iL(e,t){var n=iv,r=iP(),o=t(),i=!nW(r.memoizedState,o);if(i&&(r.memoizedState=o,aw=!0),r=r.queue,iV(iD.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==iw&&1&iw.memoizedState.tag){if(n.flags|=2048,iz(9,iU.bind(null,n,r,o,t),void 0,null),null===sl)throw Error(h(349));0!=(30&iy)||iq(n,t,o)}return o}function iq(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=iv.updateQueue)?(t={lastEffect:null,stores:null},iv.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function iU(e,t,n,r){t.value=n,t.getSnapshot=r,iH(t)&&iF(e)}function iD(e,t,n){return n(function(){iH(t)&&iF(e)})}function iH(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nW(e,n)}catch(e){return!0}}function iF(e){var t=o0(e,1);null!==t&&sL(t,e,1,-1)}function iB(e){var t=iR();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,t.queue=e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iN,lastRenderedState:e},e=e.dispatch=i6.bind(null,iv,e),[t.memoizedState,e]}function iz(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=iv.updateQueue)?(t={lastEffect:null,stores:null},iv.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function iK(){return iP().memoizedState}function iG(e,t,n,r){var o=iR();iv.flags|=e,o.memoizedState=iz(1|t,n,void 0,void 0===r?null:r)}function i$(e,t,n,r){var o=iP();r=void 0===r?null:r;var i=void 0;if(null!==iC){var a=iC.memoizedState;if(i=a.destroy,null!==r&&iE(r,a.deps)){o.memoizedState=iz(t,n,i,r);return}}iv.flags|=e,o.memoizedState=iz(1|t,n,i,r)}function ij(e,t){return iG(8390656,8,e,t)}function iV(e,t){return i$(2048,8,e,t)}function iQ(e,t){return i$(4,2,e,t)}function iW(e,t){return i$(4,4,e,t)}function iY(e,t){return"function"==typeof t?(t(e=e()),function(){t(null)}):null!=t?(t.current=e=e(),function(){t.current=null}):void 0}function iJ(e,t,n){return n=null!=n?n.concat([e]):null,i$(4,4,iY.bind(null,t,e),n)}function iX(){}function iZ(e,t){var n=iP();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&iE(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function i0(e,t){var n=iP();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&iE(t,r[1])?r[0]:(n.memoizedState=[e=e(),t],e)}function i1(e,t,n){return 0==(21&iy)?(e.baseState&&(e.baseState=!1,aw=!0),e.memoizedState=n):(nW(n,t)||(n=tC(),iv.lanes|=n,sp|=n,e.baseState=!0),t)}function i2(e,t){var n=tS;tS=0!==n&&4>n?n:4,e(!0);var r=im.transition;im.transition={};try{e(!1),t()}finally{tS=n,im.transition=r}}function i3(){return iP().memoizedState}function i4(e,t,n){var r=sx(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},i8(e)?i5(t,n):null!==(n=oZ(e,t,n,r))&&(sL(n,e,r,sM()),i9(n,t,r))}function i6(e,t,n){var r=sx(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(i8(e))i5(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,nW(s,a)){var l=t.interleaved;null===l?(o.next=o,oX(t)):(o.next=l.next,l.next=o),t.interleaved=o;return}}catch(e){}finally{}null!==(n=oZ(e,t,o,r))&&(sL(n,e,r,o=sM()),i9(n,t,r))}}function i8(e){var t=e.alternate;return e===iv||null!==t&&t===iv}function i5(e,t){ik=iT=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function i9(e,t,n){if(0!=(4194240&n)){var r=t.lanes;r&=e.pendingLanes,t.lanes=n|=r,tk(e,n)}}var i7={readContext:oY,useCallback:iI,useContext:iI,useEffect:iI,useImperativeHandle:iI,useInsertionEffect:iI,useLayoutEffect:iI,useMemo:iI,useReducer:iI,useRef:iI,useState:iI,useDebugValue:iI,useDeferredValue:iI,useTransition:iI,useMutableSource:iI,useSyncExternalStore:iI,useId:iI,unstable_isNewReconciler:!1},ae={readContext:oY,useCallback:function(e,t){return iR().memoizedState=[e,void 0===t?null:t],e},useContext:oY,useEffect:ij,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,iG(4194308,4,iY.bind(null,t,e),n)},useLayoutEffect:function(e,t){return iG(4194308,4,e,t)},useInsertionEffect:function(e,t){return iG(4,2,e,t)},useMemo:function(e,t){return t=void 0===t?null:t,iR().memoizedState=[e=e(),t],e},useReducer:function(e,t,n){var r=iR();return r.memoizedState=r.baseState=t=void 0!==n?n(t):t,r.queue=e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=i4.bind(null,iv,e),[r.memoizedState,e]},useRef:function(e){return iR().memoizedState=e={current:e}},useState:iB,useDebugValue:iX,useDeferredValue:function(e){return iR().memoizedState=e},useTransition:function(){var e=iB(!1),t=e[0];return e=i2.bind(null,e[1]),iR().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=iv,o=iR();if(ob){if(void 0===n)throw Error(h(407));n=n()}else{if(n=t(),null===sl)throw Error(h(349));0!=(30&iy)||iq(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,ij(iD.bind(null,r,i,e),[e]),r.flags|=2048,iz(9,iU.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=iR(),t=sl.identifierPrefix;if(ob){var n=oy,r=om;t=":"+t+"R"+(n=(r&~(1<<32-td(r)-1)).toString(32)+n),0<(n=iS++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ib++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},at={readContext:oY,useCallback:iZ,useContext:oY,useEffect:iV,useImperativeHandle:iJ,useInsertionEffect:iQ,useLayoutEffect:iW,useMemo:i0,useReducer:iO,useRef:iK,useState:function(){return iO(iN)},useDebugValue:iX,useDeferredValue:function(e){return i1(iP(),iC.memoizedState,e)},useTransition:function(){return[iO(iN)[0],iP().memoizedState]},useMutableSource:ix,useSyncExternalStore:iL,useId:i3,unstable_isNewReconciler:!1},an={readContext:oY,useCallback:iZ,useContext:oY,useEffect:iV,useImperativeHandle:iJ,useInsertionEffect:iQ,useLayoutEffect:iW,useMemo:i0,useReducer:iM,useRef:iK,useState:function(){return iM(iN)},useDebugValue:iX,useDeferredValue:function(e){var t=iP();return null===iC?t.memoizedState=e:i1(t,iC.memoizedState,e)},useTransition:function(){return[iM(iN)[0],iP().memoizedState]},useMutableSource:ix,useSyncExternalStore:iL,useId:i3,unstable_isNewReconciler:!1};function ar(e,t){if(e&&e.defaultProps)for(var n in t=en({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}function ao(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:en({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ai={isMounted:function(e){return!!(e=e._reactInternals)&&e4(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=sM(),o=sx(e),i=o4(r,o);i.payload=t,null!=n&&(i.callback=n),null!==(t=o6(e,i,o))&&(sL(t,e,o,r),o8(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=sM(),o=sx(e),i=o4(r,o);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=o6(e,i,o))&&(sL(t,e,o,r),o8(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sM(),r=sx(e),o=o4(n,r);o.tag=2,null!=t&&(o.callback=t),null!==(t=o6(e,o,r))&&(sL(t,e,r,n),o8(t,e,r))}};function aa(e,t,n,r,o,i,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||!nY(n,r)||!nY(o,i)}function as(e,t,n){var r=!1,o=r3,i=t.contextType;return"object"==typeof i&&null!==i?i=oY(i):(o=r9(t)?r8:r4.current,i=(r=null!=(r=t.contextTypes))?r5(e,o):r3),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ai,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function al(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ai.enqueueReplaceState(t,t.state,null)}function ac(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},o2(e);var i=t.contextType;"object"==typeof i&&null!==i?o.context=oY(i):o.context=r5(e,i=r9(t)?r8:r4.current),o.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(ao(e,t,i,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&ai.enqueueReplaceState(o,o.state,null),o9(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4194308)}function au(e,t){try{var n="",r=t;do n+=function(e){switch(e.tag){case 5:return er(e.type);case 16:return er("Lazy");case 13:return er("Suspense");case 19:return er("SuspenseList");case 0:case 2:case 15:return e=ei(e.type,!1);case 11:return e=ei(e.type.render,!1);case 1:return e=ei(e.type,!0);default:return""}}(r),r=r.return;while(r)var o=n}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o,digest:null}}function ad(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ah(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var ag="function"==typeof WeakMap?WeakMap:Map;function af(e,t,n){(n=o4(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){sS||(sS=!0,sb=r),ah(e,t)},n}function ap(e,t,n){(n=o4(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ah(e,t)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){ah(e,t),"function"!=typeof r&&(null===sI?sI=new Set([this]):sI.add(this));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}function am(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ag;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=s2.bind(null,e,t,n),t.then(e,e))}function ay(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e)return null}function av(e,t,n,r,o){return 0==(1&e.mode)?e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=o4(-1,1)).tag=2,o6(n,t,1))),n.lanes|=1):(e.flags|=65536,e.lanes=o),e}var aC=A.ReactCurrentOwner,aw=!1;function aT(e,t,n,r){t.child=null===e?oB(t,null,n,r):oF(t,e.child,n,r)}function ak(e,t,n,r,o){n=n.render;var i=t.ref;return(oW(t,o),r=iA(e,t,n,r,i,o),n=i_(),null===e||aw)?(ob&&n&&ow(t),t.flags|=1,aT(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,aB(e,t,o))}function aS(e,t,n,r,o){if(null===e){var i=n.type;return"function"!=typeof i||s9(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=le(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ab(e,t,i,r,o))}if(i=e.child,0==(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:nY)(a,r)&&e.ref===t.ref)return aB(e,t,o)}return t.flags|=1,(e=s7(i,r)).ref=t.ref,e.return=t,t.child=e}function ab(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(nY(i,r)&&e.ref===t.ref){if(aw=!1,t.pendingProps=r=i,0==(e.lanes&o))return t.lanes=e.lanes,aB(e,t,o);0!=(131072&e.flags)&&(aw=!0)}}return aA(e,t,n,r,o)}function aI(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r2(sh,sd),sd|=n;else{if(0==(0x40000000&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=0x40000000,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,r2(sh,sd),sd|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,r2(sh,sd),sd|=r}}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,r2(sh,sd),sd|=r;return aT(e,t,o,n),t.child}function aE(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function aA(e,t,n,r,o){var i=r9(n)?r8:r4.current;return(i=r5(t,i),oW(t,o),n=iA(e,t,n,r,i,o),r=i_(),null===e||aw)?(ob&&r&&ow(t),t.flags|=1,aT(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,aB(e,t,o))}function a_(e,t,n,r,o){if(r9(n)){var i=!0;on(t)}else i=!1;if(oW(t,o),null===t.stateNode)aF(e,t),as(t,n,r),ac(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;c="object"==typeof c&&null!==c?oY(c):r5(t,c=r9(n)?r8:r4.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==c)&&al(t,a,r,c),o1=!1;var h=t.memoizedState;a.state=h,o9(t,r,a,o),l=t.memoizedState,s!==r||h!==l||r6.current||o1?("function"==typeof u&&(ao(t,n,u,r),l=t.memoizedState),(s=o1||aa(t,n,s,r,h,l,c))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,o3(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ar(t.type,s),a.props=c,d=t.pendingProps,h=a.context,l="object"==typeof(l=n.contextType)&&null!==l?oY(l):r5(t,l=r9(n)?r8:r4.current);var g=n.getDerivedStateFromProps;(u="function"==typeof g||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==d||h!==l)&&al(t,a,r,l),o1=!1,h=t.memoizedState,a.state=h,o9(t,r,a,o);var f=t.memoizedState;s!==d||h!==f||r6.current||o1?("function"==typeof g&&(ao(t,n,g,r),f=t.memoizedState),(c=o1||aa(t,n,c,r,h,f,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return aR(e,t,n,r,i,o)}function aR(e,t,n,r,o,i){aE(e,t);var a=0!=(128&t.flags);if(!r&&!a)return o&&or(t,n,!1),aB(e,t,i);r=t.stateNode,aC.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=oF(t,e.child,null,i),t.child=oF(t,null,s,i)):aT(e,t,s,i),t.memoizedState=r.state,o&&or(t,n,!0),t.child}function aP(e){var t=e.stateNode;t.pendingContext?oe(e,t.pendingContext,t.pendingContext!==t.context):t.context&&oe(e,t.context,!1),ia(e,t.containerInfo)}function aN(e,t,n,r,o){return oM(),ox(o),t.flags|=256,aT(e,t,n,r),t.child}var aO={dehydrated:null,treeContext:null,retryLane:0};function aM(e){return{baseLanes:e,cachePool:null,transitions:null}}function ax(e,t,n){var r,o=t.pendingProps,i=iu.current,a=!1,s=0!=(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!=(2&i)),r?(a=!0,t.flags&=-129):(null===e||null!==e.memoizedState)&&(i|=1),r2(iu,1&i),null===e)return(oR(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated))?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=0x40000000,null):(s=o.children,e=o.fallback,a?(o=t.mode,a=t.child,s={mode:"hidden",children:s},0==(1&o)&&null!==a?(a.childLanes=0,a.pendingProps=s):a=ln(s,o,0,null),e=lt(e,o,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=aM(n),t.memoizedState=aO,e):aL(t,s));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,o,i,a){if(n)return 256&t.flags?(t.flags&=-257,aq(e,t,a,r=ad(Error(h(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=ln({mode:"visible",children:r.children},o,0,null),i=lt(i,o,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!=(1&t.mode)&&oF(t,e.child,null,a),t.child.memoizedState=aM(a),t.memoizedState=aO,i);if(0==(1&t.mode))return aq(e,t,a,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var s=r.dgst;return r=s,aq(e,t,a,r=ad(i=Error(h(419)),r,void 0))}if(s=0!=(a&e.childLanes),aw||s){if(null!==(r=sl)){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:o=32;break;case 0x20000000:o=0x10000000;break;default:o=0}0!==(o=0!=(o&(r.suspendedLanes|a))?0:o)&&o!==i.retryLane&&(i.retryLane=o,o0(e,o),sL(r,e,o,-1))}return sQ(),aq(e,t,a,r=ad(Error(h(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=s4.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,oS=rH(o.nextSibling),ok=t,ob=!0,oI=null,null!==e&&(og[of++]=om,og[of++]=oy,og[of++]=op,om=e.id,oy=e.overflow,op=t),t=aL(t,r.children),t.flags|=4096,t)}(e,t,s,o,r,i,n);if(a){a=o.fallback,s=t.mode,r=(i=e.child).sibling;var l={mode:"hidden",children:o.children};return 0==(1&s)&&t.child!==i?((o=t.child).childLanes=0,o.pendingProps=l,t.deletions=null):(o=s7(i,l)).subtreeFlags=0xe00000&i.subtreeFlags,null!==r?a=s7(r,a):(a=lt(a,s,n,null),a.flags|=2),a.return=t,o.return=t,o.sibling=a,t.child=o,o=a,a=t.child,s=null===(s=e.child.memoizedState)?aM(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~n,t.memoizedState=aO,o}return e=(a=e.child).sibling,o=s7(a,{mode:"visible",children:o.children}),0==(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function aL(e,t){return(t=ln({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function aq(e,t,n,r){return null!==r&&ox(r),oF(t,e.child,null,n),e=aL(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function aU(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),oQ(e.return,t,n)}function aD(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function aH(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(aT(e,t,r.children,n),0!=(2&(r=iu.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&aU(e,n,t);else if(19===e.tag)aU(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(r2(iu,r),0==(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(o=null,n=t.child;null!==n;)null!==(e=n.alternate)&&null===id(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),aD(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===id(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}aD(t,!0,n,null,i);break;case"together":aD(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function aF(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function aB(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),sp|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(h(153));if(null!==t.child){for(n=s7(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=s7(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function az(e,t){if(!ob)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function aK(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=0xe00000&o.subtreeFlags,r|=0xe00000&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}o=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},i=function(){},a=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ii(it.current);var i,a=null;switch(n){case"input":o=ed(e,o),r=ed(e,r),a=[];break;case"select":o=en({},o,{value:void 0}),r=en({},r,{value:void 0}),a=[];break;case"textarea":o=eC(e,o),r=eC(e,r),a=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=rR)}for(c in ex(n,r),n=null,o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&null!=o[c]){if("style"===c){var s=o[c];for(i in s)s.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(f.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null))}for(c in r){var l=r[c];if(s=null!=o?o[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(null!=l||null!=s)){if("style"===c){if(s){for(i in s)!s.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&s[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(a||(a=[]),a.push(c,n)),n=l}else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(f.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&rp("scroll",e),a||s===l||(a=[])):(a=a||[]).push(c,l))}}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},s=function(e,t,n,r){n!==r&&(t.flags|=4)};var aG=!1,a$=!1,aj="function"==typeof WeakSet?WeakSet:Set,aV=null;function aQ(e,t){var n=e.ref;if(null!==n){if("function"==typeof n)try{n(null)}catch(n){s1(e,t,n)}else n.current=null}}function aW(e,t,n){try{n()}catch(n){s1(e,t,n)}}var aY=!1;function aJ(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&aW(t,n,i)}o=o.next}while(o!==r)}}function aX(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function aZ(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function a0(e){return 5===e.tag||3===e.tag||4===e.tag}function a1(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||a0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags||null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}var a2=null,a3=!1;function a4(e,t,n){for(n=n.child;null!==n;)a6(e,t,n),n=n.sibling}function a6(e,t,n){if(tu&&"function"==typeof tu.onCommitFiberUnmount)try{tu.onCommitFiberUnmount(tc,n)}catch(e){}switch(n.tag){case 5:a$||aQ(n,t);case 6:var r=a2,o=a3;a2=null,a4(e,t,n),a2=r,a3=o,null!==a2&&(a3?(e=a2,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):a2.removeChild(n.stateNode));break;case 18:null!==a2&&(a3?(e=a2,n=n.stateNode,8===e.nodeType?rD(e.parentNode,n):1===e.nodeType&&rD(e,n),tj(e)):rD(a2,n.stateNode));break;case 4:r=a2,o=a3,a2=n.stateNode.containerInfo,a3=!0,a4(e,t,n),a2=r,a3=o;break;case 0:case 11:case 14:case 15:if(!a$&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!=(2&i)?aW(n,t,a):0!=(4&i)&&aW(n,t,a)),o=o.next}while(o!==r)}a4(e,t,n);break;case 1:if(!a$&&(aQ(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){s1(n,t,e)}a4(e,t,n);break;case 21:default:a4(e,t,n);break;case 22:1&n.mode?(a$=(r=a$)||null!==n.memoizedState,a4(e,t,n),a$=r):a4(e,t,n)}}function a8(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new aj),t.forEach(function(t){var r=s6.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function a5(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var i=t,a=i;e:for(;null!==a;){switch(a.tag){case 5:a2=a.stateNode,a3=!1;break e;case 3:case 4:a2=a.stateNode.containerInfo,a3=!0;break e}a=a.return}if(null===a2)throw Error(h(160));a6(e,i,o),a2=null,a3=!1;var s=o.alternate;null!==s&&(s.return=null),o.return=null}catch(e){s1(o,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)a9(t,e),t=t.sibling}function a9(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(a5(t,e),a7(e),4&r){try{aJ(3,e,e.return),aX(3,e)}catch(t){s1(e,e.return,t)}try{aJ(5,e,e.return)}catch(t){s1(e,e.return,t)}}break;case 1:a5(t,e),a7(e),512&r&&null!==n&&aQ(n,n.return);break;case 5:if(a5(t,e),a7(e),512&r&&null!==n&&aQ(n,n.return),32&e.flags){var o=e.stateNode;try{e_(o,"")}catch(t){s1(e,e.return,t)}}if(4&r&&null!=(o=e.stateNode)){var i=e.memoizedProps,a=null!==n?n.memoizedProps:i,s=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===s&&"radio"===i.type&&null!=i.name&&eg(o,i),eL(s,a);var c=eL(s,i);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];"style"===u?eO(o,d):"dangerouslySetInnerHTML"===u?eA(o,d):"children"===u?e_(o,d):E(o,u,d,c)}switch(s){case"input":ef(o,i);break;case"textarea":eT(o,i);break;case"select":var g=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var f=i.value;null!=f?ev(o,!!i.multiple,f,!1):!!i.multiple!==g&&(null!=i.defaultValue?ev(o,!!i.multiple,i.defaultValue,!0):ev(o,!!i.multiple,i.multiple?[]:"",!1))}o[rK]=i}catch(t){s1(e,e.return,t)}}break;case 6:if(a5(t,e),a7(e),4&r){if(null===e.stateNode)throw Error(h(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(t){s1(e,e.return,t)}}break;case 3:if(a5(t,e),a7(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{tj(t.containerInfo)}catch(t){s1(e,e.return,t)}break;case 4:default:a5(t,e),a7(e);break;case 13:a5(t,e),a7(e),8192&(o=e.child).flags&&(i=null!==o.memoizedState,o.stateNode.isHidden=i,i&&(null===o.alternate||null===o.alternate.memoizedState)&&(sw=tn())),4&r&&a8(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(a$=(c=a$)||u,a5(t,e),a$=c):a5(t,e),a7(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&0!=(1&e.mode))for(aV=e,u=e.child;null!==u;){for(d=aV=u;null!==aV;){switch(f=(g=aV).child,g.tag){case 0:case 11:case 14:case 15:aJ(4,g,g.return);break;case 1:aQ(g,g.return);var p=g.stateNode;if("function"==typeof p.componentWillUnmount){r=g,n=g.return;try{p.props=(t=r).memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(e){s1(r,n,e)}}break;case 5:aQ(g,g.return);break;case 22:if(null!==g.memoizedState){st(d);continue}}null!==f?(f.return=g,aV=f):st(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{o=d.stateNode,c?(i=o.style,"function"==typeof i.setProperty?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,a=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,s.style.display=eN("display",a))}catch(t){s1(e,e.return,t)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(t){s1(e,e.return,t)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:a5(t,e),a7(e),4&r&&a8(e);case 21:}}function a7(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(a0(n)){var r=n;break e}n=n.return}throw Error(h(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(e_(o,""),r.flags&=-33);var i=a1(e);!function e(t,n,r){var o=t.tag;if(5===o||6===o)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==o&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,i,o);break;case 3:case 4:var a=r.stateNode.containerInfo,s=a1(e);!function e(t,n,r){var o=t.tag;if(5===o||6===o)t=t.stateNode,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!=(r=r._reactRootContainer)||null!==n.onclick||(n.onclick=rR));else if(4!==o&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,s,a);break;default:throw Error(h(161))}}catch(t){s1(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function se(e){for(;null!==aV;){var t=aV;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:a$||aX(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!a$){if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ar(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}}var i=t.updateQueue;null!==i&&o7(t,i,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}o7(t,a,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&tj(d)}}}break;default:throw Error(h(163))}a$||512&t.flags&&aZ(t)}catch(e){s1(t,t.return,e)}}if(t===e){aV=null;break}if(null!==(n=t.sibling)){n.return=t.return,aV=n;break}aV=t.return}}function st(e){for(;null!==aV;){var t=aV;if(t===e){aV=null;break}var n=t.sibling;if(null!==n){n.return=t.return,aV=n;break}aV=t.return}}function sn(e){for(;null!==aV;){var t=aV;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{aX(4,t)}catch(e){s1(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(e){s1(t,o,e)}}var i=t.return;try{aZ(t)}catch(e){s1(t,i,e)}break;case 5:var a=t.return;try{aZ(t)}catch(e){s1(t,a,e)}}}catch(e){s1(t,t.return,e)}if(t===e){aV=null;break}var s=t.sibling;if(null!==s){s.return=t.return,aV=s;break}aV=t.return}}var sr=Math.ceil,so=A.ReactCurrentDispatcher,si=A.ReactCurrentOwner,sa=A.ReactCurrentBatchConfig,ss=0,sl=null,sc=null,su=0,sd=0,sh=r0(0),sg=0,sf=null,sp=0,sm=0,sy=0,sv=null,sC=null,sw=0,sT=1/0,sk=null,sS=!1,sb=null,sI=null,sE=!1,sA=null,s_=0,sR=0,sP=null,sN=-1,sO=0;function sM(){return 0!=(6&ss)?tn():-1!==sN?sN:sN=tn()}function sx(e){return 0==(1&e.mode)?1:0!=(2&ss)&&0!==su?su&-su:null!==oL.transition?(0===sO&&(sO=tC()),sO):0!==(e=tS)?e:e=void 0===(e=window.event)?16:t0(e.type)}function sL(e,t,n,r){if(50<sR)throw sR=0,sP=null,Error(h(185));tT(e,n,r),(0==(2&ss)||e!==sl)&&(e===sl&&(0==(2&ss)&&(sm|=n),4===sg&&sF(e,su)),sq(e,r),1===n&&0===ss&&0==(1&t.mode)&&(sT=tn()+500,oi&&ol()))}function sq(e,t){var n,r=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-td(i),s=1<<a,l=o[a];-1===l?(0==(s&n)||0!=(s&r))&&(o[a]=function(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var o=ty(e,e===sl?su:0);if(0===o)null!==r&&e7(r),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(null!=r&&e7(r),1===t)0===e.tag?(n=sB.bind(null,e),oi=!0,os(n)):os(sB.bind(null,e)),rq(function(){0==(6&ss)&&ol()}),r=null;else{switch(tb(o)){case 1:r=to;break;case 4:r=ti;break;case 16:default:r=ta;break;case 0x20000000:r=tl}r=e9(r,sU.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function sU(e,t){if(sN=-1,sO=0,0!=(6&ss))throw Error(h(327));var n=e.callbackNode;if(sZ()&&e.callbackNode!==n)return null;var r=ty(e,e===sl?su:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=sW(e,r);else{t=r;var o=ss;ss|=2;var i=sV();for((sl!==e||su!==t)&&(sk=null,sT=tn()+500,s$(e,t));;)try{(function(){for(;null!==sc&&!te();)sY(sc)})();break}catch(t){sj(e,t)}oj(),so.current=i,ss=o,null!==sc?t=0:(sl=null,su=0,t=sg)}if(0!==t){if(2===t&&0!==(o=tv(e))&&(r=o,t=sD(e,o)),1===t)throw n=sf,s$(e,0),sF(e,r),sq(e,tn()),n;if(6===t)sF(e,r);else{if(o=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!nW(i(),o))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=sW(e,r))&&0!==(i=tv(e))&&(r=i,t=sD(e,i)),1===t))throw n=sf,s$(e,0),sF(e,r),sq(e,tn()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(h(345));case 2:case 5:sX(e,sC,sk);break;case 3:if(sF(e,r),(0x7c00000&r)===r&&10<(t=sw+500-tn())){if(0!==ty(e,0))break;if(((o=e.suspendedLanes)&r)!==r){sM(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=rM(sX.bind(null,e,sC,sk),t);break}sX(e,sC,sk);break;case 4:if(sF(e,r),(4194240&r)===r)break;for(o=-1,t=e.eventTimes;0<r;){var a=31-td(r);i=1<<a,(a=t[a])>o&&(o=a),r&=~i}if(r=o,10<(r=(120>(r=tn()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sr(r/1960))-r)){e.timeoutHandle=rM(sX.bind(null,e,sC,sk),r);break}sX(e,sC,sk);break;default:throw Error(h(329))}}}return sq(e,tn()),e.callbackNode===n?sU.bind(null,e):null}function sD(e,t){var n=sv;return e.current.memoizedState.isDehydrated&&(s$(e,t).flags|=256),2!==(e=sW(e,t))&&(t=sC,sC=n,null!==t&&sH(t)),e}function sH(e){null===sC?sC=e:sC.push.apply(sC,e)}function sF(e,t){for(t&=~sy,t&=~sm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-td(t),r=1<<n;e[n]=-1,t&=~r}}function sB(e){if(0!=(6&ss))throw Error(h(327));sZ();var t=ty(e,0);if(0==(1&t))return sq(e,tn()),null;var n=sW(e,t);if(0!==e.tag&&2===n){var r=tv(e);0!==r&&(t=r,n=sD(e,r))}if(1===n)throw n=sf,s$(e,0),sF(e,t),sq(e,tn()),n;if(6===n)throw Error(h(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sX(e,sC,sk),sq(e,tn()),null}function sz(e,t){var n=ss;ss|=1;try{return e(t)}finally{0===(ss=n)&&(sT=tn()+500,oi&&ol())}}function sK(e){null!==sA&&0===sA.tag&&0==(6&ss)&&sZ();var t=ss;ss|=1;var n=sa.transition,r=tS;try{if(sa.transition=null,tS=1,e)return e()}finally{tS=r,sa.transition=n,0==(6&(ss=t))&&ol()}}function sG(){sd=sh.current,r1(sh)}function s$(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rx(n)),null!==sc)for(n=sc.return;null!==n;){var r=n;switch(oT(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&r7();break;case 3:is(),r1(r6),r1(r4),ig();break;case 5:ic(r);break;case 4:is();break;case 13:case 19:r1(iu);break;case 10:oV(r.type._context);break;case 22:case 23:sG()}n=n.return}if(sl=e,sc=e=s7(e.current,null),su=sd=t,sg=0,sf=null,sy=sm=sp=0,sC=sv=null,null!==oJ){for(t=0;t<oJ.length;t++)if(null!==(r=(n=oJ[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}oJ=null}return e}function sj(e,t){for(;;){var n=sc;try{if(oj(),ip.current=i7,iT){for(var r=iv.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}iT=!1}if(iy=0,iw=iC=iv=null,ik=!1,iS=0,si.current=null,null===n||null===n.return){sg=1,sf=t,sc=null;break}e:{var i=e,a=n.return,s=n,l=t;if(t=su,s.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=s,d=u.tag;if(0==(1&u.mode)&&(0===d||11===d||15===d)){var g=u.alternate;g?(u.updateQueue=g.updateQueue,u.memoizedState=g.memoizedState,u.lanes=g.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=ay(a);if(null!==f){f.flags&=-257,av(f,a,s,i,t),1&f.mode&&am(i,c,t),t=f,l=c;var p=t.updateQueue;if(null===p){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}if(0==(1&t)){am(i,c,t),sQ();break e}l=Error(h(426))}else if(ob&&1&s.mode){var y=ay(a);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),av(y,a,s,i,t),ox(au(l,s));break e}}i=l=au(l,s),4!==sg&&(sg=2),null===sv?sv=[i]:sv.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=af(i,l,t);o5(i,v);break e;case 1:s=l;var C=i.type,w=i.stateNode;if(0==(128&i.flags)&&("function"==typeof C.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===sI||!sI.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var T=ap(i,s,t);o5(i,T);break e}}i=i.return}while(null!==i)}sJ(n)}catch(e){t=e,sc===n&&null!==n&&(sc=n=n.return);continue}break}}function sV(){var e=so.current;return so.current=i7,null===e?i7:e}function sQ(){(0===sg||3===sg||2===sg)&&(sg=4),null===sl||0==(0xfffffff&sp)&&0==(0xfffffff&sm)||sF(sl,su)}function sW(e,t){var n=ss;ss|=2;var r=sV();for((sl!==e||su!==t)&&(sk=null,s$(e,t));;)try{(function(){for(;null!==sc;)sY(sc)})();break}catch(t){sj(e,t)}if(oj(),ss=n,so.current=r,null!==sc)throw Error(h(261));return sl=null,su=0,sg}function sY(e){var t=l(e.alternate,e,sd);e.memoizedProps=e.pendingProps,null===t?sJ(e):sc=t,si.current=null}function sJ(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=function(e,t,n){var r=t.pendingProps;switch(oT(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return aK(t),null;case 1:case 17:return r9(t.type)&&r7(),aK(t),null;case 3:return r=t.stateNode,is(),r1(r6),r1(r4),ig(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(null===e||null===e.child)&&(oN(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==oI&&(sH(oI),oI=null))),i(e,t),aK(t),null;case 5:ic(t);var l=ii(io.current);if(n=t.type,null!==e&&null!=t.stateNode)a(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(h(166));return aK(t),null}if(e=ii(it.current),oN(t)){r=t.stateNode,n=t.type;var c=t.memoizedProps;switch(r[rz]=t,r[rK]=c,e=0!=(1&t.mode),n){case"dialog":rp("cancel",r),rp("close",r);break;case"iframe":case"object":case"embed":rp("load",r);break;case"video":case"audio":for(l=0;l<rd.length;l++)rp(rd[l],r);break;case"source":rp("error",r);break;case"img":case"image":case"link":rp("error",r),rp("load",r);break;case"details":rp("toggle",r);break;case"input":eh(r,c),rp("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!c.multiple},rp("invalid",r);break;case"textarea":ew(r,c),rp("invalid",r)}for(var u in ex(n,c),l=null,c)if(c.hasOwnProperty(u)){var d=c[u];"children"===u?"string"==typeof d?r.textContent!==d&&(!0!==c.suppressHydrationWarning&&r_(r.textContent,d,e),l=["children",d]):"number"==typeof d&&r.textContent!==""+d&&(!0!==c.suppressHydrationWarning&&r_(r.textContent,d,e),l=["children",""+d]):f.hasOwnProperty(u)&&null!=d&&"onScroll"===u&&rp("scroll",r)}switch(n){case"input":el(r),ep(r,c,!0);break;case"textarea":el(r),ek(r);break;case"select":case"option":break;default:"function"==typeof c.onClick&&(r.onclick=rR)}r=l,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===l.nodeType?l:l.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=eS(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[rz]=t,e[rK]=r,o(e,t,!1,!1),t.stateNode=e;e:{switch(u=eL(n,r),n){case"dialog":rp("cancel",e),rp("close",e),l=r;break;case"iframe":case"object":case"embed":rp("load",e),l=r;break;case"video":case"audio":for(l=0;l<rd.length;l++)rp(rd[l],e);l=r;break;case"source":rp("error",e),l=r;break;case"img":case"image":case"link":rp("error",e),rp("load",e),l=r;break;case"details":rp("toggle",e),l=r;break;case"input":eh(e,r),l=ed(e,r),rp("invalid",e);break;case"option":default:l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=en({},r,{value:void 0}),rp("invalid",e);break;case"textarea":ew(e,r),l=eC(e,r),rp("invalid",e)}for(c in ex(n,l),d=l)if(d.hasOwnProperty(c)){var g=d[c];"style"===c?eO(e,g):"dangerouslySetInnerHTML"===c?null!=(g=g?g.__html:void 0)&&eA(e,g):"children"===c?"string"==typeof g?("textarea"!==n||""!==g)&&e_(e,g):"number"==typeof g&&e_(e,""+g):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(f.hasOwnProperty(c)?null!=g&&"onScroll"===c&&rp("scroll",e):null!=g&&E(e,c,g,u))}switch(n){case"input":el(e),ep(e,r,!1);break;case"textarea":el(e),ek(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ea(r.value));break;case"select":e.multiple=!!r.multiple,null!=(c=r.value)?ev(e,!!r.multiple,c,!1):null!=r.defaultValue&&ev(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof l.onClick&&(e.onclick=rR)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return aK(t),null;case 6:if(e&&null!=t.stateNode)s(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(h(166));if(n=ii(io.current),ii(it.current),oN(t)){if(r=t.stateNode,n=t.memoizedProps,r[rz]=t,(c=r.nodeValue!==n)&&null!==(e=ok))switch(e.tag){case 3:r_(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&r_(r.nodeValue,n,0!=(1&e.mode))}c&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[rz]=t,t.stateNode=r}return aK(t),null;case 13:if(r1(iu),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ob&&null!==oS&&0!=(1&t.mode)&&0==(128&t.flags))oO(),oM(),t.flags|=98560,c=!1;else if(c=oN(t),null!==r&&null!==r.dehydrated){if(null===e){if(!c)throw Error(h(318));if(!(c=null!==(c=t.memoizedState)?c.dehydrated:null))throw Error(h(317));c[rz]=t}else oM(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;aK(t),c=!1}else null!==oI&&(sH(oI),oI=null),c=!0;if(!c)return 65536&t.flags?t:null}if(0!=(128&t.flags))return t.lanes=n,t;return(r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&iu.current)?0===sg&&(sg=3):sQ())),null!==t.updateQueue&&(t.flags|=4),aK(t),null;case 4:return is(),i(e,t),null===e&&rv(t.stateNode.containerInfo),aK(t),null;case 10:return oV(t.type._context),aK(t),null;case 19:if(r1(iu),null===(c=t.memoizedState))return aK(t),null;if(r=0!=(128&t.flags),null===(u=c.rendering)){if(r)az(c,!1);else{if(0!==sg||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=id(e))){for(t.flags|=128,az(c,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)c=n,e=r,c.flags&=0xe00002,null===(u=c.alternate)?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=u.childLanes,c.lanes=u.lanes,c.child=u.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=u.memoizedProps,c.memoizedState=u.memoizedState,c.updateQueue=u.updateQueue,c.type=u.type,e=u.dependencies,c.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return r2(iu,1&iu.current|2),t.child}e=e.sibling}null!==c.tail&&tn()>sT&&(t.flags|=128,r=!0,az(c,!1),t.lanes=4194304)}}else{if(!r){if(null!==(e=id(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),az(c,!0),null===c.tail&&"hidden"===c.tailMode&&!u.alternate&&!ob)return aK(t),null}else 2*tn()-c.renderingStartTime>sT&&0x40000000!==n&&(t.flags|=128,r=!0,az(c,!1),t.lanes=4194304)}c.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=c.last)?n.sibling=u:t.child=u,c.last=u)}if(null!==c.tail)return t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=tn(),t.sibling=null,n=iu.current,r2(iu,r?1&n|2:1&n),t;return aK(t),null;case 22:case 23:return sG(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(0x40000000&sd)&&(aK(t),6&t.subtreeFlags&&(t.flags|=8192)):aK(t),null;case 24:case 25:return null}throw Error(h(156,t.tag))}(n,t,sd))){sc=n;return}}else{if(null!==(n=function(e,t){switch(oT(t),t.tag){case 1:return r9(t.type)&&r7(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return is(),r1(r6),r1(r4),ig(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ic(t),null;case 13:if(r1(iu),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(h(340));oM()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return r1(iu),null;case 4:return is(),null;case 10:return oV(t.type._context),null;case 22:case 23:return sG(),null;default:return null}}(n,t))){n.flags&=32767,sc=n;return}if(null!==e)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{sg=6,sc=null;return}}if(null!==(t=t.sibling)){sc=t;return}sc=t=e}while(null!==t)0===sg&&(sg=5)}function sX(e,t,n){var r=tS,o=sa.transition;try{sa.transition=null,tS=1,function(e,t,n,r){do sZ();while(null!==sA)if(0!=(6&ss))throw Error(h(327));n=e.finishedWork;var o=e.finishedLanes;if(null!==n){if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(h(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-td(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,i),e===sl&&(sc=sl=null,su=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||sE||(sE=!0,function(e,t){e9(e,t)}(ta,function(){return sZ(),null})),i=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||i){i=sa.transition,sa.transition=null;var a,s,l,c=tS;tS=1;var u=ss;ss|=4,si.current=null,function(e,t){if(rP=tQ,n0(e=nZ())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o,i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(e){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,g=e,f=null;t:for(;;){for(;g!==n||0!==i&&3!==g.nodeType||(l=s+i),g!==a||0!==r&&3!==g.nodeType||(c=s+r),3===g.nodeType&&(s+=g.nodeValue.length),null!==(o=g.firstChild);)f=g,g=o;for(;;){if(g===e)break t;if(f===n&&++u===i&&(l=s),f===a&&++d===r&&(c=s),null!==(o=g.nextSibling))break;f=(g=f).parentNode}g=o}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rN={focusedElem:e,selectionRange:n},tQ=!1,aV=t;null!==aV;)if(e=(t=aV).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,aV=e;else for(;null!==aV;){t=aV;try{var p=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,y=p.memoizedState,v=t.stateNode,C=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:ar(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(h(163))}}catch(e){s1(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,aV=e;break}aV=t.return}p=aY,aY=!1}(e,n),a9(n,e),function(e){var t=nZ(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!!t&&!!n&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&n0(n)){if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=nX(n,i);var a=nX(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}(rN),tQ=!!rP,rN=rP=null,e.current=n,a=n,s=e,l=o,aV=a,function e(t,n,r){for(var o=0!=(1&t.mode);null!==aV;){var i=aV,a=i.child;if(22===i.tag&&o){var s=null!==i.memoizedState||aG;if(!s){var l=i.alternate,c=null!==l&&null!==l.memoizedState||a$;l=aG;var u=a$;if(aG=s,(a$=c)&&!u)for(aV=i;null!==aV;)c=(s=aV).child,22===s.tag&&null!==s.memoizedState?sn(i):null!==c?(c.return=s,aV=c):sn(i);for(;null!==a;)aV=a,e(a,n,r),a=a.sibling;aV=i,aG=l,a$=u}se(t,n,r)}else 0!=(8772&i.subtreeFlags)&&null!==a?(a.return=i,aV=a):se(t,n,r)}}(a,s,l),tt(),ss=u,tS=c,sa.transition=i}else e.current=n;if(sE&&(sE=!1,sA=e,s_=o),0===(i=e.pendingLanes)&&(sI=null),function(e){if(tu&&"function"==typeof tu.onCommitFiberRoot)try{tu.onCommitFiberRoot(tc,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode,r),sq(e,tn()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((o=t[n]).value,{componentStack:o.stack,digest:o.digest});if(sS)throw sS=!1,e=sb,sb=null,e;0!=(1&s_)&&0!==e.tag&&sZ(),0!=(1&(i=e.pendingLanes))?e===sP?sR++:(sR=0,sP=e):sR=0,ol()}}(e,t,n,r)}finally{sa.transition=o,tS=r}return null}function sZ(){if(null!==sA){var e=tb(s_),t=sa.transition,n=tS;try{if(sa.transition=null,tS=16>e?16:e,null===sA)var r=!1;else{if(e=sA,sA=null,s_=0,0!=(6&ss))throw Error(h(331));var o=ss;for(ss|=4,aV=e.current;null!==aV;){var i=aV,a=i.child;if(0!=(16&aV.flags)){var s=i.deletions;if(null!==s){for(var l=0;l<s.length;l++){var c=s[l];for(aV=c;null!==aV;){var u=aV;switch(u.tag){case 0:case 11:case 15:aJ(8,u,i)}var d=u.child;if(null!==d)d.return=u,aV=d;else for(;null!==aV;){var g=(u=aV).sibling,f=u.return;if(function e(t){var n=t.alternate;null!==n&&(t.alternate=null,e(n)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(n=t.stateNode)&&(delete n[rz],delete n[rK],delete n[r$],delete n[rj],delete n[rV]),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(u),u===c){aV=null;break}if(null!==g){g.return=f,aV=g;break}aV=f}}}var p=i.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}aV=i}}if(0!=(2064&i.subtreeFlags)&&null!==a)a.return=i,aV=a;else for(;null!==aV;){if(i=aV,0!=(2048&i.flags))switch(i.tag){case 0:case 11:case 15:aJ(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,aV=v;break}aV=i.return}}var C=e.current;for(aV=C;null!==aV;){var w=(a=aV).child;if(0!=(2064&a.subtreeFlags)&&null!==w)w.return=a,aV=w;else for(a=C;null!==aV;){if(s=aV,0!=(2048&s.flags))try{switch(s.tag){case 0:case 11:case 15:aX(9,s)}}catch(e){s1(s,s.return,e)}if(s===a){aV=null;break}var T=s.sibling;if(null!==T){T.return=s.return,aV=T;break}aV=s.return}}if(ss=o,ol(),tu&&"function"==typeof tu.onPostCommitFiberRoot)try{tu.onPostCommitFiberRoot(tc,e)}catch(e){}r=!0}return r}finally{tS=n,sa.transition=t}}return!1}function s0(e,t,n){t=af(e,t=au(n,t),1),e=o6(e,t,1),t=sM(),null!==e&&(tT(e,1,t),sq(e,t))}function s1(e,t,n){if(3===e.tag)s0(e,e,n);else for(;null!==t;){if(3===t.tag){s0(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===sI||!sI.has(r))){e=ap(t,e=au(n,e),1),t=o6(t,e,1),e=sM(),null!==t&&(tT(t,1,e),sq(t,e));break}}t=t.return}}function s2(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=sM(),e.pingedLanes|=e.suspendedLanes&n,sl===e&&(su&n)===n&&(4===sg||3===sg&&(0x7c00000&su)===su&&500>tn()-sw?s$(e,0):sy|=n),sq(e,t)}function s3(e,t){0===t&&(0==(1&e.mode)?t=1:(t=tp,0==(0x7c00000&(tp<<=1))&&(tp=4194304)));var n=sM();null!==(e=o0(e,t))&&(tT(e,t,n),sq(e,n))}function s4(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),s3(e,n)}function s6(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(h(314))}null!==r&&r.delete(t),s3(e,n)}function s8(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function s5(e,t,n,r){return new s8(e,t,n,r)}function s9(e){return!(!(e=e.prototype)||!e.isReactComponent)}function s7(e,t){var n=e.alternate;return null===n?((n=s5(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=0xe00000&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function le(e,t,n,r,o,i){var a=2;if(r=e,"function"==typeof e)s9(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case P:return lt(n.children,o,i,t);case N:a=8,o|=8;break;case O:return(e=s5(12,n,t,2|o)).elementType=O,e.lanes=i,e;case q:return(e=s5(13,n,t,o)).elementType=q,e.lanes=i,e;case U:return(e=s5(19,n,t,o)).elementType=U,e.lanes=i,e;case F:return ln(n,o,i,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case M:a=10;break e;case x:a=9;break e;case L:a=11;break e;case D:a=14;break e;case H:a=16,r=null;break e}throw Error(h(130,null==e?e:typeof e,""))}return(t=s5(a,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function lt(e,t,n,r){return(e=s5(7,e,r,t)).lanes=n,e}function ln(e,t,n,r){return(e=s5(22,e,r,t)).elementType=F,e.lanes=n,e.stateNode={isHidden:!1},e}function lr(e,t,n){return(e=s5(6,e,null,t)).lanes=n,e}function lo(e,t,n){return(t=s5(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function li(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tw(0),this.expirationTimes=tw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tw(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function la(e,t,n,r,o,i,a,s,l){return e=new li(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=s5(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},o2(i),e}function ls(e){if(!e)return r3;e=e._reactInternals;e:{if(e4(e)!==e||1!==e.tag)throw Error(h(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(r9(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t)throw Error(h(171))}if(1===e.tag){var n=e.type;if(r9(n))return ot(e,n,t)}return t}function ll(e,t,n,r,o,i,a,s,l){return(e=la(n,r,!0,e,o,i,a,s,l)).context=ls(null),n=e.current,(i=o4(r=sM(),o=sx(n))).callback=null!=t?t:null,o6(n,i,o),e.current.lanes=o,tT(e,o,r),sq(e,r),e}function lc(e,t,n,r){var o=t.current,i=sM(),a=sx(o);return n=ls(n),null===t.context?t.context=n:t.pendingContext=n,(t=o4(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=o6(o,t,a))&&(sL(e,o,a,i),o8(e,o,a)),a}function lu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ld(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function lh(e,t){ld(e,t),(e=e.alternate)&&ld(e,t)}l=function(e,t,n){if(null!==e){if(e.memoizedProps!==t.pendingProps||r6.current)aw=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return aw=!1,function(e,t,n){switch(t.tag){case 3:aP(t),oM();break;case 5:il(t);break;case 1:r9(t.type)&&on(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;r2(oz,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState)){if(null!==r.dehydrated)return r2(iu,1&iu.current),t.flags|=128,null;if(0!=(n&t.child.childLanes))return ax(e,t,n);return r2(iu,1&iu.current),null!==(e=aB(e,t,n))?e.sibling:null}r2(iu,1&iu.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return aH(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),r2(iu,iu.current),!r)return null;break;case 22:case 23:return t.lanes=0,aI(e,t,n)}return aB(e,t,n)}(e,t,n);aw=0!=(131072&e.flags)}}else aw=!1,ob&&0!=(1048576&t.flags)&&oC(t,oh,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;aF(e,t),e=t.pendingProps;var o=r5(t,r4.current);oW(t,n),o=iA(null,t,r,e,o,n);var i=i_();return t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,r9(r)?(i=!0,on(t)):i=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o2(t),o.updater=ai,t.stateNode=o,o._reactInternals=t,ac(t,r,e,n),t=aR(null,t,r,!0,i,n)):(t.tag=0,ob&&i&&ow(t),aT(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(aF(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"==typeof e)return+!!s9(e);if(null!=e){if((e=e.$$typeof)===L)return 11;if(e===D)return 14}return 2}(r),e=ar(r,e),o){case 0:t=aA(null,t,r,e,n);break e;case 1:t=a_(null,t,r,e,n);break e;case 11:t=ak(null,t,r,e,n);break e;case 14:t=aS(null,t,r,ar(r.type,e),n);break e}throw Error(h(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ar(r,o),aA(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ar(r,o),a_(e,t,r,o,n);case 3:e:{if(aP(t),null===e)throw Error(h(387));r=t.pendingProps,o=(i=t.memoizedState).element,o3(e,t),o9(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){o=au(Error(h(423)),t),t=aN(e,t,r,n,o);break e}if(r!==o){o=au(Error(h(424)),t),t=aN(e,t,r,n,o);break e}for(oS=rH(t.stateNode.containerInfo.firstChild),ok=t,ob=!0,oI=null,n=oB(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(oM(),r===o){t=aB(e,t,n);break e}aT(e,t,r,n)}t=t.child}return t;case 5:return il(t),null===e&&oR(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,a=o.children,rO(r,o)?a=null:null!==i&&rO(r,i)&&(t.flags|=32),aE(e,t),aT(e,t,a,n),t.child;case 6:return null===e&&oR(t),null;case 13:return ax(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=oF(t,null,r,n):aT(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ar(r,o),ak(e,t,r,o,n);case 7:return aT(e,t,t.pendingProps,n),t.child;case 8:case 12:return aT(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,a=o.value,r2(oz,r._currentValue),r._currentValue=a,null!==i){if(nW(i.value,a)){if(i.children===o.children&&!r6.current){t=aB(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var s=i.dependencies;if(null!==s){a=i.child;for(var l=s.firstContext;null!==l;){if(l.context===r){if(1===i.tag){(l=o4(-1,n&-n)).tag=2;var c=i.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),oQ(i.return,n,t),s.lanes|=n;break}l=l.next}}else if(10===i.tag)a=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(a=i.return))throw Error(h(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),oQ(a,n,t),a=i.sibling}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===t){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}aT(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,oW(t,n),r=r(o=oY(o)),t.flags|=1,aT(e,t,r,n),t.child;case 14:return o=ar(r=t.type,t.pendingProps),o=ar(r.type,o),aS(e,t,r,o,n);case 15:return ab(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ar(r,o),aF(e,t),t.tag=1,r9(r)?(e=!0,on(t)):e=!1,oW(t,n),as(t,r,o),ac(t,r,o,n),aR(null,t,r,!0,e,n);case 19:return aH(e,t,n);case 22:return aI(e,t,n)}throw Error(h(156,t.tag))};var lg="function"==typeof reportError?reportError:function(e){console.error(e)};function lf(e){this._internalRoot=e}function lp(e){this._internalRoot=e}function lm(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function ly(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function lv(){}function lC(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"==typeof o){var s=o;o=function(){var e=lu(a);s.call(e)}}lc(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"==typeof r){var i=r;r=function(){var e=lu(a);i.call(e)}}var a=ll(t,r,e,0,null,!1,!1,"",lv);return e._reactRootContainer=a,e[rG]=a.current,rv(8===e.nodeType?e.parentNode:e),sK(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"==typeof r){var s=r;r=function(){var e=lu(l);s.call(e)}}var l=la(e,0,!1,null,null,!1,!1,"",lv);return e._reactRootContainer=l,e[rG]=l.current,rv(8===e.nodeType?e.parentNode:e),sK(function(){lc(t,l,n,r)}),l}(n,t,e,o,r);return lu(a)}lp.prototype.render=lf.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(h(409));lc(e,t,null,null)},lp.prototype.unmount=lf.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;sK(function(){lc(null,e,null,null)}),t[rG]=null}},lp.prototype.unstable_scheduleHydration=function(e){if(e){var t=t_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<tU.length&&0!==t&&t<tU[n].priority;n++);tU.splice(n,0,e),0===n&&tB(e)}},tI=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=tm(t.pendingLanes);0!==n&&(tk(t,1|n),sq(t,tn()),0==(6&ss)&&(sT=tn()+500,ol()))}break;case 13:sK(function(){var t=o0(e,1);null!==t&&sL(t,e,1,sM())}),lh(e,1)}},tE=function(e){if(13===e.tag){var t=o0(e,0x8000000);null!==t&&sL(t,e,0x8000000,sM()),lh(e,0x8000000)}},tA=function(e){if(13===e.tag){var t=sx(e),n=o0(e,t);null!==n&&sL(n,e,t,sM()),lh(e,t)}},t_=function(){return tS},tR=function(e,t){var n=tS;try{return tS=e,t()}finally{tS=n}},eD=function(e,t,n){switch(t){case"input":if(ef(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=rJ(r);if(!o)throw Error(h(90));ec(r),ef(r,o)}}}break;case"textarea":eT(e,n);break;case"select":null!=(t=n.value)&&ev(e,!!n.multiple,t,!1)}},eG=sz,e$=sK;var lw={findFiberByHostInstance:rQ,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lT={bundleType:lw.bundleType,version:lw.version,rendererPackageName:lw.rendererPackageName,rendererConfig:lw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=e5(e))?null:e.stateNode},findFiberByHostInstance:lw.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lk.isDisabled&&lk.supportsFiber)try{tc=lk.inject(lT),tu=lk}catch(e){}}K={usingClientEntryPoint:!1,Events:[rW,rY,rJ,ez,eK,sz]},G=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!lm(t))throw Error(h(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:R,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},$=function(e,t){if(!lm(e))throw Error(h(299));var n=!1,r="",o=lg;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=la(e,1,!1,null,null,n,!1,r,o),e[rG]=t.current,rv(8===e.nodeType?e.parentNode:e),new lf(t)},j=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(h(188));throw Error(h(268,e=Object.keys(e).join(",")))}return e=null===(e=e5(t))?null:e.stateNode},V=function(e){return sK(e)},Q=function(e,t,n){if(!ly(t))throw Error(h(200));return lC(null,e,t,!0,n)},W=function(e,t,n){if(!lm(e))throw Error(h(405));var r=null!=n&&n.hydratedSources||null,o=!1,i="",a=lg;if(null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=ll(t,null,e,1,null!=n?n:null,o,!1,i,a),e[rG]=t.current,rv(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new lp(t)},Y=function(e,t,n){if(!ly(t))throw Error(h(200));return lC(null,e,t,!1,n)},J=function(e){if(!ly(e))throw Error(h(40));return!!e._reactRootContainer&&(sK(function(){lC(null,null,e,!1,function(){e._reactRootContainer=null,e[rG]=null})}),!0)},X=sz,Z=function(e,t,n,r){if(!ly(n))throw Error(h(200));if(null==e||void 0===e._reactInternals)throw Error(h(38));return lC(e,t,n,!1,r)},ee="18.3.1-next-f1338f8080-20240426"}),h("fO90s",function(e,t){e.exports=d("gcnCG")}),h("gcnCG",function(t,n){function r(e,t){var n=e.length;for(e.push(t);0<n;){var r=n-1>>>1,o=e[r];if(0<a(o,t))e[r]=t,e[n]=o,n=r;else break}}function o(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;for(var r=0,o=e.length,i=o>>>1;r<i;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<o&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else if(c<o&&0>a(u,n))e[r]=u,e[c]=n,r=c;else break}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e(t.exports,"unstable_now",()=>s,e=>s=e),e(t.exports,"unstable_IdlePriority",()=>l,e=>l=e),e(t.exports,"unstable_ImmediatePriority",()=>c,e=>c=e),e(t.exports,"unstable_LowPriority",()=>u,e=>u=e),e(t.exports,"unstable_NormalPriority",()=>d,e=>d=e),e(t.exports,"unstable_Profiling",()=>h,e=>h=e),e(t.exports,"unstable_UserBlockingPriority",()=>g,e=>g=e),e(t.exports,"unstable_cancelCallback",()=>f,e=>f=e),e(t.exports,"unstable_continueExecution",()=>p,e=>p=e),e(t.exports,"unstable_forceFrameRate",()=>m,e=>m=e),e(t.exports,"unstable_getCurrentPriorityLevel",()=>y,e=>y=e),e(t.exports,"unstable_getFirstCallbackNode",()=>v,e=>v=e),e(t.exports,"unstable_next",()=>C,e=>C=e),e(t.exports,"unstable_pauseExecution",()=>w,e=>w=e),e(t.exports,"unstable_requestPaint",()=>T,e=>T=e),e(t.exports,"unstable_runWithPriority",()=>k,e=>k=e),e(t.exports,"unstable_scheduleCallback",()=>S,e=>S=e),e(t.exports,"unstable_shouldYield",()=>b,e=>b=e),e(t.exports,"unstable_wrapCallback",()=>I,e=>I=e),"object"==typeof performance&&"function"==typeof performance.now){var s,l,c,u,d,h,g,f,p,m,y,v,C,w,T,k,S,b,I,E,A=performance;s=function(){return A.now()}}else{var _=Date,R=_.now();s=function(){return _.now()-R}}var P=[],N=[],O=1,M=null,x=3,L=!1,q=!1,U=!1,D="function"==typeof setTimeout?setTimeout:null,H="function"==typeof clearTimeout?clearTimeout:null,F="undefined"!=typeof setImmediate?setImmediate:null;function B(e){for(var t=o(N);null!==t;){if(null===t.callback)i(N);else if(t.startTime<=e)i(N),t.sortIndex=t.expirationTime,r(P,t);else break;t=o(N)}}function z(e){if(U=!1,B(e),!q){if(null!==o(P))q=!0,Z(K);else{var t=o(N);null!==t&&ee(z,t.startTime-e)}}}function K(e,t){q=!1,U&&(U=!1,H(j),j=-1),L=!0;var n=x;try{for(B(t),M=o(P);null!==M&&(!(M.expirationTime>t)||e&&!W());){var r=M.callback;if("function"==typeof r){M.callback=null,x=M.priorityLevel;var a=r(M.expirationTime<=t);t=s(),"function"==typeof a?M.callback=a:M===o(P)&&i(P),B(t)}else i(P);M=o(P)}if(null!==M)var l=!0;else{var c=o(N);null!==c&&ee(z,c.startTime-t),l=!1}return l}finally{M=null,x=n,L=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var G=!1,$=null,j=-1,V=5,Q=-1;function W(){return!(s()-Q<V)}function Y(){if(null!==$){var e=s();Q=e;var t=!0;try{t=$(!0,e)}finally{t?E():(G=!1,$=null)}}else G=!1}if("function"==typeof F)E=function(){F(Y)};else if("undefined"!=typeof MessageChannel){var J=new MessageChannel,X=J.port2;J.port1.onmessage=Y,E=function(){X.postMessage(null)}}else E=function(){D(Y,0)};function Z(e){$=e,G||(G=!0,E())}function ee(e,t){j=D(function(){e(s())},t)}l=5,c=1,u=4,d=3,h=null,g=2,f=function(e){e.callback=null},p=function(){q||L||(q=!0,Z(K))},m=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<e?Math.floor(1e3/e):5},y=function(){return x},v=function(){return o(P)},C=function(e){switch(x){case 1:case 2:case 3:var t=3;break;default:t=x}var n=x;x=t;try{return e()}finally{x=n}},w=function(){},T=function(){},k=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=x;x=e;try{return t()}finally{x=n}},S=function(e,t,n){var i=s();switch(n="object"==typeof n&&null!==n&&"number"==typeof(n=n.delay)&&0<n?i+n:i,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=0x3fffffff;break;case 4:a=1e4;break;default:a=5e3}return a=n+a,e={id:O++,callback:t,priorityLevel:e,startTime:n,expirationTime:a,sortIndex:-1},n>i?(e.sortIndex=n,r(N,e),null===o(P)&&e===o(N)&&(U?(H(j),j=-1):U=!0,ee(z,n-i))):(e.sortIndex=a,r(P,e),q||L||(q=!0,Z(K))),e},b=W,I=function(e){var t=x;return function(){var n=x;x=t;try{return e.apply(this,arguments)}finally{x=n}}}});var g={};g=d("1b2ls");var f=d("acw62"),p={};e(p,"createRoot",()=>o,e=>o=e),e(p,"hydrateRoot",()=>i,e=>i=e);var m={};!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),o=(m=d("Xw6Mv")).createRoot,i=m.hydrateRoot;var f=(d("acw62"),d("acw62"));const y={SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},v={CLIENT_ERROR_RANGE_START:400,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR_RANGE_START:500,SERVER_ERROR_RANGE_END:599},C=[y.OPENID_SCOPE,y.PROFILE_SCOPE,y.OFFLINE_ACCESS_SCOPE],w=[...C,y.EMAIL_SCOPE],T={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},k="active-account-filters",S={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},b={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},I={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},E={QUERY:"query",FRAGMENT:"fragment"},A={...E,FORM_POST:"form_post"},_={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},R={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},P={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},N="appmetadata",O={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:86400},M={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},x={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},L={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},q={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},U={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},D={httpSuccess:200,httpBadRequest:400},H={FAILED_AUTO_DETECTION:"1",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},F={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},B={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},z={Pop:"pop"},K={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},G={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},$={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},j={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},V={GET:"GET",POST:"POST"},Q={AUTHORITY:"authority",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native"},W={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},Y="wrapper.sku",J="wrapper.version",X={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};(n=a||(a={})).Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none";const Z={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},ee={scopes:C},et="msal.db",en=`${et}.keys`,er={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},eo=[er.Default,er.Skip,er.RefreshTokenAndNetwork];(r=s||(s={}))[r.Error=0]="Error",r[r.Warning=1]="Warning",r[r.Info=2]="Info",r[r.Verbose=3]="Verbose",r[r.Trace=4]="Trace";class ei{constructor(e,t,n){this.level=s.Info;let r=e||ei.createDefaultLoggerOptions();this.localCallback=r.loggerCallback||(()=>{}),this.piiLoggingEnabled=r.piiLoggingEnabled||!1,this.level="number"==typeof r.logLevel?r.logLevel:s.Info,this.correlationId=r.correlationId||y.EMPTY_STRING,this.packageName=t||y.EMPTY_STRING,this.packageVersion=n||y.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:s.Info}}clone(e,t,n){return new ei({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let n=new Date().toUTCString(),r=`[${n}] : [${t.correlationId||this.correlationId||""}]`,o=`${r} : ${this.packageName}@${this.packageVersion} : ${s[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,o,t.containsPii||!1)}executeCallback(e,t,n){this.localCallback&&this.localCallback(e,t,n)}error(e,t){this.logMessage(e,{logLevel:s.Error,containsPii:!1,correlationId:t||y.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:s.Error,containsPii:!0,correlationId:t||y.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:s.Warning,containsPii:!1,correlationId:t||y.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:s.Warning,containsPii:!0,correlationId:t||y.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:s.Info,containsPii:!1,correlationId:t||y.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:s.Info,containsPii:!0,correlationId:t||y.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:s.Verbose,containsPii:!1,correlationId:t||y.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:s.Verbose,containsPii:!0,correlationId:t||y.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:s.Trace,containsPii:!1,correlationId:t||y.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:s.Trace,containsPii:!0,correlationId:t||y.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}var ea={};e(ea,"unexpectedError",()=>es),e(ea,"postRequestFailed",()=>el);const es="unexpected_error",el="post_request_failed",ec={[es]:"Unexpected error in authentication.",[el]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};ec[es],ec[el];class eu extends Error{constructor(e,t,n){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,eu.prototype),this.errorCode=e||y.EMPTY_STRING,this.errorMessage=t||y.EMPTY_STRING,this.subError=n||y.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function ed(e,t){return new eu(e,t?`${ec[e]} ${t}`:ec[e])}const eh="storage_not_supported",eg="stubbed_public_client_application_called",ef="in_mem_redirect_unavailable",ep={[eh]:"Given storage configuration option was not supported.",[eg]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[ef]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};ep[eh],ep[eg],ep[ef];class em extends eu{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,em.prototype)}}function ey(e){return new em(e,ep[e])}const ev={instance:{initialize:()=>Promise.reject(ey(eg)),acquireTokenPopup:()=>Promise.reject(ey(eg)),acquireTokenRedirect:()=>Promise.reject(ey(eg)),acquireTokenSilent:()=>Promise.reject(ey(eg)),acquireTokenByCode:()=>Promise.reject(ey(eg)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(ey(eg)),loginPopup:()=>Promise.reject(ey(eg)),loginRedirect:()=>Promise.reject(ey(eg)),logout:()=>Promise.reject(ey(eg)),logoutRedirect:()=>Promise.reject(ey(eg)),logoutPopup:()=>Promise.reject(ey(eg)),ssoSilent:()=>Promise.reject(ey(eg)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw ey(eg)},getLogger:()=>{throw ey(eg)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw ey(eg)},hydrateCache:()=>Promise.reject(ey(eg)),clearCache:()=>Promise.reject(ey(eg))},inProgress:Z.None,accounts:[],logger:new ei({})},eC=f.createContext(ev);eC.Consumer;var f=d("acw62");const ew={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};class eT{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case ew.LOGIN_START:return Z.Login;case ew.SSO_SILENT_START:return Z.SsoSilent;case ew.ACQUIRE_TOKEN_START:if(e.interactionType===a.Redirect||e.interactionType===a.Popup)return Z.AcquireToken;break;case ew.HANDLE_REDIRECT_START:return Z.HandleRedirect;case ew.LOGOUT_START:return Z.Logout;case ew.SSO_SILENT_SUCCESS:case ew.SSO_SILENT_FAILURE:if(t&&t!==Z.SsoSilent)break;return Z.None;case ew.LOGOUT_END:if(t&&t!==Z.Logout)break;return Z.None;case ew.HANDLE_REDIRECT_END:if(t&&t!==Z.HandleRedirect)break;return Z.None;case ew.LOGIN_SUCCESS:case ew.LOGIN_FAILURE:case ew.ACQUIRE_TOKEN_SUCCESS:case ew.ACQUIRE_TOKEN_FAILURE:case ew.RESTORE_FROM_BFCACHE:if(e.interactionType===a.Redirect||e.interactionType===a.Popup){if(t&&t!==Z.Login&&t!==Z.AcquireToken)break;return Z.None}}return null}}function ek(e,t){return"function"==typeof e?e(t):e}function eS(e,t){if(e.length!==t.length)return!1;let n=[...t];return e.every(e=>{let t=n.shift();return!!e&&!!t&&e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username})}const eb="3.0.7",eI={UNBLOCK_INPROGRESS:"UNBLOCK_INPROGRESS",EVENT:"EVENT"},eE=(e,t)=>{let{type:n,payload:r}=t,o=e.inProgress;switch(n){case eI.UNBLOCK_INPROGRESS:e.inProgress===Z.Startup&&(o=Z.None,r.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case eI.EVENT:let i=r.message,a=eT.getInteractionStatusFromEvent(i,e.inProgress);a&&(r.logger.info(`MsalProvider - ${i.eventType} results in setting inProgress from ${e.inProgress} to ${a}`),o=a);break;default:throw Error(`Unknown action type: ${n}`)}let s=r.instance.getAllAccounts();return o===e.inProgress||eS(s,e.accounts)?o!==e.inProgress?{...e,inProgress:o}:eS(s,e.accounts)?e:{...e,accounts:s}:{...e,inProgress:o,accounts:s}};function eA({instance:e,children:n}){(0,f.useEffect)(()=>{e.initializeWrapperLibrary("@azure/msal-react",eb)},[e]);let r=(0,f.useMemo)(()=>e.getLogger().clone("@azure/msal-react",eb),[e]),[o,i]=(0,f.useReducer)(eE,void 0,()=>({inProgress:Z.Startup,accounts:e.getAllAccounts()}));(0,f.useEffect)(()=>{let t=e.addEventCallback(t=>{i({payload:{instance:e,logger:r,message:t},type:eI.EVENT})});return r.verbose(`MsalProvider - Registered event callback with id: ${t}`),e.initialize().then(()=>{e.handleRedirectPromise().catch(()=>{}).finally(()=>{i({payload:{instance:e,logger:r},type:eI.UNBLOCK_INPROGRESS})})}).catch(()=>{}),()=>{t&&(r.verbose(`MsalProvider - Removing event callback ${t}`),e.removeEventCallback(t))}},[e,r]);let a={instance:e,inProgress:o.inProgress,accounts:o.accounts,logger:r};return t(f).createElement(eC.Provider,{value:a},n)}var f=(d("acw62"),d("acw62"));const e_=()=>(0,f.useContext)(eC);function eR(e){let{accounts:t,inProgress:n}=e_();return(0,f.useMemo)(()=>n!==Z.Startup&&function(e,t){if(t&&(t.username||t.homeAccountId||t.localAccountId))return e.length>0&&(!!t.homeAccountId||!!t.localAccountId||!!t.username)&&!!e.filter(e=>(!t.username||t.username.toLowerCase()===e.username.toLowerCase())&&(!t.homeAccountId||t.homeAccountId.toLowerCase()===e.homeAccountId.toLowerCase())&&(!t.localAccountId||t.localAccountId.toLowerCase()===e.localAccountId.toLowerCase()))[0];return e.length>0}(t,e),[t,n,e])}function eP({username:e,homeAccountId:n,localAccountId:r,children:o}){let i=e_();return eR((0,f.useMemo)(()=>({username:e,homeAccountId:n,localAccountId:r}),[e,n,r]))&&i.inProgress!==Z.Startup?t(f).createElement(t(f).Fragment,null,ek(o,i)):null}function eN({username:e,homeAccountId:n,localAccountId:r,children:o}){let i=e_();return eR((0,f.useMemo)(()=>({username:e,homeAccountId:n,localAccountId:r}),[e,n,r]))||i.inProgress===Z.Startup||i.inProgress===Z.HandleRedirect?null:t(f).createElement(t(f).Fragment,null,ek(o,i))}var f=(d("acw62"),d("acw62"),d("acw62"),d("acw62")),eO={};e(eO,"noTokensFound",()=>eM),e(eO,"nativeAccountUnavailable",()=>ex),e(eO,"refreshTokenExpired",()=>eL),e(eO,"interactionRequired",()=>eq),e(eO,"consentRequired",()=>eU),e(eO,"loginRequired",()=>eD),e(eO,"badToken",()=>eH);const eM="no_tokens_found",ex="native_account_unavailable",eL="refresh_token_expired",eq="interaction_required",eU="consent_required",eD="login_required",eH="bad_token",eF=[eq,eU,eD,eH],eB=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],ez={[eM]:"No refresh token found in the cache. Please sign-in.",[ex]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[eL]:"Refresh token has expired.",[eH]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};ez[eM],ez[ex],ez[eH];class eK extends eu{constructor(e,t,n,r,o,i,a,s){super(e,t,n),Object.setPrototypeOf(this,eK.prototype),this.timestamp=r||y.EMPTY_STRING,this.traceId=o||y.EMPTY_STRING,this.correlationId=i||y.EMPTY_STRING,this.claims=a||y.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=s}}function eG(e,t,n){let r=!!e&&eF.indexOf(e)>-1,o=!!n&&eB.indexOf(n)>-1,i=!!t&&eF.some(e=>t.indexOf(e)>-1);return r||i||o}function e$(e){return new eK(e,ez[e])}var f=d("acw62"),ej={};e(ej,"clientInfoDecodingError",()=>eV),e(ej,"clientInfoEmptyError",()=>eQ),e(ej,"tokenParsingError",()=>eW),e(ej,"nullOrEmptyToken",()=>eY),e(ej,"endpointResolutionError",()=>eJ),e(ej,"networkError",()=>eX),e(ej,"openIdConfigError",()=>eZ),e(ej,"hashNotDeserialized",()=>e0),e(ej,"invalidState",()=>e1),e(ej,"stateMismatch",()=>e2),e(ej,"stateNotFound",()=>e3),e(ej,"nonceMismatch",()=>e4),e(ej,"authTimeNotFound",()=>e6),e(ej,"maxAgeTranspired",()=>e8),e(ej,"multipleMatchingTokens",()=>e5),e(ej,"multipleMatchingAccounts",()=>e9),e(ej,"multipleMatchingAppMetadata",()=>e7),e(ej,"requestCannotBeMade",()=>te),e(ej,"cannotRemoveEmptyScope",()=>tt),e(ej,"cannotAppendScopeSet",()=>tn),e(ej,"emptyInputScopeSet",()=>tr),e(ej,"deviceCodePollingCancelled",()=>to),e(ej,"deviceCodeExpired",()=>ti),e(ej,"deviceCodeUnknownError",()=>ta),e(ej,"noAccountInSilentRequest",()=>ts),e(ej,"invalidCacheRecord",()=>tl),e(ej,"invalidCacheEnvironment",()=>tc),e(ej,"noAccountFound",()=>tu),e(ej,"noCryptoObject",()=>td),e(ej,"unexpectedCredentialType",()=>th),e(ej,"invalidAssertion",()=>tg),e(ej,"invalidClientCredential",()=>tf),e(ej,"tokenRefreshRequired",()=>tp),e(ej,"userTimeoutReached",()=>tm),e(ej,"tokenClaimsCnfRequiredForSignedJwt",()=>ty),e(ej,"authorizationCodeMissingFromServerResponse",()=>tv),e(ej,"bindingKeyNotRemoved",()=>tC),e(ej,"endSessionEndpointNotSupported",()=>tw),e(ej,"keyIdMissing",()=>tT),e(ej,"noNetworkConnectivity",()=>tk),e(ej,"userCanceled",()=>tS),e(ej,"missingTenantIdError",()=>tb),e(ej,"methodNotImplemented",()=>tI),e(ej,"nestedAppAuthBridgeDisabled",()=>tE);const eV="client_info_decoding_error",eQ="client_info_empty_error",eW="token_parsing_error",eY="null_or_empty_token",eJ="endpoints_resolution_error",eX="network_error",eZ="openid_config_error",e0="hash_not_deserialized",e1="invalid_state",e2="state_mismatch",e3="state_not_found",e4="nonce_mismatch",e6="auth_time_not_found",e8="max_age_transpired",e5="multiple_matching_tokens",e9="multiple_matching_accounts",e7="multiple_matching_appMetadata",te="request_cannot_be_made",tt="cannot_remove_empty_scope",tn="cannot_append_scopeset",tr="empty_input_scopeset",to="device_code_polling_cancelled",ti="device_code_expired",ta="device_code_unknown_error",ts="no_account_in_silent_request",tl="invalid_cache_record",tc="invalid_cache_environment",tu="no_account_found",td="no_crypto_object",th="unexpected_credential_type",tg="invalid_assertion",tf="invalid_client_credential",tp="token_refresh_required",tm="user_timeout_reached",ty="token_claims_cnf_required_for_signedjwt",tv="authorization_code_missing_from_server_response",tC="binding_key_not_removed",tw="end_session_endpoint_not_supported",tT="key_id_missing",tk="no_network_connectivity",tS="user_canceled",tb="missing_tenant_id_error",tI="method_not_implemented",tE="nested_app_auth_bridge_disabled",tA={[eV]:"The client info could not be parsed/decoded correctly",[eQ]:"The client info was empty",[eW]:"Token cannot be parsed",[eY]:"The token is null or empty",[eJ]:"Endpoints cannot be resolved",[eX]:"Network request failed",[eZ]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[e0]:"The hash parameters could not be deserialized",[e1]:"State was not the expected format",[e2]:"State mismatch error",[e3]:"State not found",[e4]:"Nonce mismatch error",[e6]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[e8]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[e5]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[e9]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[e7]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[te]:"Token request cannot be made without authorization code or refresh token.",[tt]:"Cannot remove null or empty scope from ScopeSet",[tn]:"Cannot append ScopeSet",[tr]:"Empty input ScopeSet cannot be processed",[to]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[ti]:"Device code is expired.",[ta]:"Device code stopped polling for unknown reasons.",[ts]:"Please pass an account object, silent flow is not supported without account information",[tl]:"Cache record object was null or undefined.",[tc]:"Invalid environment when attempting to create cache entry",[tu]:"No account found in cache for given key.",[td]:"No crypto object detected.",[th]:"Unexpected credential type.",[tg]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[tf]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[tp]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[tm]:"User defined timeout for device code polling reached",[ty]:"Cannot generate a POP jwt if the token_claims are not populated",[tv]:"Server response does not contain an authorization code to proceed",[tC]:"Could not remove the credential's binding key from storage.",[tw]:"The provided authority does not support logout",[tT]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[tk]:"No network connectivity. Check your internet connection.",[tS]:"User cancelled the flow.",[tb]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[tI]:"This method has not been implemented",[tE]:"The nested app auth bridge is disabled"};tA[eV],tA[eQ],tA[eW],tA[eY],tA[eJ],tA[eX],tA[eZ],tA[e0],tA[e1],tA[e2],tA[e3],tA[e4],tA[e6],tA[e8],tA[e5],tA[e9],tA[e7],tA[te],tA[tt],tA[tn],tA[tr],tA[to],tA[ti],tA[ta],tA[ts],tA[tl],tA[tc],tA[tu],tA[td],tA[th],tA[tg],tA[tf],tA[tp],tA[tm],tA[ty],tA[tv],tA[tC],tA[tw],tA[tT],tA[tk],tA[tS],tA[tb],tA[tE];class t_ extends eu{constructor(e,t){super(e,t?`${tA[e]}: ${t}`:tA[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,t_.prototype)}}function tR(e,t){return new t_(e,t)}function tP(e,t){if(!e)throw tR(eQ);try{let n=t(e);return JSON.parse(n)}catch(e){throw tR(eV)}}function tN(e){if(!e)throw tR(eV);let t=e.split(R.CLIENT_INFO_SEPARATOR,2);return{uid:t[0],utid:t.length<2?y.EMPTY_STRING:t[1]}}function tO(e,t){return!!e&&!!t&&e===t.split(".")[1]}function tM(e,t,n,r){if(!r)return{tenantId:n,localAccountId:t,isHomeTenant:tO(n,e)};{let{oid:t,sub:n,tid:o,name:i,tfp:a,acr:s}=r,l=o||a||s||"";return{tenantId:l,localAccountId:t||n||"",name:i,isHomeTenant:tO(l,e)}}}function tx(e,t,n,r){let o=e;if(t){let{isHomeTenant:n,...r}=t;o={...e,...r}}if(n){let{isHomeTenant:t,...i}=tM(e.homeAccountId,e.localAccountId,e.tenantId,n);o={...o,...i,idTokenClaims:n,idToken:r}}return o}const tL={Default:0,Adfs:1,Dsts:2,Ciam:3};function tq(e){return e&&(e.tid||e.tfp||e.acr)||null}const tU={AAD:"AAD",OIDC:"OIDC"};class tD{generateAccountId(){return[this.homeAccountId,this.environment].join(R.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return tD.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(R.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,n){let r,o=new tD;t.authorityType===tL.Adfs?o.authorityType=_.ADFS_ACCOUNT_TYPE:t.protocolMode===tU.AAD?o.authorityType=_.MSSTS_ACCOUNT_TYPE:o.authorityType=_.GENERIC_ACCOUNT_TYPE,e.clientInfo&&n&&(r=tP(e.clientInfo,n)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;let i=e.environment||t&&t.getPreferredCache();if(!i)throw tR(tc);o.environment=i,o.realm=r?.utid||tq(e.idTokenClaims)||"",o.localAccountId=r?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,s=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(o.username=a||s||"",o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{let t=tM(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[t]}return o}static createFromAccountInfo(e,t,n){let r=new tD;return r.authorityType=e.authorityType||_.GENERIC_ACCOUNT_TYPE,r.homeAccountId=e.homeAccountId,r.localAccountId=e.localAccountId,r.nativeAccountId=e.nativeAccountId,r.realm=e.tenantId,r.environment=e.environment,r.username=e.username,r.name=e.name,r.cloudGraphHostName=t,r.msGraphHost=n,r.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),r}static generateHomeAccountId(e,t,n,r,o){if(t!==tL.Adfs&&t!==tL.Dsts){if(e)try{let t=tP(e,r.base64Decode);if(t.uid&&t.utid)return`${t.uid}.${t.utid}`}catch(e){}n.warning("No client info in response")}return o?.sub||""}static isAccountEntity(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")}static accountInfoIsEqual(e,t,n){if(!e||!t)return!1;let r=!0;if(n){let n=e.idTokenClaims||{},o=t.idTokenClaims||{};r=n.iat===o.iat&&n.nonce===o.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&r}}var f=d("acw62");async function tH(){try{let e=await fetch("/api/auth/config");if(!e.ok)throw Error("Failed to fetch auth configuration");let t=await e.json();return{auth:{clientId:t.clientId,authority:t.instance||`https://login.microsoftonline.com/consumers/${t.tenantId}`,redirectUri:window.location.origin},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1}}}catch(e){throw console.error("Error fetching auth configuration:",e),e}}d("acw62"),window.location.origin;const tF={scopes:["User.Read"]},tB=({onTokenAcquired:e})=>{let{instance:t}=e_();return(0,g.jsx)("button",{className:"btn btn-primary",onClick:()=>{t.loginPopup(tF).then(t=>{e(t.accessToken)}).catch(e=>console.log(e))},children:"Sign In"})};d("acw62");const tz=()=>{let{instance:e}=e_();return(0,g.jsx)("button",{className:"btn btn-secondary",onClick:()=>{e.logout()},children:"Sign Out"})};var f=d("acw62");const tK=()=>{let{instance:e,accounts:t}=e_(),[n,r]=(0,f.useState)(null),o=t[0]&&t[0].name;(0,f.useEffect)(()=>{t[0]&&e.acquireTokenSilent({...tF,account:t[0]}).then(e=>{i(e.accessToken)}).catch(e=>{console.log(e)})},[t,e]);let i=e=>{fetch("https://graph.microsoft.com/v1.0/me",{headers:{Authorization:`Bearer ${e}`}}).then(e=>e.json()).then(e=>r(e)).catch(e=>console.log(e))};return(0,g.jsxs)("div",{children:[(0,g.jsxs)("h5",{className:"card-title",children:["Welcome ",o]}),n&&(0,g.jsx)("div",{children:(0,g.jsxs)("p",{children:["Email: ",n.mail||n.userPrincipalName]})})]})};var f=d("acw62");const tG=({token:e})=>{let[t,n]=(0,f.useState)(""),[r,o]=(0,f.useState)([]),[i,a]=(0,f.useState)(-1),[s,l]=(0,f.useState)(""),[c,u]=(0,f.useState)(""),[d,h]=(0,f.useState)("");(0,f.useEffect)(()=>{p()},[e]);let p=async()=>{if(e)try{let t=await fetch("api/SystemPrompt",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){let e=await t.json();n(e.content),o(e.content.split("\n"))}else 404===t.status?(n(""),o([""])):h("Failed to fetch system prompt")}catch(e){e instanceof Error?h("Error fetching system prompt: "+e.message):h("Error fetching system prompt: "+String(e))}},m=async()=>{if(e)try{await fetch("api/SystemPrompt",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({content:t})})}catch(e){e instanceof Error?h("Error saving system prompt: "+e.message):h("Error saving system prompt: "+String(e))}},y=e=>{a(e),l(r[e])},v=async()=>{if(e){try{(await fetch(`api/SystemPrompt/lines/${i}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(s)})).ok?[...r][i]=s:h("Failed to update line")}catch(e){e instanceof Error?h("Error updating line: "+e.message):h("Error updating line: "+String(e))}u("Line updated successfully"),setTimeout(()=>u(""),3e3)}},C=()=>a(-1);return(0,g.jsxs)("div",{className:"container",children:[(0,g.jsx)("h2",{className:"mt-4 mb-3",children:"System Prompt Editor"}),c&&(0,g.jsx)("div",{className:"alert alert-success",children:c}),d&&(0,g.jsx)("div",{className:"alert alert-danger",children:d}),(0,g.jsx)("p",{children:"Edit your system prompt line by line or save the entire prompt at once."}),(0,g.jsx)("ul",{className:"list-group mb-3",children:r.map((e,t)=>(0,g.jsx)("li",{className:"list-group-item",children:i===t?(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col",children:(0,g.jsx)("textarea",{className:"form-control",rows:3,value:s,onChange:e=>l(e.target.value)})}),(0,g.jsxs)("div",{className:"col-md-auto",children:[(0,g.jsx)("button",{className:"btn btn-success me-2",onClick:v,children:"Save"}),(0,g.jsx)("button",{className:"btn btn-secondary",onClick:C,children:"Cancel"})]})]}):(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col",children:e||(0,g.jsx)("em",{children:"Empty line"})}),(0,g.jsx)("div",{className:"col-md-auto",children:(0,g.jsx)("button",{className:"btn btn-primary",onClick:()=>y(t),children:"Edit"})})]})},t))}),(0,g.jsx)("button",{className:"btn btn-primary mb-3",onClick:()=>{let e=[...r,""];o(e),n(e.join("\n")),y(e.length-1)},children:"Add New Line"}),(0,g.jsxs)("form",{children:[(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("label",{className:"form-label",children:"Complete System Prompt"}),(0,g.jsx)("textarea",{className:"form-control",rows:10,value:t,onChange:e=>n(e.target.value)})]}),(0,g.jsx)("button",{type:"button",className:"btn btn-primary",onClick:m,children:"Save Prompt"})]})]})};var t$=()=>{let{accounts:e}=e_(),t=e.length>0,[n,r]=(0,f.useState)(""),[o,i]=(0,f.useState)(""),[a,s]=(0,f.useState)(!1),[l,c]=(0,f.useState)("light"),[u,d]=(0,f.useState)(null);(0,f.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)");c(e.matches?"dark":"light");let t=e=>c(e.matches?"dark":"light");return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),(0,f.useEffect)(()=>{document.body.classList.remove("light-theme","dark-theme"),document.body.classList.add(`${l}-theme`)},[l]);let h=async e=>{if(e.preventDefault(),n.trim()){s(!0);try{(await fetch("/api/diary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({thought:n,context:o})})).ok?(r(""),i("")):console.error("Failed to post entry")}catch(e){console.error("Error posting entry:",e)}finally{s(!1)}}};return(0,g.jsxs)("div",{className:`App ${l}-theme`,children:[(0,g.jsxs)("header",{className:"App-header",children:[(0,g.jsx)("h1",{children:"Second Diary"}),t?(0,g.jsx)("div",{className:"authenticated-container",children:(0,g.jsx)(tz,{})}):(0,g.jsx)(tB,{onTokenAcquired:e=>{d(e)}})]}),(0,g.jsxs)("main",{className:"App-main",children:[(0,g.jsx)(eN,{children:(0,g.jsx)("p",{children:"Welcome to your diary application! Please sign in to continue."})}),(0,g.jsxs)(eP,{children:[(0,g.jsxs)("div",{className:"profile-container",children:[(0,g.jsx)(tK,{}),(0,g.jsx)("p",{children:"You're now signed in and can access your diary."})]}),(0,g.jsx)(tG,{token:u}),(0,g.jsxs)("div",{className:"diary-entry-form",children:[(0,g.jsx)("h2",{children:"Create New Entry"}),(0,g.jsxs)("form",{onSubmit:h,className:"responsive-form",children:[(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"thought",children:"Thought (Required)"}),(0,g.jsx)("textarea",{id:"thought",value:n,onChange:e=>r(e.target.value),placeholder:"Enter your thought here...",rows:4,required:!0,disabled:a,className:"full-width-input"})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"context",children:"Context (Optional)"}),(0,g.jsx)("textarea",{id:"context",value:o,onChange:e=>i(e.target.value),placeholder:"Enter optional context for this thought...",rows:2,disabled:a,className:"full-width-input"})]}),(0,g.jsx)("button",{type:"submit",disabled:a||!n.trim(),className:"post-button full-width-button",children:a?"Posting...":"Post"})]})]})]})]})]})};const tj={None:"none"};var tV={};e(tV,"redirectUriEmpty",()=>tQ),e(tV,"claimsRequestParsingError",()=>tW),e(tV,"authorityUriInsecure",()=>tY),e(tV,"urlParseError",()=>tJ),e(tV,"urlEmptyError",()=>tX),e(tV,"emptyInputScopesError",()=>tZ),e(tV,"invalidPromptValue",()=>t0),e(tV,"invalidClaims",()=>t1),e(tV,"tokenRequestEmpty",()=>t2),e(tV,"logoutRequestEmpty",()=>t3),e(tV,"invalidCodeChallengeMethod",()=>t4),e(tV,"pkceParamsMissing",()=>t6),e(tV,"invalidCloudDiscoveryMetadata",()=>t8),e(tV,"invalidAuthorityMetadata",()=>t5),e(tV,"untrustedAuthority",()=>t9),e(tV,"missingSshJwk",()=>t7),e(tV,"missingSshKid",()=>ne),e(tV,"missingNonceAuthenticationHeader",()=>nt),e(tV,"invalidAuthenticationHeader",()=>nn),e(tV,"cannotSetOIDCOptions",()=>nr),e(tV,"cannotAllowPlatformBroker",()=>no),e(tV,"authorityMismatch",()=>ni);const tQ="redirect_uri_empty",tW="claims_request_parsing_error",tY="authority_uri_insecure",tJ="url_parse_error",tX="empty_url_error",tZ="empty_input_scopes_error",t0="invalid_prompt_value",t1="invalid_claims",t2="token_request_empty",t3="logout_request_empty",t4="invalid_code_challenge_method",t6="pkce_params_missing",t8="invalid_cloud_discovery_metadata",t5="invalid_authority_metadata",t9="untrusted_authority",t7="missing_ssh_jwk",ne="missing_ssh_kid",nt="missing_nonce_authentication_header",nn="invalid_authentication_header",nr="cannot_set_OIDCOptions",no="cannot_allow_platform_broker",ni="authority_mismatch",na={[tQ]:"A redirect URI is required for all calls, and none has been set.",[tW]:"Could not parse the given claims request object.",[tY]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[tJ]:"URL could not be parsed into appropriate segments.",[tX]:"URL was empty or null.",[tZ]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[t0]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[t1]:"Given claims parameter must be a stringified JSON object.",[t2]:"Token request was empty and not found in cache.",[t3]:"The logout request was null or undefined.",[t4]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[t6]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[t8]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[t5]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[t9]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[t7]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[ne]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[nt]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[nn]:"Invalid authentication header provided",[nr]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[no]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[ni]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};na[tQ],na[tW],na[tY],na[tJ],na[tX],na[tZ],na[t0],na[t1],na[t2],na[t3],na[t4],na[t6],na[t8],na[t5],na[t9],na[t7],na[ne],na[nt],na[nn],na[nr],na[no],na[ni];class ns extends eu{constructor(e){super(e,na[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,ns.prototype)}}function nl(e){return new ns(e)}const nc={createNewGuid:()=>{throw tR(tI)},base64Decode:()=>{throw tR(tI)},base64Encode:()=>{throw tR(tI)},base64UrlEncode:()=>{throw tR(tI)},encodeKid:()=>{throw tR(tI)},async getPublicKeyThumbprint(){throw tR(tI)},async removeTokenBindingKey(){throw tR(tI)},async clearKeystore(){throw tR(tI)},async signJwt(){throw tR(tI)},async hashString(){throw tR(tI)}},nu="@azure/msal-common",nd="15.3.0";var nh={};e(nh,"generateCredentialKey",()=>nb),e(nh,"createIdTokenEntity",()=>nI),e(nh,"createAccessTokenEntity",()=>nE),e(nh,"createRefreshTokenEntity",()=>nA),e(nh,"isCredentialEntity",()=>n_),e(nh,"isAccessTokenEntity",()=>nR),e(nh,"isIdTokenEntity",()=>nP),e(nh,"isRefreshTokenEntity",()=>nN),e(nh,"isServerTelemetryEntity",()=>nO),e(nh,"isThrottlingEntity",()=>nM),e(nh,"generateAppMetadataKey",()=>nx),e(nh,"isAppMetadataEntity",()=>nL),e(nh,"isAuthorityMetadataEntity",()=>nq),e(nh,"generateAuthorityMetadataExpiresAt",()=>nU),e(nh,"updateAuthorityEndpointMetadata",()=>nD),e(nh,"updateCloudDiscoveryMetadata",()=>nH),e(nh,"isAuthorityMetadataExpired",()=>nF);var ng={};function nf(e,t){let n=np(e);try{let e=t(n);return JSON.parse(e)}catch(e){throw tR(eW)}}function np(e){if(!e)throw tR(eY);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw tR(eW);return t[2]}function nm(e,t){if(0===t||Date.now()-3e5>e+t)throw tR(e8)}e(ng,"extractTokenClaims",()=>nf),e(ng,"getJWSPayload",()=>np),e(ng,"checkMaxAge",()=>nm);var ny={};function nv(){return Math.round(new Date().getTime()/1e3)}function nC(e){return e.getTime()/1e3}function nw(e){return e?new Date(1e3*Number(e)):new Date}function nT(e,t){let n=Number(e)||0;return nv()+t>n}function nk(e){return Number(e)>nv()}function nS(e,t){return new Promise(n=>setTimeout(()=>n(t),e))}function nb(e){var t,n;return[[(t=e).homeAccountId,t.environment].join(R.CACHE_KEY_SEPARATOR).toLowerCase(),function(e){let t=e.credentialType===P.REFRESH_TOKEN&&e.familyId||e.clientId;return[e.credentialType,t,e.realm||""].join(R.CACHE_KEY_SEPARATOR).toLowerCase()}(e),(e.target||"").toLowerCase(),(e.requestedClaimsHash||"").toLowerCase(),(n=e).tokenType&&n.tokenType.toLowerCase()!==L.BEARER.toLowerCase()?n.tokenType.toLowerCase():""].join(R.CACHE_KEY_SEPARATOR).toLowerCase()}function nI(e,t,n,r,o){return{credentialType:P.ID_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n,realm:o}}function nE(e,t,n,r,o,i,a,s,l,c,u,d,h,g,f){let p={homeAccountId:e,credentialType:P.ACCESS_TOKEN,secret:n,cachedAt:nv().toString(),expiresOn:a.toString(),extendedExpiresOn:s.toString(),environment:t,clientId:r,realm:o,target:i,tokenType:u||L.BEARER};if(d&&(p.userAssertionHash=d),c&&(p.refreshOn=c.toString()),g&&(p.requestedClaims=g,p.requestedClaimsHash=f),p.tokenType?.toLowerCase()!==L.BEARER.toLowerCase())switch(p.credentialType=P.ACCESS_TOKEN_WITH_AUTH_SCHEME,p.tokenType){case L.POP:let m=nf(n,l);if(!m?.cnf?.kid)throw tR(ty);p.keyId=m.cnf.kid;break;case L.SSH:p.keyId=h}return p}function nA(e,t,n,r,o,i,a){let s={credentialType:P.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n};return i&&(s.userAssertionHash=i),o&&(s.familyId=o),a&&(s.expiresOn=a.toString()),s}function n_(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function nR(e){return!!e&&n_(e)&&e.hasOwnProperty("realm")&&e.hasOwnProperty("target")&&(e.credentialType===P.ACCESS_TOKEN||e.credentialType===P.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function nP(e){return!!e&&n_(e)&&e.hasOwnProperty("realm")&&e.credentialType===P.ID_TOKEN}function nN(e){return!!e&&n_(e)&&e.credentialType===P.REFRESH_TOKEN}function nO(e,t){let n=0===e.indexOf(x.CACHE_KEY),r=!0;return t&&(r=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&r}function nM(e,t){let n=!1;e&&(n=0===e.indexOf(q.THROTTLING_PREFIX));let r=!0;return t&&(r=t.hasOwnProperty("throttleTime")),n&&r}function nx({environment:e,clientId:t}){return[N,e,t].join(R.CACHE_KEY_SEPARATOR).toLowerCase()}function nL(e,t){return!!t&&0===e.indexOf(N)&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment")}function nq(e,t){return!!t&&0===e.indexOf(O.CACHE_KEY)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}function nU(){return nv()+O.REFRESH_TIME_SECONDS}function nD(e,t,n){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=n,e.jwks_uri=t.jwks_uri}function nH(e,t,n){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=n}function nF(e){return e.expiresAt<=nv()}e(ny,"nowSeconds",()=>nv),e(ny,"toSecondsFromDate",()=>nC),e(ny,"toDateFromSeconds",()=>nw),e(ny,"isTokenExpired",()=>nT),e(ny,"wasClockTurnedBack",()=>nk),e(ny,"delay",()=>nS);class nB{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return 0===Object.keys(t).length}catch(e){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},n=e.split("&"),r=e=>decodeURIComponent(e.replace(/\+/g," "));return n.forEach(e=>{if(e.trim()){let[n,o]=e.split(/=(.+)/g,2);n&&o&&(t[r(n)]=r(o))}}),t}static trimArrayEntries(e){return e.map(e=>e.trim())}static removeEmptyStringsFromArray(e){return e.filter(e=>!!e)}static jsonParseHelper(e){try{return JSON.parse(e)}catch(e){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class nz{constructor(e){let t=e?nB.trimArrayEntries([...e]):[],n=t?nB.removeEmptyStringsFromArray(t):[];if(!n||!n.length)throw nl(tZ);this.scopes=new Set,n.forEach(e=>this.scopes.add(e))}static fromString(e){return new nz((e||y.EMPTY_STRING).split(" "))}static createSearchScopes(e){let t=new nz(e);return t.containsOnlyOIDCScopes()?t.removeScope(y.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}containsScope(e){let t=new nz(this.printScopesLowerCase().split(" "));return!!e&&t.scopes.has(e.toLowerCase())}containsScopeSet(e){return!!e&&!(e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every(e=>this.containsScope(e))}containsOnlyOIDCScopes(){let e=0;return w.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(e=>this.appendScope(e))}catch(e){throw tR(tn)}}removeScope(e){if(!e)throw tR(tt);this.scopes.delete(e.trim())}removeOIDCScopes(){w.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw tR(tr);let t=new Set;return e.scopes.forEach(e=>t.add(e.toLowerCase())),this.scopes.forEach(e=>t.add(e.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw tR(tr);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),n=e.getScopeCount(),r=this.getScopeCount();return t.size<r+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):y.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}var nK={};function nG(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}function n$(e){if(!e||0>e.indexOf("="))return null;try{let t=nG(e),n=Object.fromEntries(new URLSearchParams(t));if(n.code||n.error||n.error_description||n.state)return n}catch(e){throw tR(e0)}return null}function nj(e){let t=[];return e.forEach((e,n)=>{t.push(`${n}=${encodeURIComponent(e)}`)}),t.join("&")}e(nK,"stripLeadingHashOrQuery",()=>nG),e(nK,"getDeserializedResponse",()=>n$),e(nK,"mapToQueryString",()=>nj);class nV{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw nl(tX);e.includes("#")||(this._urlString=nV.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return nB.endsWith(t,"?")?t=t.slice(0,-1):nB.endsWith(t,"?/")&&(t=t.slice(0,-2)),nB.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(e){throw nl(tJ)}if(!e.HostNameAndPort||!e.PathSegments)throw nl(tJ);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw nl(tY)}static appendQueryString(e,t){return t?0>e.indexOf("?")?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return nV.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),n=t.PathSegments;return e&&0!==n.length&&(n[0]===S.COMMON||n[0]===S.ORGANIZATIONS)&&(n[0]=e),nV.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw nl(tJ);let n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},r=n.AbsolutePath.split("/");return n.PathSegments=r=r.filter(e=>e&&e.length>0),n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw nl(tJ);return n[2]}static getAbsoluteUrl(e,t){if(e[0]===y.FORWARD_SLASH){let n=new nV(t).getUrlComponents();return n.Protocol+"//"+n.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new nV(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!n$(e)}}const nQ={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},nW={metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},nY=new Set;function nJ(e,t,n,r){if(r?.trace(`getAliasesFromMetadata called with source: ${n}`),e&&t){let o=nX(t,e);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function nX(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(r.aliases.includes(t))return r}return null}nW.metadata.forEach(e=>{e.aliases.forEach(e=>{nY.add(e)})});const nZ="cache_quota_exceeded",n0="cache_error_unknown",n1={[nZ]:"Exceeded cache storage capacity.",[n0]:"Unexpected error occurred when using cache storage."};class n2 extends Error{constructor(e,t){let n=t||(n1[e]?n1[e]:n1[n0]);super(`${e}: ${n}`),Object.setPrototypeOf(this,n2.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}class n3{constructor(e,t,n,r){this.clientId=e,this.cryptoImpl=t,this.commonLogger=n.clone(nu,nd),this.staticAuthorityOptions=r}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){let t=this.getAllAccounts(e);return t.length>1?t.sort(e=>e.idTokenClaims?-1:1)[0]:1===t.length?t[0]:null}getBaseAccountInfo(e){let t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap(e=>this.getTenantProfilesFromAccountEntity(e,t?.tenantId,t))}getTenantedAccountInfoByFilter(e,t,n,r){let o,i=null;if(r&&!this.tenantProfileMatchesFilter(n,r))return null;let a=this.getIdToken(e,t,n.tenantId);return a&&(o=nf(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(o,r))?null:tx(e,n,o,a?.secret)}getTenantProfilesFromAccountEntity(e,t,n){let r=e.getAccountInfo(),o=r.tenantProfiles||new Map,i=this.getTokenKeys();if(t){let e=o.get(t);if(!e)return[];o=new Map([[t,e]])}let a=[];return o.forEach(e=>{let t=this.getTenantedAccountInfoByFilter(r,i,e,n);t&&a.push(t)}),a}tenantProfileMatchesFilter(e,t){return(!t.localAccountId||!!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId))&&(!t.name||e.name===t.name)&&(void 0===t.isHomeTenant||e.isHomeTenant===t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return(!t||(!t.localAccountId||!!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))&&(!t.loginHint||!!this.matchLoginHintFromTokenClaims(e,t.loginHint))&&(!t.username||!!this.matchUsername(e.preferred_username,t.username))&&(!t.name||!!this.matchName(e,t.name))&&(!t.sid||!!this.matchSid(e,t.sid)))&&!0}async saveCacheRecord(e,t,n){if(!e)throw tR(tl);try{e.account&&await this.setAccount(e.account,t),e.idToken&&n?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,t),e.accessToken&&n?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,t),e.refreshToken&&n?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(e){if(this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),e instanceof Error){if(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${e.message}`,t),"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||e.message.includes("exceeded the quota"))throw this.commonLogger?.error("CacheManager.saveCacheRecord: exceeded storage quota",t),new n2(nZ);throw new n2(e.name,e.message)}throw this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${e}`,t),new n2(n0)}}async saveAccessToken(e,t){let n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),o=nz.fromString(e.target),i=[];r.accessToken.forEach(e=>{if(!this.accessTokenKeyMatchesFilter(e,n,!1))return;let t=this.getAccessTokenCredential(e);t&&this.credentialMatchesFilter(t,n)&&nz.fromString(t.target).intersectingScopeSets(o)&&i.push(this.removeAccessToken(e))}),await Promise.all(i),await this.setAccessTokenCredential(e,t)}getAccountsFilteredBy(e){let t=this.getAccountKeys(),n=[];return t.forEach(t=>{if(!this.isAccountKey(t,e.homeAccountId))return;let r=this.getAccount(t,this.commonLogger);if(!r||e.homeAccountId&&!this.matchHomeAccountId(r,e.homeAccountId)||e.username&&!this.matchUsername(r.username,e.username)||e.environment&&!this.matchEnvironment(r,e.environment)||e.realm&&!this.matchRealm(r,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(r,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(r,e.authorityType))return;let o={localAccountId:e?.localAccountId,name:e?.name},i=r.tenantProfiles?.filter(e=>this.tenantProfileMatchesFilter(e,o));i&&0===i.length||n.push(r)}),n}isAccountKey(e,t,n){return!(e.split(R.CACHE_KEY_SEPARATOR).length<3)&&(!t||!!e.toLowerCase().includes(t.toLowerCase()))&&(!n||!!e.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(e){if(e.split(R.CACHE_KEY_SEPARATOR).length<6)return!1;let t=e.toLowerCase();if(-1===t.indexOf(P.ID_TOKEN.toLowerCase())&&-1===t.indexOf(P.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(P.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(P.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(P.REFRESH_TOKEN.toLowerCase())>-1){let e=`${P.REFRESH_TOKEN}${R.CACHE_KEY_SEPARATOR}${this.clientId}${R.CACHE_KEY_SEPARATOR}`,n=`${P.REFRESH_TOKEN}${R.CACHE_KEY_SEPARATOR}1${R.CACHE_KEY_SEPARATOR}`;if(-1===t.indexOf(e.toLowerCase())&&-1===t.indexOf(n.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,t){return(!t.clientId||!!this.matchClientId(e,t.clientId))&&(!t.userAssertionHash||!!this.matchUserAssertionHash(e,t.userAssertionHash))&&("string"!=typeof t.homeAccountId||!!this.matchHomeAccountId(e,t.homeAccountId))&&(!t.environment||!!this.matchEnvironment(e,t.environment))&&(!t.realm||!!this.matchRealm(e,t.realm))&&(!t.credentialType||!!this.matchCredentialType(e,t.credentialType))&&(!t.familyId||!!this.matchFamilyId(e,t.familyId))&&(!t.target||!!this.matchTarget(e,t.target))&&(!t.requestedClaimsHash&&!e.requestedClaimsHash||e.requestedClaimsHash===t.requestedClaimsHash)&&(e.credentialType!==P.ACCESS_TOKEN_WITH_AUTH_SCHEME||(!t.tokenType||!!this.matchTokenType(e,t.tokenType))&&(t.tokenType!==L.SSH||!t.keyId||!!this.matchKeyId(e,t.keyId)))&&!0}getAppMetadataFilteredBy(e){let t=this.getKeys(),n={};return t.forEach(t=>{if(!this.isAppMetadata(t))return;let r=this.getAppMetadata(t);r&&(!e.environment||this.matchEnvironment(r,e.environment))&&(!e.clientId||this.matchClientId(r,e.clientId))&&(n[t]=r)}),n}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),n=null;return t.forEach(t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;let r=this.getAuthorityMetadata(t);r&&-1!==r.aliases.indexOf(e)&&(n=r)}),n}async removeAllAccounts(){let e=this.getAccountKeys(),t=[];e.forEach(e=>{t.push(this.removeAccount(e))}),await Promise.all(t)}async removeAccount(e){let t=this.getAccount(e,this.commonLogger);t&&(await this.removeAccountContext(t),this.removeItem(e))}async removeAccountContext(e){let t=this.getTokenKeys(),n=e.generateAccountId(),r=[];t.idToken.forEach(e=>{0===e.indexOf(n)&&this.removeIdToken(e)}),t.accessToken.forEach(e=>{0===e.indexOf(n)&&r.push(this.removeAccessToken(e))}),t.refreshToken.forEach(e=>{0===e.indexOf(n)&&this.removeRefreshToken(e)}),await Promise.all(r)}async removeAccessToken(e){let t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===P.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===L.POP){let e=t.keyId;if(e)try{await this.cryptoImpl.removeTokenBindingKey(e)}catch(e){throw tR(tC)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(e=>{this.isAppMetadata(e)&&this.removeItem(e)}),!0}readAccountFromCache(e){let t=tD.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,n,r,o){this.commonLogger.trace("CacheManager - getIdToken called");let i={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:P.ID_TOKEN,clientId:this.clientId,realm:n},a=this.getIdTokensByFilter(i,t),s=a.size;if(s<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(s>1){let t=a;if(!n){let n=new Map;a.forEach((t,r)=>{t.realm===e.tenantId&&n.set(r,t)});let r=n.size;if(r<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===r)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),n.values().next().value;t=n}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),t.forEach((e,t)=>{this.removeIdToken(t)}),r&&o&&r.addFields({multiMatchedID:a.size},o),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){let n=t&&t.idToken||this.getTokenKeys().idToken,r=new Map;return n.forEach(t=>{if(!this.idTokenKeyMatchesFilter(t,{clientId:this.clientId,...e}))return;let n=this.getIdTokenCredential(t);n&&this.credentialMatchesFilter(n,e)&&r.set(t,n)}),r}idTokenKeyMatchesFilter(e,t){let n=e.toLowerCase();return(!t.clientId||-1!==n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,n,r,o,i){this.commonLogger.trace("CacheManager - getAccessToken called");let a=nz.createSearchScopes(t.scopes),s=t.authenticationScheme||L.BEARER,l=s&&s.toLowerCase()!==L.BEARER.toLowerCase()?P.ACCESS_TOKEN_WITH_AUTH_SCHEME:P.ACCESS_TOKEN,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:r||e.tenantId,target:a,tokenType:s,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},u=n&&n.accessToken||this.getTokenKeys().accessToken,d=[];u.forEach(e=>{if(this.accessTokenKeyMatchesFilter(e,c,!0)){let t=this.getAccessTokenCredential(e);t&&this.credentialMatchesFilter(t,c)&&d.push(t)}});let h=d.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),d.forEach(e=>{this.removeAccessToken(nb(e))}),o&&i&&o.addFields({multiMatchedAT:d.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),d[0])}accessTokenKeyMatchesFilter(e,t,n){let r=e.toLowerCase();if(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase())||t.realm&&-1===r.indexOf(t.realm.toLowerCase())||t.requestedClaimsHash&&-1===r.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){let e=t.target.asArray();for(let t=0;t<e.length;t++){if(n&&!r.includes(e[t].toLowerCase()))return!1;if(!n&&r.includes(e[t].toLowerCase()))break}}return!0}getAccessTokensByFilter(e){let t=this.getTokenKeys(),n=[];return t.accessToken.forEach(t=>{if(!this.accessTokenKeyMatchesFilter(t,e,!0))return;let r=this.getAccessTokenCredential(t);r&&this.credentialMatchesFilter(r,e)&&n.push(r)}),n}getRefreshToken(e,t,n,r,o){this.commonLogger.trace("CacheManager - getRefreshToken called");let i={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:P.REFRESH_TOKEN,clientId:this.clientId,familyId:t?"1":void 0},a=n&&n.refreshToken||this.getTokenKeys().refreshToken,s=[];a.forEach(e=>{if(this.refreshTokenKeyMatchesFilter(e,i)){let t=this.getRefreshTokenCredential(e);t&&this.credentialMatchesFilter(t,i)&&s.push(t)}});let l=s.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&r&&o&&r.addFields({multiMatchedRT:l},o),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),s[0])}refreshTokenKeyMatchesFilter(e,t){let n=e.toLowerCase();return(!t.familyId||-1!==n.indexOf(t.familyId.toLowerCase()))&&(!!t.familyId||!t.clientId||-1!==n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase()))}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(t),r=Object.keys(n).map(e=>n[e]),o=r.length;if(o<1)return null;if(o>1)throw tR(e7);return r[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&"1"===t.familyId)}matchHomeAccountId(e,t){return"string"==typeof e.homeAccountId&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&"string"==typeof e&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let n=function(e,t){let n,r=e.canonicalAuthority;if(r){let o=new nV(r).getUrlComponents().HostNameAndPort;n=nJ(o,e.cloudDiscoveryMetadata?.metadata,M.CONFIG,t)||nJ(o,nW.metadata,M.HARDCODED_VALUES,t)||e.knownAuthorities}return n||[]}(this.staticAuthorityOptions,this.commonLogger);if(n.includes(t)&&n.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return(e.credentialType===P.ACCESS_TOKEN||e.credentialType===P.ACCESS_TOKEN_WITH_AUTH_SCHEME)&&!!e.target&&nz.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return -1!==e.indexOf(N)}isAuthorityMetadata(e){return -1!==e.indexOf(O.CACHE_KEY)}generateAuthorityMetadataCacheKey(e){return`${O.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let n in t)e[n]=t[n];return e}}class n4 extends n3{async setAccount(){throw tR(tI)}getAccount(){throw tR(tI)}async setIdTokenCredential(){throw tR(tI)}getIdTokenCredential(){throw tR(tI)}async setAccessTokenCredential(){throw tR(tI)}getAccessTokenCredential(){throw tR(tI)}async setRefreshTokenCredential(){throw tR(tI)}getRefreshTokenCredential(){throw tR(tI)}setAppMetadata(){throw tR(tI)}getAppMetadata(){throw tR(tI)}setServerTelemetry(){throw tR(tI)}getServerTelemetry(){throw tR(tI)}setAuthorityMetadata(){throw tR(tI)}getAuthorityMetadata(){throw tR(tI)}getAuthorityMetadataKeys(){throw tR(tI)}setThrottlingCache(){throw tR(tI)}getThrottlingCache(){throw tR(tI)}removeItem(){throw tR(tI)}getKeys(){throw tR(tI)}getAccountKeys(){throw tR(tI)}getTokenKeys(){throw tR(tI)}}const n6={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},n8={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:s.Info,correlationId:y.EMPTY_STRING},n5={claimsBasedCachingEnabled:!1},n9={async sendGetRequestAsync(){throw tR(tI)},async sendPostRequestAsync(){throw tR(tI)}},n7={sku:y.SKU,version:nd,cpu:y.EMPTY_STRING,os:y.EMPTY_STRING},re={clientSecret:y.EMPTY_STRING,clientAssertion:void 0},rt={azureCloudInstance:tj.None,tenant:`${y.DEFAULT_COMMON_TENANT}`},rn={application:{appName:"",appVersion:""}};function rr(e){return e.authOptions.authority.options.protocolMode===tU.OIDC}const ro={sendGetRequestAsync:()=>Promise.reject(tR(tI)),sendPostRequestAsync:()=>Promise.reject(tR(tI))},ri={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt"};ri.AcquireTokenByCode,ri.AcquireTokenByRefreshToken,ri.AcquireTokenSilent,ri.AcquireTokenSilentAsync,ri.AcquireTokenPopup,ri.AcquireTokenRedirect,ri.CryptoOptsGetPublicKeyThumbprint,ri.CryptoOptsSignJwt,ri.SilentCacheClientAcquireToken,ri.SilentIframeClientAcquireToken,ri.SilentRefreshClientAcquireToken,ri.SsoSilent,ri.StandardInteractionClientGetDiscoveredAuthority,ri.FetchAccountIdWithNativeBroker,ri.NativeInteractionClientAcquireToken,ri.BaseClientCreateTokenRequestHeaders,ri.NetworkClientSendPostRequestAsync,ri.RefreshTokenClientExecutePostToTokenEndpoint,ri.AuthorizationCodeClientExecutePostToTokenEndpoint,ri.BrokerHandhshake,ri.AcquireTokenByRefreshTokenInBroker,ri.AcquireTokenByBroker,ri.RefreshTokenClientExecuteTokenRequest,ri.RefreshTokenClientAcquireToken,ri.RefreshTokenClientAcquireTokenWithCachedRefreshToken,ri.RefreshTokenClientAcquireTokenByRefreshToken,ri.RefreshTokenClientCreateTokenRequestBody,ri.AcquireTokenFromCache,ri.SilentFlowClientAcquireCachedToken,ri.SilentFlowClientGenerateResultFromCacheRecord,ri.AcquireTokenBySilentIframe,ri.InitializeBaseRequest,ri.InitializeSilentRequest,ri.InitializeClientApplication,ri.InitializeCache,ri.ImportExistingCache,ri.SetUserData,ri.LocalStorageUpdated,ri.SilentIframeClientTokenHelper,ri.SilentHandlerInitiateAuthRequest,ri.SilentHandlerMonitorIframeForHash,ri.SilentHandlerLoadFrame,ri.SilentHandlerLoadFrameSync,ri.StandardInteractionClientCreateAuthCodeClient,ri.StandardInteractionClientGetClientConfiguration,ri.StandardInteractionClientInitializeAuthorizationRequest,ri.GetAuthCodeUrl,ri.HandleCodeResponseFromServer,ri.HandleCodeResponse,ri.UpdateTokenEndpointAuthority,ri.AuthClientAcquireToken,ri.AuthClientExecuteTokenRequest,ri.AuthClientCreateTokenRequestBody,ri.PopTokenGenerateCnf,ri.PopTokenGenerateKid,ri.HandleServerTokenResponse,ri.DeserializeResponse,ri.AuthorityFactoryCreateDiscoveredInstance,ri.AuthorityResolveEndpointsAsync,ri.AuthorityResolveEndpointsFromLocalSources,ri.AuthorityGetCloudDiscoveryMetadataFromNetwork,ri.AuthorityUpdateCloudDiscoveryMetadata,ri.AuthorityGetEndpointMetadataFromNetwork,ri.AuthorityUpdateEndpointMetadata,ri.AuthorityUpdateMetadataWithRegionalInformation,ri.RegionDiscoveryDetectRegion,ri.RegionDiscoveryGetRegionFromIMDS,ri.RegionDiscoveryGetCurrentVersion,ri.AcquireTokenByCodeAsync,ri.GetEndpointMetadataFromNetwork,ri.GetCloudDiscoveryMetadataFromNetworkMeasurement,ri.HandleRedirectPromiseMeasurement,ri.HandleNativeRedirectPromiseMeasurement,ri.UpdateCloudDiscoveryMetadataMeasurement,ri.UsernamePasswordClientAcquireToken,ri.NativeMessageHandlerHandshake,ri.NativeGenerateAuthResult,ri.RemoveHiddenIframe,ri.ClearTokensAndKeysWithClaims,ri.CacheManagerGetRefreshToken,ri.GeneratePkceCodes,ri.GenerateCodeVerifier,ri.GenerateCodeChallengeFromVerifier,ri.Sha256Digest,ri.GetRandomValues,ri.GenerateHKDF,ri.GenerateBaseKey,ri.Base64Decode,ri.UrlEncodeArr,ri.Encrypt,ri.Decrypt;class ra{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class rs{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:1,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new ra}}startPerformanceMeasurement(){return new ra}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}class rl{navigateInternal(e,t){return rl.defaultNavigateWindow(e,t)}navigateExternal(e,t){return rl.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise(e=>{setTimeout(()=>{e(!0)},t.timeout)})}}class rc extends eu{constructor(e,t,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,rc.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=n}}const ru="pkce_not_created",rd="crypto_nonexistent",rh="empty_navigate_uri",rg="hash_empty_error",rf="no_state_in_hash",rp="hash_does_not_contain_known_properties",rm="unable_to_parse_state",ry="state_interaction_type_mismatch",rv="interaction_in_progress",rC="popup_window_error",rw="empty_window_error",rT="user_cancelled",rk="monitor_popup_timeout",rS="monitor_window_timeout",rb="redirect_in_iframe",rI="block_iframe_reload",rE="block_nested_popups",rA="iframe_closed_prematurely",r_="silent_logout_unsupported",rR="no_account_error",rP="silent_prompt_value_error",rN="no_token_request_cache_error",rO="unable_to_parse_token_request_cache_error",rM="no_cached_authority_error",rx="auth_request_not_set_error",rL="invalid_cache_type",rq="non_browser_environment",rU="database_not_open",rD="no_network_connectivity",rH="post_request_failed",rF="get_request_failed",rB="failed_to_parse_response",rz="unable_to_load_token",rK="crypto_key_not_found",rG="auth_code_required",r$="auth_code_or_nativeAccountId_required",rj="spa_code_and_nativeAccountId_present",rV="database_unavailable",rQ="unable_to_acquire_token_from_native_platform",rW="native_handshake_timeout",rY="native_extension_not_installed",rJ="native_connection_not_established",rX="uninitialized_public_client_application",rZ="native_prompt_not_supported",r0="invalid_base64_string",r1="invalid_pop_token_request",r2="failed_to_build_headers",r3="failed_to_parse_headers",r4="For more visit: aka.ms/msaljs/browser-errors",r6={[ru]:"The PKCE code challenge and verifier could not be generated.",[rd]:"The crypto object or function is not available.",[rh]:"Navigation URI is empty. Please check stack trace for more info.",[rg]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${r4}`,[rf]:"Hash does not contain state. Please verify that the request originated from msal.",[rp]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${r4}`,[rm]:"Unable to parse state. Please verify that the request originated from msal.",[ry]:"Hash contains state but the interaction type does not match the caller.",[rv]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${r4}`,[rC]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[rw]:"window.open returned null or undefined window object.",[rT]:"User cancelled the flow.",[rk]:`Token acquisition in popup failed due to timeout.  ${r4}`,[rS]:`Token acquisition in iframe failed due to timeout.  ${r4}`,[rb]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[rI]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${r4}`,[rE]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[rA]:"The iframe being monitored was closed prematurely.",[r_]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[rR]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[rP]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[rN]:"No token request found in cache.",[rO]:"The cached token request could not be parsed.",[rM]:"No cached authority found.",[rx]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[rL]:"Invalid cache type",[rq]:"Login and token requests are not supported in non-browser environments.",[rU]:"Database is not open!",[rD]:"No network connectivity. Check your internet connection.",[rH]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[rF]:"Network request failed. Please check the network trace to determine root cause.",[rB]:"Failed to parse network response. Check network trace.",[rz]:"Error loading token to cache.",[rK]:"Cryptographic Key or Keypair not found in browser storage.",[rG]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[r$]:"An authorization code or nativeAccountId must be provided to this flow.",[rj]:"Request cannot contain both spa code and native account id.",[rV]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[rQ]:`Unable to acquire token from native platform.  ${r4}`,[rW]:"Timed out while attempting to establish connection to browser extension",[rY]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[rJ]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${r4}`,[rX]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${r4}`,[rZ]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[r0]:"Invalid base64 encoded string.",[r1]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[r2]:"Failed to build request headers object.",[r3]:"Failed to parse response headers"};r6[ru],r6[rd],r6[rh],r6[rg],r6[rf],r6[rp],r6[rm],r6[ry],r6[rv],r6[rC],r6[rw],r6[rT],r6[rk],r6[rS],r6[rb],r6[rI],r6[rE],r6[rA],r6[r_],r6[rR],r6[rP],r6[rN],r6[rO],r6[rM],r6[rx],r6[rL],r6[rq],r6[rU],r6[rD],r6[rH],r6[rF],r6[rB],r6[rz],r6[rK],r6[rG],r6[r$],r6[rj],r6[rV],r6[rQ],r6[rW],r6[rY],r6[rJ],r6[rX],r6[rZ],r6[r0],r6[r1];class r8 extends eu{constructor(e,t){super(e,r6[e],t),Object.setPrototypeOf(this,r8.prototype),this.name="BrowserAuthError"}}function r5(e,t){return new r8(e,t)}class r9{async sendGetRequestAsync(e,t){let n,r={},o=0,i=r7(t);try{n=await fetch(e,{method:V.GET,headers:i})}catch(e){throw r5(window.navigator.onLine?rF:rD)}r=oe(n.headers);try{return o=n.status,{headers:r,body:await n.json(),status:o}}catch(e){throw new rc(r5(rB),o,r)}}async sendPostRequestAsync(e,t){let n,r=t&&t.body||"",o=r7(t),i=0,a={};try{n=await fetch(e,{method:V.POST,headers:o,body:r})}catch(e){throw r5(window.navigator.onLine?rH:rD)}a=oe(n.headers);try{return i=n.status,{headers:a,body:await n.json(),status:i}}catch(e){throw new rc(r5(rB),i,a)}}}function r7(e){try{let t=new Headers;if(!(e&&e.headers))return t;let n=e.headers;return Object.entries(n).forEach(([e,n])=>{t.append(e,n)}),t}catch(e){throw r5(r2)}}function oe(e){try{let t={};return e.forEach((e,n)=>{t[n]=e}),t}catch(e){throw r5(r3)}}function ot(e){return encodeURIComponent(or(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function on(e){return oo(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function or(e){return oo(new TextEncoder().encode(e))}function oo(e){return btoa(Array.from(e,e=>String.fromCodePoint(e)).join(""))}function oi(e){return new TextDecoder().decode(oa(e))}function oa(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw r5(r0)}let n=atob(t);return Uint8Array.from(n,e=>e.codePointAt(0)||0)}const os="AES-GCM",ol="HKDF",oc="SHA-256",ou=new Uint8Array([1,0,1]),od="0123456789abcdef",oh=new Uint32Array(1),og="encrypt",of="decrypt",op={name:"RSASSA-PKCS1-v1_5",hash:oc,modulusLength:2048,publicExponent:ou};async function om(e,t,n){t?.addQueueMeasurement(ri.Sha256Digest,n);let r=new TextEncoder().encode(e);return window.crypto.subtle.digest(oc,r)}function oy(e){return window.crypto.getRandomValues(e)}function ov(){return window.crypto.getRandomValues(oh),oh[0]}function oC(){let e=Date.now(),t=1024*ov()+(1023&ov()),n=new Uint8Array(16),r=Math.trunc(t/0x40000000),o=t&0x40000000-1,i=ov();n[0]=e/0x10000000000,n[1]=e/0x100000000,n[2]=e/0x1000000,n[3]=e/65536,n[4]=e/256,n[5]=e,n[6]=112|r>>>8,n[7]=r,n[8]=128|o>>>24,n[9]=o>>>16,n[10]=o>>>8,n[11]=o,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i;let a="";for(let e=0;e<n.length;e++)a+=od.charAt(n[e]>>>4),a+=od.charAt(15&n[e]),(3===e||5===e||7===e||9===e)&&(a+="-");return a}async function ow(e,t){return window.crypto.subtle.generateKey(op,e,t)}async function oT(e){return window.crypto.subtle.exportKey("jwk",e)}async function ok(e,t,n){return window.crypto.subtle.importKey("jwk",e,op,t,n)}async function oS(e,t){return window.crypto.subtle.sign(op,e,t)}async function ob(){let e=await window.crypto.subtle.generateKey({name:os,length:256},!0,[og,of]);return window.crypto.subtle.exportKey("raw",e)}async function oI(e){return window.crypto.subtle.importKey("raw",e,ol,!1,["deriveKey"])}async function oE(e,t,n){return window.crypto.subtle.deriveKey({name:ol,salt:t,hash:oc,info:new TextEncoder().encode(n)},e,{name:os,length:256},!1,[og,of])}async function oA(e,t,n){let r=new TextEncoder().encode(t),o=window.crypto.getRandomValues(new Uint8Array(16)),i=await oE(e,o,n),a=await window.crypto.subtle.encrypt({name:os,iv:new Uint8Array(12)},i,r);return{data:on(new Uint8Array(a)),nonce:on(o)}}async function o_(e,t,n,r){let o=oa(r),i=await oE(e,oa(t),n),a=await window.crypto.subtle.decrypt({name:os,iv:new Uint8Array(12)},i,o);return new TextDecoder().decode(a)}async function oR(e){return on(new Uint8Array(await om(e)))}function oP(){return window.parent!==window}function oN(){return"undefined"!=typeof window&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function oO(){if("undefined"==typeof window)throw r5(rq)}function oM(e){if(!e)throw r5(rX)}function ox(e){oO(),function(){if(nV.hashContainsKnownProperties(window.location.hash)&&oP())throw r5(rI)}(),function(){if("undefined"!=typeof window&&window.opener&&window.opener!==window&&"string"==typeof window.name&&0===window.name.indexOf(`${K.POPUP_NAME_PREFIX}.`))throw r5(rE)}(),oM(e)}function oL(e,t){if(ox(e),!function(e){if(oP()&&!e)throw r5(rb)}(t.system.allowRedirectInIframe),t.cache.cacheLocation===j.MemoryStorage&&!t.cache.storeAuthStateInCookie)throw ey(ef)}function oq(e){let t=document.createElement("link");t.rel="preconnect",t.href=new URL(e).origin,t.crossOrigin="anonymous",document.head.appendChild(t),window.setTimeout(()=>{try{document.head.removeChild(t)}catch{}},1e4)}const oU="4.8.0";class oD{static loggerCallback(e,t){switch(e){case s.Error:console.error(t);return;case s.Info:console.info(t);return;case s.Verbose:console.debug(t);return;case s.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){let t;this.browserEnvironment="undefined"!=typeof window,this.config=function({auth:e,cache:t,system:n,telemetry:r},o){let i={clientId:y.EMPTY_STRING,authority:`${y.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:y.EMPTY_STRING,authorityMetadata:y.EMPTY_STRING,redirectUri:"undefined"!=typeof window?oN():"",postLogoutRedirectUri:y.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:tU.AAD,OIDCOptions:{serverResponseType:E.FRAGMENT,defaultScopes:[y.OPENID_SCOPE,y.PROFILE_SCOPE,y.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:tj.None,tenant:y.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},a={cacheLocation:j.SessionStorage,temporaryCacheLocation:j.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!t&&t.cacheLocation===j.LocalStorage,claimsBasedCachingEnabled:!1},l={loggerCallback:()=>{},logLevel:s.Info,piiLoggingEnabled:!1},c={...{...n6,loggerOptions:l,networkClient:o?new r9:ro,navigationClient:new rl,loadFrameTimeout:0,windowHashTimeout:n?.loadFrameTimeout||6e4,iframeHashTimeout:n?.loadFrameTimeout||1e4,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:n?.nativeBrokerHandshakeTimeout||2e3,pollIntervalMilliseconds:K.DEFAULT_POLL_INTERVAL_MS},...n,loggerOptions:n?.loggerOptions||l},u={application:{appName:y.EMPTY_STRING,appVersion:y.EMPTY_STRING},client:new rs};if(e?.protocolMode!==tU.OIDC&&e?.OIDCOptions&&new ei(c.loggerOptions).warning(JSON.stringify(nl(tV.cannotSetOIDCOptions))),e?.protocolMode&&e.protocolMode!==tU.AAD&&c?.allowPlatformBroker)throw nl(tV.cannotAllowPlatformBroker);return{auth:{...i,...e,OIDCOptions:{...i.OIDCOptions,...e?.OIDCOptions}},cache:{...a,...t},system:c,telemetry:{...u,...r}}}(e,this.browserEnvironment);try{t=window[j.SessionStorage]}catch(e){}let n=t?.getItem("msal.browser.log.level"),r=t?.getItem("msal.browser.log.pii")?.toLowerCase(),o="true"===r||"false"!==r&&void 0,i={...this.config.system.loggerOptions},a=n&&Object.keys(s).includes(n)?s[n]:void 0;a&&(i.loggerCallback=oD.loggerCallback,i.logLevel=a),void 0!==o&&(i.piiLoggingEnabled=o),this.logger=new ei(i,"@azure/msal-browser",oU),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}const oH={NestedAppAuthUnavailable:"NESTED_APP_AUTH_UNAVAILABLE"};class oF{static async initializeNestedAppAuthBridge(){if(void 0===window)throw Error("window is undefined");if(void 0===window.nestedAppAuthBridge)throw Error("window.nestedAppAuthBridge is undefined");try{window.nestedAppAuthBridge.addEventListener("message",e=>{let t="string"==typeof e?e:e.data,n=JSON.parse(t),r=oF.bridgeRequests.find(e=>e.requestId===n.requestId);void 0!==r&&(oF.bridgeRequests.splice(oF.bridgeRequests.indexOf(r),1),n.success?r.resolve(n):r.reject(n.error))});let e=await new Promise((e,t)=>{let n=oF.buildRequest("GetInitContext"),r={requestId:n.requestId,method:n.method,resolve:e,reject:t};oF.bridgeRequests.push(r),window.nestedAppAuthBridge.postMessage(JSON.stringify(n))});return oF.validateBridgeResultOrThrow(e.initContext)}catch(e){throw window.console.log(e),e}}getTokenInteractive(e){return this.getToken("GetTokenPopup",e)}getTokenSilent(e){return this.getToken("GetToken",e)}async getToken(e,t){let n=await this.sendRequest(e,{tokenParams:t});return{token:oF.validateBridgeResultOrThrow(n.token),account:oF.validateBridgeResultOrThrow(n.account)}}getHostCapabilities(){return this.capabilities??null}getAccountContext(){return this.accountContext?this.accountContext:null}static buildRequest(e,t){return{messageType:"NestedAppAuthRequest",method:e,requestId:oC(),sendTime:Date.now(),clientLibrary:K.MSAL_SKU,clientLibraryVersion:oU,...t}}sendRequest(e,t){let n=oF.buildRequest(e,t);return new Promise((e,t)=>{let r={requestId:n.requestId,method:n.method,resolve:e,reject:t};oF.bridgeRequests.push(r),window.nestedAppAuthBridge.postMessage(JSON.stringify(n))})}static validateBridgeResultOrThrow(e){if(void 0===e)throw{status:oH.NestedAppAuthUnavailable};return e}constructor(e,t,n,r){this.sdkName=e,this.sdkVersion=t,this.accountContext=n,this.capabilities=r}static async create(){let e=await oF.initializeNestedAppAuthBridge();return new oF(e.sdkName,e.sdkVersion,e.accountContext,e.capabilities)}}oF.bridgeRequests=[];class oB extends oD{constructor(){super(...arguments),this.bridgeProxy=void 0,this.accountContext=null}getModuleName(){return oB.MODULE_NAME}getId(){return oB.ID}getBridgeProxy(){return this.bridgeProxy}async initialize(){try{if("undefined"!=typeof window){"function"==typeof window.__initializeNestedAppAuth&&await window.__initializeNestedAppAuth();let e=await oF.create();this.accountContext=e.getAccountContext(),this.bridgeProxy=e,this.available=void 0!==e}}catch(e){this.logger.infoPii(`Could not initialize Nested App Auth bridge (${e})`)}return this.logger.info(`Nested App Auth Bridge available: ${this.available}`),this.available}}oB.MODULE_NAME="",oB.ID="NestedAppOperatingContext";class oz extends oD{getModuleName(){return oz.MODULE_NAME}getId(){return oz.ID}async initialize(){return this.available="undefined"!=typeof window,this.available}}oz.MODULE_NAME="",oz.ID="StandardOperatingContext";const oK="missing_kid_error",oG="missing_alg_error",o$={[oK]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[oG]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class oj extends eu{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,oj.prototype)}}function oV(e){return new oj(e,o$[e])}class oQ{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw oV(oK);if(!e.alg)throw oV(oG);return JSON.stringify(new oQ({typ:e.typ||z.Pop,kid:e.kid,alg:e.alg}))}}class oW{constructor(){this.dbName=et,this.version=1,this.tableName=en,this.dbOpen=!1}async open(){return new Promise((e,t)=>{let n=window.indexedDB.open(this.dbName,this.version);n.addEventListener("upgradeneeded",e=>{e.target.result.createObjectStore(this.tableName)}),n.addEventListener("success",t=>{this.db=t.target.result,this.dbOpen=!0,e()}),n.addEventListener("error",()=>t(r5(rV)))})}closeConnection(){let e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((t,n)=>{if(!this.db)return n(r5(rU));let r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);r.addEventListener("success",e=>{this.closeConnection(),t(e.target.result)}),r.addEventListener("error",e=>{this.closeConnection(),n(e)})})}async setItem(e,t){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(r5(rU));let o=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);o.addEventListener("success",()=>{this.closeConnection(),n()}),o.addEventListener("error",e=>{this.closeConnection(),r(e)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((t,n)=>{if(!this.db)return n(r5(rU));let r=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);r.addEventListener("success",()=>{this.closeConnection(),t()}),r.addEventListener("error",e=>{this.closeConnection(),n(e)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(r5(rU));let n=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();n.addEventListener("success",t=>{this.closeConnection(),e(t.target.result)}),n.addEventListener("error",e=>{this.closeConnection(),t(e)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((t,n)=>{if(!this.db)return n(r5(rU));let r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);r.addEventListener("success",e=>{this.closeConnection(),t(1===e.target.result)}),r.addEventListener("error",e=>{this.closeConnection(),n(e)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{let n=window.indexedDB.deleteDatabase(et),r=setTimeout(()=>t(!1),200);n.addEventListener("success",()=>(clearTimeout(r),e(!0))),n.addEventListener("blocked",()=>(clearTimeout(r),e(!0))),n.addEventListener("error",()=>(clearTimeout(r),t(!1)))})}}class oY{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){let e=[];return this.cache.forEach((t,n)=>{e.push(n)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}class oJ{constructor(e){this.inMemoryCache=new oY,this.indexedDBCache=new oW,this.logger=e}handleDatabaseAccessError(e){if(e instanceof r8&&e.errorCode===rV)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){let t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(e){this.handleDatabaseAccessError(e)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(e){this.handleDatabaseAccessError(e)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(e){this.handleDatabaseAccessError(e)}}async getKeys(){let e=this.inMemoryCache.getKeys();if(0===e.length)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(e){this.handleDatabaseAccessError(e)}return e}async containsKey(e){let t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(e){this.handleDatabaseAccessError(e)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");let e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}class oX{constructor(e,t,n){this.logger=e,function(e){if(!window)throw r5(rq);if(!window.crypto)throw r5(rd);if(!e&&!window.crypto.subtle)throw r5(rd,"crypto_subtle_undefined")}(n??!1),this.cache=new oJ(this.logger),this.performanceClient=t}createNewGuid(){return oC()}base64Encode(e){return or(e)}base64Decode(e){return oi(e)}base64UrlEncode(e){return ot(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){let t=this.performanceClient?.startMeasurement(ri.CryptoOptsGetPublicKeyThumbprint,e.correlationId),n=await ow(oX.EXTRACTABLE,oX.POP_KEY_USAGES),r=await oT(n.publicKey),o=oZ({e:r.e,kty:r.kty,n:r.n}),i=await this.hashString(o),a=await oT(n.privateKey),s=await ok(a,!1,["sign"]);return await this.cache.setItem(i,{privateKey:s,publicKey:n.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),t&&t.end({success:!0}),i}async removeTokenBindingKey(e){return await this.cache.removeItem(e),!await this.cache.containsKey(e)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,n,r){let o=this.performanceClient?.startMeasurement(ri.CryptoOptsSignJwt,r),i=await this.cache.getItem(t);if(!i)throw r5(rK);let a=await oT(i.publicKey),s=oZ(a),l=ot(JSON.stringify({kid:t})),c=ot(oQ.getShrHeaderString({...n?.header,alg:a.alg,kid:l}));e.cnf={jwk:JSON.parse(s)};let u=ot(JSON.stringify(e)),d=`${c}.${u}`,h=new TextEncoder().encode(d),g=on(new Uint8Array(await oS(i.privateKey,h))),f=`${d}.${g}`;return o&&o.end({success:!0}),f}async hashString(e){return oR(e)}}function oZ(e){return JSON.stringify(e,Object.keys(e).sort())}oX.POP_KEY_USAGES=["sign","verify"],oX.EXTRACTABLE=!0;const o0=(e,t,n,r,o)=>(...i)=>{n.trace(`Executing function ${t}`);let a=r?.startMeasurement(t,o);o&&r?.incrementFields({[t+"CallCount"]:1},o);try{let r=e(...i);return a?.end({success:!0}),n.trace(`Returning result from ${t}`),r}catch(e){n.trace(`Error occurred in ${t}`);try{n.trace(JSON.stringify(e))}catch(e){n.trace("Unable to print error message.")}throw a?.end({success:!1},e),e}},o1=(e,t,n,r,o)=>(...i)=>{n.trace(`Executing function ${t}`);let a=r?.startMeasurement(t,o);return o&&r?.incrementFields({[t+"CallCount"]:1},o),r?.setPreQueueTime(t,o),e(...i).then(e=>(n.trace(`Returning result from ${t}`),a?.end({success:!0}),e)).catch(e=>{n.trace(`Error occurred in ${t}`);try{n.trace(JSON.stringify(e))}catch(e){n.trace("Unable to print error message.")}throw a?.end({success:!1},e),e})};class o2{constructor(e,t,n,r){this.networkInterface=e,this.logger=t,this.performanceClient=n,this.correlationId=r}async detectRegion(e,t){this.performanceClient?.addQueueMeasurement(ri.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)t.region_source=H.ENVIRONMENT_VARIABLE;else{let e=o2.IMDS_OPTIONS;try{let r=await o1(this.getRegionFromIMDS.bind(this),ri.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(y.IMDS_VERSION,e);if(r.status===D.httpSuccess&&(n=r.body,t.region_source=H.IMDS),r.status===D.httpBadRequest){let r=await o1(this.getCurrentVersion.bind(this),ri.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(e);if(!r)return t.region_source=H.FAILED_AUTO_DETECTION,null;let o=await o1(this.getRegionFromIMDS.bind(this),ri.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(r,e);o.status===D.httpSuccess&&(n=o.body,t.region_source=H.IMDS)}}catch(e){return t.region_source=H.FAILED_AUTO_DETECTION,null}}return n||(t.region_source=H.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,t){return this.performanceClient?.addQueueMeasurement(ri.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${y.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,y.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(ri.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let t=await this.networkInterface.sendGetRequestAsync(`${y.IMDS_ENDPOINT}?format=json`,e);if(t.status===D.httpBadRequest&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0)return t.body["newest-versions"][0];return null}catch(e){return null}}}o2.IMDS_OPTIONS={headers:{Metadata:"true"}};class o3{constructor(e,t,n,r,o,i,a,s){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=a,this.correlationId=i,this.managedIdentity=s||!1,this.regionDiscovery=new o2(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(y.CIAM_AUTH_URL))return tL.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case y.ADFS:return tL.Adfs;case y.DSTS:return tL.Dsts}return tL.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new nV(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw tR(eJ)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw tR(eJ)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw tR(eJ)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw tR(tw);return this.replacePath(this.metadata.end_session_endpoint)}throw tR(eJ)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw tR(eJ)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw tR(eJ)}canReplaceTenant(e){return 1===e.PathSegments.length&&!o3.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===tL.Default&&this.protocolMode===tU.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,n=new nV(this.metadata.canonical_authority).getUrlComponents(),r=n.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((e,o)=>{let i=r[o];if(0===o&&this.canReplaceTenant(n)){let e=new nV(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];i!==e&&(this.logger.verbose(`Replacing tenant domain name ${i} with id ${e}`),i=e)}e!==i&&(t=t.replace(`/${i}/`,`/${e}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===tL.Adfs||this.protocolMode!==tU.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(ri.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=await o1(this.updateCloudDiscoveryMetadata.bind(this),ri.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await o1(this.updateEndpointMetadata.bind(this),ri.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:nU(),jwks_uri:""}),e}updateCachedMetadata(e,t,n){t!==M.CACHE&&n?.source!==M.CACHE&&(e.expiresAt=nU(),e.canonical_authority=this.canonicalAuthority);let r=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(r,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(ri.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t)return t.source===M.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata&&(nD(e,await o1(this.updateMetadataWithRegionalInformation.bind(this),ri.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata),!1),e.canonical_authority=this.canonicalAuthority),t.source;let n=await o1(this.getEndpointMetadataFromNetwork.bind(this),ri.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await o1(this.updateMetadataWithRegionalInformation.bind(this),ri.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),nD(e,n,!0),M.NETWORK;throw tR(eZ,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),nD(e,t,!1),{source:M.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let t=this.getEndpointMetadataFromHardcodedValues();if(t)return nD(e,t,!1),{source:M.HARDCODED_VALUES,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=nF(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:M.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new nV(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw nl(t5)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(ri.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${e}`);try{var t;let n=await this.networkInterface.sendGetRequestAsync(e,{});if((t=n.body).hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri"))return n.body;return this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null}catch(e){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${e}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in nQ?nQ[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(ri.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==y.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=F.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,o3.replaceWithRegionalInformation(e,t);let n=await o1(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),ri.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=F.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,o3.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=F.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(ri.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let n=await o1(this.getCloudDiscoveryMetadataFromNetwork.bind(this),ri.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return nH(e,n,!0),M.NETWORK;throw nl(t9)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||y.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||y.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||y.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),nH(e,t,!1),M.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{var n;let t=(n=this.hostnameAndPort,nX(nW.metadata,n));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),nH(e,t,!1),M.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let r=nF(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),M.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===tL.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),o3.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=nX(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),nl(t8)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),o3.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(ri.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${y.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t=null;try{var n,r;let o,i,a=await this.networkInterface.sendGetRequestAsync(e,{});if((n=a.body).hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata"))i=(o=a.body).metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else{if(!((r=a.body).hasOwnProperty("error")&&r.hasOwnProperty("error_description")))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${a.status}`),(o=a.body).error===y.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),i=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),t=nX(i,this.hostnameAndPort)}catch(e){return e instanceof eu?this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${e.errorCode}
Error Description: ${e.errorMessage}`):this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${e.name}
Error Description: ${e.message}`),null}return t||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),t=o3.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),t}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(e=>e&&nV.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let n;if(t&&t.azureCloudInstance!==tj.None){let e=t.tenant?t.tenant:y.DEFAULT_COMMON_TENANT;n=`${t.azureCloudInstance}/${e}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return y.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw tR(eJ)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return nY.has(e)}static isPublicCloudAuthority(e){return y.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,n){let r=new nV(e);r.validateAsUri();let o=r.getUrlComponents(),i=`${t}.${o.HostNameAndPort}`;this.isPublicCloudAuthority(o.HostNameAndPort)&&(i=`${t}.${y.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=nV.constructAuthorityUriFromObject({...r.getUrlComponents(),HostNameAndPort:i}).urlString;return n?`${a}?${n}`:a}static replaceWithRegionalInformation(e,t){let n={...e};return n.authorization_endpoint=o3.buildRegionalAuthorityString(n.authorization_endpoint,t),n.token_endpoint=o3.buildRegionalAuthorityString(n.token_endpoint,t),n.end_session_endpoint&&(n.end_session_endpoint=o3.buildRegionalAuthorityString(n.end_session_endpoint,t)),n}static transformCIAMAuthority(e){let t=e,n=new nV(e).getUrlComponents();if(0===n.PathSegments.length&&n.HostNameAndPort.endsWith(y.CIAM_AUTH_URL)){let e=n.HostNameAndPort.split(".")[0];t=`${t}${e}${y.AAD_TENANT_DOMAIN_SUFFIX}`}return t}}function o4(e){return e.endsWith(y.FORWARD_SLASH)?e:`${e}${y.FORWARD_SLASH}`}function o6(e,t,n){return{clientId:e,authority:t.authority,scopes:t.scopes,homeAccountIdentifier:n,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,embeddedClientId:t.embeddedClientId||t.tokenBodyParameters?.clientId}}o3.reservedTenantDomains=new Set(["{tenant}","{tenantid}",S.COMMON,S.CONSUMERS,S.ORGANIZATIONS]);const o8={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};class o5{static setRequestState(e,t,n){let r=o5.generateLibraryState(e,n);return t?`${r}${y.RESOURCE_DELIM}${t}`:r}static generateLibraryState(e,t){if(!e)throw tR(td);let n={id:e.createNewGuid()};t&&(n.meta=t);let r=JSON.stringify(n);return e.base64Encode(r)}static parseRequestState(e,t){if(!e)throw tR(td);if(!t)throw tR(e1);try{let n=t.split(y.RESOURCE_DELIM),r=n[0],o=n.length>1?n.slice(1).join(y.RESOURCE_DELIM):y.EMPTY_STRING,i=e.base64Decode(r),a=JSON.parse(i);return{userRequestState:o||y.EMPTY_STRING,libraryState:a}}catch(e){throw tR(e1)}}}const o9={Lax:"Lax",None:"None"};class o7{initialize(){return Promise.resolve()}getItem(e){let t=`${encodeURIComponent(e)}`,n=document.cookie.split(";");for(let e=0;e<n.length;e++){let[r,...o]=decodeURIComponent(n[e]).trim().split("="),i=o.join("=");if(r===t)return i}return""}getUserData(){throw tR(ej.methodNotImplemented)}setItem(e,t,n,r=!0,o=o9.Lax){let i=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${o};`;if(n){var a;let e=(a=n,new Date(new Date().getTime()+864e5*a).toUTCString());i+=`expires=${e};`}(r||o===o9.None)&&(i+="Secure;"),document.cookie=i}async setUserData(){return Promise.reject(tR(ej.methodNotImplemented))}removeItem(e){this.setItem(e,"",-1)}getKeys(){let e=document.cookie.split(";"),t=[];return e.forEach(e=>{let n=decodeURIComponent(e).trim().split("=");t.push(n[0])}),t}containsKey(e){return this.getKeys().includes(e)}}function ie(e){let t=e.getItem(W.ACCOUNT_KEYS);return t?JSON.parse(t):[]}function it(e,t){let n=t.getItem(`${W.TOKEN_KEYS}.${e}`);if(n){let e=JSON.parse(n);if(e&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("accessToken")&&e.hasOwnProperty("refreshToken"))return e}return{idToken:[],accessToken:[],refreshToken:[]}}const ir="msal.cache.encryption";class io{constructor(e,t,n){if(!window.localStorage)throw ey(eh);this.memoryStorage=new oY,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=n,this.broadcast=new BroadcastChannel("msal.broadcast.cache")}async initialize(e){this.initialized=!0;let t=new o7,n=t.getItem(ir),r={key:"",id:""};if(n)try{r=JSON.parse(n)}catch(e){}if(r.key&&r.id){let t=o0(oa,ri.Base64Decode,this.logger,this.performanceClient,e)(r.key);this.encryptionCookie={id:r.id,key:await o1(oI,ri.GenerateHKDF,this.logger,this.performanceClient,e)(t)},await o1(this.importExistingCache.bind(this),ri.ImportExistingCache,this.logger,this.performanceClient,e)(e)}else{this.clear();let n=oC(),r=await o1(ob,ri.GenerateBaseKey,this.logger,this.performanceClient,e)(),o=o0(on,ri.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(r));this.encryptionCookie={id:n,key:await o1(oI,ri.GenerateHKDF,this.logger,this.performanceClient,e)(r)},t.setItem(ir,JSON.stringify({id:n,key:o}),0,!0,o9.None)}this.broadcast.addEventListener("message",this.updateCache.bind(this))}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw r5(rX);return this.memoryStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}async setUserData(e,t,n){if(!this.initialized||!this.encryptionCookie)throw r5(rX);let{data:r,nonce:o}=await o1(oA,ri.Encrypt,this.logger,this.performanceClient,n)(this.encryptionCookie.key,t,this.getContext(e)),i={id:this.encryptionCookie.id,nonce:o,data:r};this.memoryStorage.setItem(e,t),this.setItem(e,JSON.stringify(i)),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),ie(this).forEach(e=>this.removeItem(e));let e=it(this.clientId,this);e.idToken.forEach(e=>this.removeItem(e)),e.accessToken.forEach(e=>this.removeItem(e)),e.refreshToken.forEach(e=>this.removeItem(e)),this.getKeys().forEach(e=>{(e.startsWith(y.CACHE_PREFIX)||-1!==e.indexOf(this.clientId))&&this.removeItem(e)})}async importExistingCache(e){if(!this.encryptionCookie)return;let t=ie(this);t=await this.importArray(t,e),this.setItem(W.ACCOUNT_KEYS,JSON.stringify(t));let n=it(this.clientId,this);n.idToken=await this.importArray(n.idToken,e),n.accessToken=await this.importArray(n.accessToken,e),n.refreshToken=await this.importArray(n.refreshToken,e),this.setItem(`${W.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(n))}async getItemFromEncryptedCache(e,t){let n;if(!this.encryptionCookie)return null;let r=this.getItem(e);if(!r)return null;try{n=JSON.parse(r)}catch(e){return null}return n.id&&n.nonce&&n.data?n.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):o1(o_,ri.Decrypt,this.logger,this.performanceClient,t)(this.encryptionCookie.key,n.nonce,this.getContext(e),n.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),null)}async importArray(e,t){let n=[],r=[];return e.forEach(e=>{let o=this.getItemFromEncryptedCache(e,t).then(t=>{t?(this.memoryStorage.setItem(e,t),n.push(e)):this.removeItem(e)});r.push(o)}),await Promise.all(r),n}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");let t=this.performanceClient.startMeasurement(ri.LocalStorageUpdated);t.add({isBackground:!0});let{key:n,value:r,context:o}=e.data;if(!n){this.logger.error("Broadcast event missing key"),t.end({success:!1,errorCode:"noKey"});return}if(o&&o!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${o}`),t.end({success:!1,errorCode:"contextMismatch"});return}r?(this.memoryStorage.setItem(n,r),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(n),this.logger.verbose("Removed item from internal cache")),t.end({success:!0})}}class ii{constructor(){if(!window.sessionStorage)throw ey(eh)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}function ia(e,t){if(!t)return null;try{return o5.parseRequestState(e,t).libraryState.meta}catch(e){throw tR(ej.invalidState)}}class is extends n3{constructor(e,t,n,r,o,i,a){super(e,n,r,a),this.cacheConfig=t,this.logger=r,this.internalStorage=new oY,this.browserStorage=il(e,t.cacheLocation,r,o),this.temporaryCacheStorage=il(e,t.temporaryCacheLocation,r,o),this.cookieStorage=new o7,this.performanceClient=o,this.eventHandler=i}async initialize(e){await this.browserStorage.initialize(e)}validateAndParseJson(e){try{let t=JSON.parse(e);return t&&"object"==typeof t?t:null}catch(e){return null}}getAccount(e){this.logger.trace("BrowserCacheManager.getAccount called");let t=this.browserStorage.getUserData(e);if(!t)return this.removeAccountKeyFromMap(e),null;let n=this.validateAndParseJson(t);return n&&tD.isAccountEntity(n)?n3.toObject(new tD,n):(this.removeAccountKeyFromMap(e),null)}async setAccount(e,t){this.logger.trace("BrowserCacheManager.setAccount called");let n=e.generateAccountKey();await o1(this.browserStorage.setUserData.bind(this.browserStorage),ri.SetUserData,this.logger,this.performanceClient)(n,JSON.stringify(e),t);let r=this.addAccountKeyToMap(n);this.cacheConfig.cacheLocation===j.LocalStorage&&r&&this.eventHandler.emitEvent(ew.ACCOUNT_ADDED,void 0,e.getAccountInfo())}getAccountKeys(){return ie(this.browserStorage)}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);let t=this.getAccountKeys();return -1===t.indexOf(e)?(t.push(e),this.browserStorage.setItem(W.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);let t=this.getAccountKeys(),n=t.indexOf(e);n>-1?(t.splice(n,1),this.browserStorage.setItem(W.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}async removeAccountContext(e){await super.removeAccountContext(e),this.cacheConfig.cacheLocation===j.LocalStorage&&this.eventHandler.emitEvent(ew.ACCOUNT_REMOVED,void 0,e.getAccountInfo())}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,P.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,P.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,P.REFRESH_TOKEN)}getTokenKeys(){return it(this.clientId,this.browserStorage)}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");let n=this.getTokenKeys();switch(t){case P.ID_TOKEN:-1===n.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),n.idToken.push(e));break;case P.ACCESS_TOKEN:-1===n.accessToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),n.accessToken.push(e));break;case P.REFRESH_TOKEN:-1===n.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),n.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${t}`),tR(ej.unexpectedCredentialType)}this.browserStorage.setItem(`${W.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(n))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");let n=this.getTokenKeys();switch(t){case P.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);let r=n.idToken.indexOf(e);r>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),n.idToken.splice(r,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case P.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);let o=n.accessToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),n.accessToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case P.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);let i=n.refreshToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),n.refreshToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${t}`),tR(ej.unexpectedCredentialType)}this.browserStorage.setItem(`${W.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(n))}getIdTokenCredential(e){let t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,P.ID_TOKEN),null;let n=this.validateAndParseJson(t);return n&&nh.isIdTokenEntity(n)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,P.ID_TOKEN),null)}async setIdTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");let n=nh.generateCredentialKey(e);await o1(this.browserStorage.setUserData.bind(this.browserStorage),ri.SetUserData,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,P.ID_TOKEN)}getAccessTokenCredential(e){let t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,P.ACCESS_TOKEN),null;let n=this.validateAndParseJson(t);return n&&nh.isAccessTokenEntity(n)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,P.ACCESS_TOKEN),null)}async setAccessTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");let n=nh.generateCredentialKey(e);await o1(this.browserStorage.setUserData.bind(this.browserStorage),ri.SetUserData,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,P.ACCESS_TOKEN)}getRefreshTokenCredential(e){let t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,P.REFRESH_TOKEN),null;let n=this.validateAndParseJson(t);return n&&nh.isRefreshTokenEntity(n)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,P.REFRESH_TOKEN),null)}async setRefreshTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");let n=nh.generateCredentialKey(e);await o1(this.browserStorage.setUserData.bind(this.browserStorage),ri.SetUserData,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,P.REFRESH_TOKEN)}getAppMetadata(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;let n=this.validateAndParseJson(t);return n&&nh.isAppMetadataEntity(e,n)?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");let t=nh.generateAppMetadataKey(e);this.browserStorage.setItem(t,JSON.stringify(e))}getServerTelemetry(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;let n=this.validateAndParseJson(t);return n&&nh.isServerTelemetryEntity(e,n)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),n):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.browserStorage.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){let t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;let n=this.validateAndParseJson(t);return n&&nh.isAuthorityMetadataEntity(e,n)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),n):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(e=>this.isAuthorityMetadata(e))}setWrapperMetadata(e,t){this.internalStorage.setItem(Y,e),this.internalStorage.setItem(J,t)}getWrapperMetadata(){return[this.internalStorage.getItem(Y)||y.EMPTY_STRING,this.internalStorage.getItem(J)||y.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){let e=this.generateCacheKey(k),t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;let n=this.validateAndParseJson(t);return n?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){let t=this.generateCacheKey(k);if(e){this.logger.verbose("setActiveAccount: Active account set");let n={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(n))}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t);this.eventHandler.emitEvent(ew.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;let n=this.validateAndParseJson(t);return n&&nh.isThrottlingEntity(e,n)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),n):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.browserStorage.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){let n=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){let e=this.cookieStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),e}let r=this.temporaryCacheStorage.getItem(n);if(!r){if(this.cacheConfig.cacheLocation===j.LocalStorage){let e=this.browserStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),e}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),r}setTemporaryCache(e,t,n){let r=n?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(r,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(r,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach(e=>{(-1!==e.indexOf(y.CACHE_PREFIX)||-1!==e.indexOf(this.clientId))&&this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{(-1!==e.indexOf(y.CACHE_PREFIX)||-1!==e.indexOf(this.clientId))&&this.browserStorage.removeItem(e)}),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e,t){e.addQueueMeasurement(ri.ClearTokensAndKeysWithClaims,t);let n=this.getTokenKeys(),r=[];n.accessToken.forEach(e=>{let t=this.getAccessTokenCredential(e);t?.requestedClaimsHash&&e.includes(t.requestedClaimsHash.toLowerCase())&&r.push(this.removeAccessToken(e))}),await Promise.all(r),r.length>0&&this.logger.warning(`${r.length} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):nB.startsWith(e,y.CACHE_PREFIX)?e:`${y.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){let{libraryState:{id:t}}=o5.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Q.AUTHORITY}.${t}`)}generateNonceKey(e){let{libraryState:{id:t}}=o5.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Q.NONCE_IDTOKEN}.${t}`)}generateStateKey(e){let{libraryState:{id:t}}=o5.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Q.REQUEST_STATE}.${t}`)}getCachedAuthority(e){let t=this.generateStateKey(e),n=this.getTemporaryCache(t);if(!n)return null;let r=this.generateAuthorityKey(n);return this.getTemporaryCache(r)}updateCacheEntries(e,t,n,r,o){this.logger.trace("BrowserCacheManager.updateCacheEntries called");let i=this.generateStateKey(e);this.setTemporaryCache(i,e,!1);let a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);let s=this.generateAuthorityKey(e);if(this.setTemporaryCache(s,n,!1),o){let e={credential:o.homeAccountId,type:o8.HOME_ACCOUNT_ID};this.setTemporaryCache(Q.CCS_CREDENTIAL,JSON.stringify(e),!0)}else if(r){let e={credential:r,type:o8.UPN};this.setTemporaryCache(Q.CCS_CREDENTIAL,JSON.stringify(e),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(t=>{-1!==t.indexOf(e)&&this.removeTemporaryItem(t)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(Q.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Q.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Q.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Q.CORRELATION_ID)),this.removeTemporaryItem(this.generateCacheKey(Q.CCS_CREDENTIAL)),this.removeTemporaryItem(this.generateCacheKey(Q.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){let t=this.generateStateKey(e),n=this.temporaryCacheStorage.getItem(t);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${n}`),this.resetRequestCache(n||y.EMPTY_STRING)}}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(t=>{if(-1===t.indexOf(Q.REQUEST_STATE))return;let n=this.temporaryCacheStorage.getItem(t);if(!n)return;let r=ia(this.cryptoImpl,n);r&&r.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${n}`),this.resetRequestCache(n))}),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");let t=or(JSON.stringify(e));this.setTemporaryCache(Q.REQUEST_PARAMS,t,!0)}getCachedRequest(e){let t;this.logger.trace("BrowserCacheManager.getCachedRequest called");let n=this.getTemporaryCache(Q.REQUEST_PARAMS,!0);if(!n)throw r5(rN);try{t=JSON.parse(oi(n))}catch(e){throw this.logger.errorPii(`Attempted to parse: ${n}`),this.logger.error(`Parsing cached token request threw with error: ${e}`),r5(rO)}if(this.removeTemporaryItem(this.generateCacheKey(Q.REQUEST_PARAMS)),!t.authority){let n=this.generateAuthorityKey(e),r=this.getTemporaryCache(n);if(!r)throw r5(rM);t.authority=r}return t}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");let e=this.getTemporaryCache(Q.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;let t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){let t=this.getInteractionInProgress();return e?t===this.clientId:!!t}getInteractionInProgress(){let e=`${y.CACHE_PREFIX}.${Q.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){let t=`${y.CACHE_PREFIX}.${Q.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw r5(rv);this.setTemporaryCache(t,this.clientId,!1)}else e||this.getInteractionInProgress()!==this.clientId||this.removeTemporaryItem(t)}async hydrateCache(e,t){let n,r=nh.createIdTokenEntity(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId);t.claims&&(n=await this.cryptoImpl.hashString(t.claims));let o=nh.createAccessTokenEntity(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?ny.toSecondsFromDate(e.expiresOn):0,e.extExpiresOn?ny.toSecondsFromDate(e.extExpiresOn):0,oi,void 0,e.tokenType,void 0,t.sshKid,t.claims,n);return this.saveCacheRecord({idToken:r,accessToken:o},e.correlationId)}async saveCacheRecord(e,t,n){try{await super.saveCacheRecord(e,t,n)}catch(e){if(e instanceof n2&&this.performanceClient&&t)try{let e=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:e.refreshToken.length,cacheIdCount:e.idToken.length,cacheAtCount:e.accessToken.length},t)}catch(e){}throw e}}}function il(e,t,n,r){try{switch(t){case j.LocalStorage:return new io(e,n,r);case j.SessionStorage:return new ii;case j.MemoryStorage:}}catch(e){n.error(e)}return new oY}const ic=(e,t,n,r)=>new is(e,{cacheLocation:j.MemoryStorage,temporaryCacheLocation:j.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},nc,t,n,r);class iu{constructor(e){this.eventCallbacks=new Map,this.logger=e||new ei({}),"undefined"!=typeof BroadcastChannel&&(this.broadcastChannel=new BroadcastChannel("msal.broadcast.event")),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,n){if("undefined"!=typeof window){let r=n||oC();return this.eventCallbacks.has(r)?(this.logger.error(`Event callback with id: ${r} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(r,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${r}`),r)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,n,r){let o={eventType:e,interactionType:t||null,payload:n||null,error:r||null,timestamp:Date.now()};switch(e){case ew.ACCOUNT_ADDED:case ew.ACCOUNT_REMOVED:case ew.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(o);break;default:this.invokeCallbacks(o)}}invokeCallbacks(e){this.eventCallbacks.forEach(([t,n],r)=>{(0===n.length||n.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${r}: ${e.eventType}`),t.apply(null,[e]))})}invokeCrossTabCallbacks(e){let t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}class id extends eu{constructor(e,t,n,r,o){super(e,t,n),this.name="ServerError",this.errorNo=r,this.status=o,Object.setPrototypeOf(this,id.prototype)}}class ih{static generateThrottlingStorageKey(e){return`${q.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t){let n=ih.generateThrottlingStorageKey(t),r=e.getThrottlingCache(n);if(r){if(r.throttleTime<Date.now()){e.removeItem(n);return}throw new id(r.errorCodes?.join(" ")||y.EMPTY_STRING,r.errorMessage,r.subError)}}static postProcess(e,t,n){if(ih.checkResponseStatus(n)||ih.checkResponseForRetryAfter(n)){let r={throttleTime:ih.calculateThrottleTime(parseInt(n.headers[T.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(ih.generateThrottlingStorageKey(t),r)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&e.headers.hasOwnProperty(T.RETRY_AFTER)&&(e.status<200||e.status>=300)}static calculateThrottleTime(e){let t=Date.now()/1e3;return Math.floor(1e3*Math.min(t+((e<=0?0:e)||q.DEFAULT_THROTTLE_TIME_SECONDS),t+q.DEFAULT_MAX_THROTTLE_TIME_SECONDS))}static removeThrottle(e,t,n,r){let o=o6(t,n,r),i=this.generateThrottlingStorageKey(o);e.removeItem(i)}}var ig={};e(ig,"instrumentBrokerParams",()=>al),e(ig,"addResponseTypeCode",()=>ac),e(ig,"addResponseTypeForTokenAndIdToken",()=>au),e(ig,"addResponseMode",()=>ad),e(ig,"addNativeBroker",()=>ah),e(ig,"addScopes",()=>ag),e(ig,"addClientId",()=>af),e(ig,"addRedirectUri",()=>ap),e(ig,"addPostLogoutRedirectUri",()=>am),e(ig,"addIdTokenHint",()=>ay),e(ig,"addDomainHint",()=>av),e(ig,"addLoginHint",()=>aC),e(ig,"addCcsUpn",()=>aw),e(ig,"addCcsOid",()=>aT),e(ig,"addSid",()=>ak),e(ig,"addClaims",()=>aS),e(ig,"addClientCapabilitiesToClaims",()=>aG),e(ig,"addCorrelationId",()=>ab),e(ig,"addLibraryInfo",()=>aI),e(ig,"addApplicationTelemetry",()=>aE),e(ig,"addPrompt",()=>aA),e(ig,"addState",()=>a_),e(ig,"addNonce",()=>aR),e(ig,"addCodeChallengeParams",()=>aP),e(ig,"addAuthorizationCode",()=>aN),e(ig,"addDeviceCode",()=>aO),e(ig,"addRefreshToken",()=>aM),e(ig,"addCodeVerifier",()=>ax),e(ig,"addClientSecret",()=>aL),e(ig,"addClientAssertion",()=>aq),e(ig,"addClientAssertionType",()=>aU),e(ig,"addOboAssertion",()=>aD),e(ig,"addRequestTokenUse",()=>aH),e(ig,"addGrantType",()=>aF),e(ig,"addClientInfo",()=>aB),e(ig,"addInstanceAware",()=>az),e(ig,"addExtraQueryParameters",()=>aK),e(ig,"addUsername",()=>a$),e(ig,"addPassword",()=>aj),e(ig,"addPopToken",()=>aV),e(ig,"addSshJwk",()=>aQ),e(ig,"addServerTelemetry",()=>aW),e(ig,"addThrottling",()=>aY),e(ig,"addLogoutHint",()=>aJ),e(ig,"addBrokerParameters",()=>aX);var ip={};e(ip,"CLIENT_ID",()=>im),e(ip,"REDIRECT_URI",()=>iy),e(ip,"RESPONSE_TYPE",()=>iv),e(ip,"RESPONSE_MODE",()=>iC),e(ip,"GRANT_TYPE",()=>iw),e(ip,"CLAIMS",()=>iT),e(ip,"SCOPE",()=>ik),e(ip,"ERROR",()=>iS),e(ip,"ERROR_DESCRIPTION",()=>ib),e(ip,"ACCESS_TOKEN",()=>iI),e(ip,"ID_TOKEN",()=>iE),e(ip,"REFRESH_TOKEN",()=>iA),e(ip,"EXPIRES_IN",()=>i_),e(ip,"REFRESH_TOKEN_EXPIRES_IN",()=>iR),e(ip,"STATE",()=>iP),e(ip,"NONCE",()=>iN),e(ip,"PROMPT",()=>iO),e(ip,"SESSION_STATE",()=>iM),e(ip,"CLIENT_INFO",()=>ix),e(ip,"CODE",()=>iL),e(ip,"CODE_CHALLENGE",()=>iq),e(ip,"CODE_CHALLENGE_METHOD",()=>iU),e(ip,"CODE_VERIFIER",()=>iD),e(ip,"CLIENT_REQUEST_ID",()=>iH),e(ip,"X_CLIENT_SKU",()=>iF),e(ip,"X_CLIENT_VER",()=>iB),e(ip,"X_CLIENT_OS",()=>iz),e(ip,"X_CLIENT_CPU",()=>iK),e(ip,"X_CLIENT_CURR_TELEM",()=>iG),e(ip,"X_CLIENT_LAST_TELEM",()=>i$),e(ip,"X_MS_LIB_CAPABILITY",()=>ij),e(ip,"X_APP_NAME",()=>iV),e(ip,"X_APP_VER",()=>iQ),e(ip,"POST_LOGOUT_URI",()=>iW),e(ip,"ID_TOKEN_HINT",()=>iY),e(ip,"DEVICE_CODE",()=>iJ),e(ip,"CLIENT_SECRET",()=>iX),e(ip,"CLIENT_ASSERTION",()=>iZ),e(ip,"CLIENT_ASSERTION_TYPE",()=>i0),e(ip,"TOKEN_TYPE",()=>i1),e(ip,"REQ_CNF",()=>i2),e(ip,"OBO_ASSERTION",()=>i3),e(ip,"REQUESTED_TOKEN_USE",()=>i4),e(ip,"ON_BEHALF_OF",()=>i6),e(ip,"FOCI",()=>i8),e(ip,"CCS_HEADER",()=>i5),e(ip,"RETURN_SPA_CODE",()=>i9),e(ip,"NATIVE_BROKER",()=>i7),e(ip,"LOGOUT_HINT",()=>ae),e(ip,"SID",()=>at),e(ip,"LOGIN_HINT",()=>an),e(ip,"DOMAIN_HINT",()=>ar),e(ip,"X_CLIENT_EXTRA_SKU",()=>ao),e(ip,"BROKER_CLIENT_ID",()=>ai),e(ip,"BROKER_REDIRECT_URI",()=>aa),e(ip,"INSTANCE_AWARE",()=>as);const im="client_id",iy="redirect_uri",iv="response_type",iC="response_mode",iw="grant_type",iT="claims",ik="scope",iS="error",ib="error_description",iI="access_token",iE="id_token",iA="refresh_token",i_="expires_in",iR="refresh_token_expires_in",iP="state",iN="nonce",iO="prompt",iM="session_state",ix="client_info",iL="code",iq="code_challenge",iU="code_challenge_method",iD="code_verifier",iH="client-request-id",iF="x-client-SKU",iB="x-client-VER",iz="x-client-OS",iK="x-client-CPU",iG="x-client-current-telemetry",i$="x-client-last-telemetry",ij="x-ms-lib-capability",iV="x-app-name",iQ="x-app-ver",iW="post_logout_redirect_uri",iY="id_token_hint",iJ="device_code",iX="client_secret",iZ="client_assertion",i0="client_assertion_type",i1="token_type",i2="req_cnf",i3="assertion",i4="requested_token_use",i6="on_behalf_of",i8="foci",i5="X-AnchorMailbox",i9="return_spa_code",i7="nativebroker",ae="logout_hint",at="sid",an="login_hint",ar="domain_hint",ao="x-client-xtra-sku",ai="brk_client_id",aa="brk_redirect_uri",as="instance_aware";function al(e,t,n){if(!t)return;let r=e.get(im);r&&e.has(ai)&&n?.addFields({embeddedClientId:r,embeddedRedirectUri:e.get(iy)},t)}function ac(e){e.set(iv,y.CODE_RESPONSE_TYPE)}function au(e){e.set(iv,`${y.TOKEN_RESPONSE_TYPE} ${y.ID_TOKEN_RESPONSE_TYPE}`)}function ad(e,t){e.set(iC,t||A.QUERY)}function ah(e){e.set(i7,"1")}function ag(e,t,n=!0,r=C){!n||r.includes("openid")||t.includes("openid")||r.push("openid");let o=new nz(n?[...t||[],...r]:t||[]);e.set(ik,o.printScopes())}function af(e,t){e.set(im,t)}function ap(e,t){e.set(iy,t)}function am(e,t){e.set(iW,t)}function ay(e,t){e.set(iY,t)}function av(e,t){e.set(ar,t)}function aC(e,t){e.set(an,t)}function aw(e,t){e.set(T.CCS_HEADER,`UPN:${t}`)}function aT(e,t){e.set(T.CCS_HEADER,`Oid:${t.uid}@${t.utid}`)}function ak(e,t){e.set(at,t)}function aS(e,t,n){let r=aG(t,n);try{JSON.parse(r)}catch(e){throw nl(t1)}e.set(iT,r)}function ab(e,t){e.set(iH,t)}function aI(e,t){e.set(iF,t.sku),e.set(iB,t.version),t.os&&e.set(iz,t.os),t.cpu&&e.set(iK,t.cpu)}function aE(e,t){t?.appName&&e.set(iV,t.appName),t?.appVersion&&e.set(iQ,t.appVersion)}function aA(e,t){e.set(iO,t)}function a_(e,t){t&&e.set(iP,t)}function aR(e,t){e.set(iN,t)}function aP(e,t,n){if(t&&n)e.set(iq,t),e.set(iU,n);else throw nl(t6)}function aN(e,t){e.set(iL,t)}function aO(e,t){e.set(iJ,t)}function aM(e,t){e.set(iA,t)}function ax(e,t){e.set(iD,t)}function aL(e,t){e.set(iX,t)}function aq(e,t){t&&e.set(iZ,t)}function aU(e,t){t&&e.set(i0,t)}function aD(e,t){e.set(i3,t)}function aH(e,t){e.set(i4,t)}function aF(e,t){e.set(iw,t)}function aB(e){e.set("client_info","1")}function az(e){e.has(as)||e.set(as,"true")}function aK(e,t){Object.entries(t).forEach(([t,n])=>{!e.has(t)&&n&&e.set(t,n)})}function aG(e,t){let n;if(e)try{n=JSON.parse(e)}catch(e){throw nl(t1)}else n={};return t&&t.length>0&&(n.hasOwnProperty(b.ACCESS_TOKEN)||(n[b.ACCESS_TOKEN]={}),n[b.ACCESS_TOKEN][b.XMS_CC]={values:t}),JSON.stringify(n)}function a$(e,t){e.set("username",t)}function aj(e,t){e.set("password",t)}function aV(e,t){t&&(e.set(i1,L.POP),e.set(i2,t))}function aQ(e,t){t&&(e.set(i1,L.SSH),e.set(i2,t))}function aW(e,t){e.set(iG,t.generateCurrentRequestHeaderValue()),e.set(i$,t.generateLastRequestHeaderValue())}function aY(e){e.set(ij,q.X_MS_LIB_CAPABILITY_VALUE)}function aJ(e,t){e.set(ae,t)}function aX(e,t,n){e.has(ai)||e.set(ai,t),e.has(aa)||e.set(aa,n)}var aZ={};async function a0(e,t,n,r,o,i,a){a?.addQueueMeasurement(ri.AuthorityFactoryCreateDiscoveredInstance,i);let s=o3.transformCIAMAuthority(o4(e)),l=new o3(s,t,n,r,o,i,a);try{return await o1(l.resolveEndpointsAsync.bind(l),ri.AuthorityResolveEndpointsAsync,o,a,i)(),l}catch(e){throw tR(eJ)}}e(aZ,"createDiscoveredInstance",()=>a0);class a1{constructor(e,t){this.config=function({authOptions:e,systemOptions:t,loggerOptions:n,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:a,clientCredentials:s,libraryInfo:l,telemetry:c,serverTelemetryManager:u,persistencePlugin:d,serializableCache:h}){let g={...n8,...n};return{authOptions:{clientCapabilities:[],azureCloudOptions:rt,skipAuthorityMetadataCache:!1,instanceAware:!1,...e},systemOptions:{...n6,...t},loggerOptions:g,cacheOptions:{...n5,...r},storageInterface:o||new n4(e.clientId,nc,new ei(g)),networkInterface:i||n9,cryptoInterface:a||nc,clientCredentials:s||re,libraryInfo:{...n7,...l},telemetry:{...rn,...c},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:h||null}}(e),this.logger=new ei(this.config.loggerOptions,nu,nd),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[T.CONTENT_TYPE]=y.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case o8.HOME_ACCOUNT_ID:try{let n=tN(e.credential);t[T.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case o8.UPN:t[T.CCS_HEADER]=`UPN: ${e.credential}`}return t}async executePostToTokenEndpoint(e,t,n,r,o,i){i&&this.performanceClient?.addQueueMeasurement(i,o);let a=await this.sendPostRequest(r,e,{body:t,headers:n},o);return this.config.serverTelemetryManager&&a.status<500&&429!==a.status&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,t,n,r){let o;ih.preProcess(this.cacheManager,e);try{let e=(o=await o1(this.networkClient.sendPostRequestAsync.bind(this.networkClient),ri.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,r)(t,n)).headers||{};this.performanceClient?.addFields({refreshTokenSize:o.body.refresh_token?.length||0,httpVerToken:e[T.X_MS_HTTP_VERSION]||"",requestId:e[T.X_MS_REQUEST_ID]||""},r)}catch(e){if(e instanceof rc){let t=e.responseHeaders;throw t&&this.performanceClient?.addFields({httpVerToken:t[T.X_MS_HTTP_VERSION]||"",requestId:t[T.X_MS_REQUEST_ID]||"",contentTypeHeader:t[T.CONTENT_TYPE]||void 0,contentLengthHeader:t[T.CONTENT_LENGTH]||void 0,httpStatus:e.httpStatus},r),e.error}if(e instanceof eu)throw e;throw tR(eX)}return ih.postProcess(this.cacheManager,e,o),o}async updateAuthority(e,t){this.performanceClient?.addQueueMeasurement(ri.UpdateTokenEndpointAuthority,t);let n=`https://${e}/${this.authority.tenant}/`,r=await a0(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=r}createTokenQueryParameters(e){let t=new Map;return e.embeddedClientId&&aX(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&aK(t,e.tokenQueryParameters),ab(t,e.correlationId),al(t,e.correlationId,this.performanceClient),nj(t)}}class a2{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){this.performanceClient?.addQueueMeasurement(ri.PopTokenGenerateCnf,e.correlationId);let n=await o1(this.generateKid.bind(this),ri.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),r=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:r}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(ri.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:"sw"}}async signPopToken(e,t,n){return this.signPayload(e,t,n)}async signPayload(e,t,n,r){let{resourceRequestMethod:o,resourceRequestUri:i,shrClaims:a,shrNonce:s,shrOptions:l}=n,c=i?new nV(i):void 0,u=c?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:nv(),m:o?.toUpperCase(),u:u?.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:u?.AbsolutePath,q:u?.QueryString?[[],u.QueryString]:void 0,client_claims:a||void 0,...r},t,l,n.correlationId)}}class a3{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class a4{constructor(e,t,n,r,o,i,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=r,this.serializableCache=o,this.persistencePlugin=i,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||y.NOT_AVAILABLE} - Timestamp: ${e.timestamp||y.NOT_AVAILABLE} - Description: ${e.error_description||y.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||y.NOT_AVAILABLE} - Trace ID: ${e.trace_id||y.NOT_AVAILABLE}`,r=e.error_codes?.length?e.error_codes[0]:void 0,o=new id(e.error,n,e.suberror,r,e.status);if(t&&e.status&&e.status>=v.SERVER_ERROR_RANGE_START&&e.status<=v.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${o}`);return}if(t&&e.status&&e.status>=v.CLIENT_ERROR_RANGE_START&&e.status<=v.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${o}`);return}if(eG(e.error,e.error_description,e.suberror))throw new eK(e.error,e.error_description,e.suberror,e.timestamp||y.EMPTY_STRING,e.trace_id||y.EMPTY_STRING,e.correlation_id||y.EMPTY_STRING,e.claims||y.EMPTY_STRING,r);throw o}}async handleServerTokenResponse(e,t,n,r,o,i,a,s,l){let c,u,d;if(this.performanceClient?.addQueueMeasurement(ri.HandleServerTokenResponse,e.correlation_id),e.id_token){if(c=nf(e.id_token||y.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&c.nonce!==o.nonce)throw tR(e4);if(r.maxAge||0===r.maxAge){let e=c.auth_time;if(!e)throw tR(e6);nm(e,r.maxAge)}}this.homeAccountIdentifier=tD.generateHomeAccountId(e.client_info||y.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,c),o&&o.state&&(u=o5.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||r.sshKid||void 0;let h=this.generateCacheRecord(e,t,n,r,c,i,o);try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),d=new a3(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(d)),a&&!s&&h.account){let e=h.account.generateAccountKey();if(!this.cacheStorage.getAccount(e))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await a4.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,c,u,void 0,l)}await this.cacheStorage.saveCacheRecord(h,r.correlationId,r.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&d&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(d))}return a4.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,c,u,e,l)}generateCacheRecord(e,t,n,r,o,i,a){let s,l,c=t.getPreferredCache();if(!c)throw tR(tc);let u=tq(o);e.id_token&&o&&(s=nI(this.homeAccountIdentifier,c,e.id_token,this.clientId,u||""),l=a6(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o,e.client_info,c,u,a,void 0,this.logger));let d=null;if(e.access_token){let o=e.scope?nz.fromString(e.scope):new nz(r.scopes||[]),a=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,s=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,l=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,h=n+a;d=nE(this.homeAccountIdentifier,c,e.access_token,this.clientId,u||t.tenant||"",o.printScopes(),h,h+s,this.cryptoObj.base64Decode,l&&l>0?n+l:void 0,e.token_type,i,e.key_id,r.claims,r.requestedClaimsHash)}let h=null;if(e.refresh_token){let t;e.refresh_token_expires_in&&(t=n+("string"==typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)),h=nA(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,i,t)}let g=null;return e.foci&&(g={clientId:this.clientId,environment:c,familyId:e.foci}),{account:l,idToken:s,accessToken:d,refreshToken:h,appMetadata:g}}static async generateAuthenticationResult(e,t,n,r,o,i,a,s,l){let c,u,d=y.EMPTY_STRING,h=[],g=null,f=y.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType!==L.POP||o.popKid)d=n.accessToken.secret;else{let t=new a2(e),{secret:r,keyId:i}=n.accessToken;if(!i)throw tR(tT);d=await t.signPopToken(r,i,o)}h=nz.fromString(n.accessToken.target).asArray(),g=nw(n.accessToken.expiresOn),c=nw(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(u=nw(n.accessToken.refreshOn))}n.appMetadata&&(f="1"===n.appMetadata.familyId?"1":"");let p=i?.oid||i?.sub||"",m=i?.tid||"";s?.spa_accountid&&n.account&&(n.account.nativeAccountId=s?.spa_accountid);let v=n.account?tx(n.account.getAccountInfo(),void 0,i,n.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:p,tenantId:m,scopes:h,account:v,idToken:n?.idToken?.secret||"",idTokenClaims:i||{},accessToken:d,fromCache:r,expiresOn:g,extExpiresOn:c,refreshOn:u,correlationId:o.correlationId,requestId:l||y.EMPTY_STRING,familyId:f,tokenType:n.accessToken?.tokenType||y.EMPTY_STRING,state:a?a.userRequestState:y.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||y.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||y.EMPTY_STRING,code:s?.spa_code,fromNativeBroker:!1}}}function a6(e,t,n,r,o,i,a,s,l,c,u){u?.verbose("setCachedAccount called");let d=e.getAccountKeys().find(e=>e.startsWith(n)),h=null;d&&(h=e.getAccount(d));let g=h||tD.createAccount({homeAccountId:n,idTokenClaims:o,clientInfo:i,environment:a,cloudGraphHostName:l?.cloud_graph_host_name,msGraphHost:l?.msgraph_host,nativeAccountId:c},t,r),f=g.tenantProfiles||[],p=s||g.realm;if(p&&!f.find(e=>e.tenantId===p)){let e=tM(n,g.localAccountId,p,o);f.push(e)}return g.tenantProfiles=f,g}class a8{static validateRedirectUri(e){if(!e)throw nl(tQ)}static validatePrompt(e){let t=[];for(let e in I)t.push(I[e]);if(0>t.indexOf(e))throw nl(t0)}static validateClaims(e){try{JSON.parse(e)}catch(e){throw nl(t1)}}static validateCodeChallengeParams(e,t){if(e&&t)this.validateCodeChallengeMethod(t);else throw nl(t6)}static validateCodeChallengeMethod(e){if(0>["plain","S256"].indexOf(e))throw nl(t4)}}async function a5(e,t,n){return"string"==typeof e?e:e({clientId:t,tokenEndpoint:n})}class a9 extends a1{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,t){if(this.performanceClient?.addQueueMeasurement(ri.AuthClientAcquireToken,e.correlationId),!e.code)throw tR(te);let n=nv(),r=await o1(this.executeTokenRequest.bind(this),ri.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),o=r.headers?.[T.X_MS_REQUEST_ID],i=new a4(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return i.validateTokenResponse(r.body),o1(i.handleServerTokenResponse.bind(i),ri.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,n,e,t,void 0,void 0,void 0,o)}getLogoutUri(e){if(!e)throw nl(t3);let t=this.createLogoutUrlQueryString(e);return nV.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){let n;this.performanceClient?.addQueueMeasurement(ri.AuthClientExecuteTokenRequest,t.correlationId);let r=this.createTokenQueryParameters(t),o=nV.appendQueryString(e.tokenEndpoint,r),i=await o1(this.createTokenRequestBody.bind(this),ri.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t);if(t.clientInfo)try{let e=tP(t.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${e.uid}${R.CLIENT_INFO_SEPARATOR}${e.utid}`,type:o8.HOME_ACCOUNT_ID}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}let a=this.createTokenRequestHeaders(n||t.ccsCredential),s=o6(this.config.authOptions.clientId,t);return o1(this.executePostToTokenEndpoint.bind(this),ri.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(o,i,a,s,t.correlationId,ri.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){let t;this.performanceClient?.addQueueMeasurement(ri.AuthClientCreateTokenRequestBody,e.correlationId);let n=new Map;if(af(n,e.embeddedClientId||e.tokenBodyParameters?.[im]||this.config.authOptions.clientId),this.includeRedirectUri?ap(n,e.redirectUri):a8.validateRedirectUri(e.redirectUri),ag(n,e.scopes,!0,this.oidcDefaultScopes),aN(n,e.code),aI(n,this.config.libraryInfo),aE(n,this.config.telemetry.application),aY(n),this.serverTelemetryManager&&!rr(this.config)&&aW(n,this.serverTelemetryManager),e.codeVerifier&&ax(n,e.codeVerifier),this.config.clientCredentials.clientSecret&&aL(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let t=this.config.clientCredentials.clientAssertion;aq(n,await a5(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),aU(n,t.assertionType)}if(aF(n,"authorization_code"),aB(n),e.authenticationScheme===L.POP){let t,r=new a2(this.cryptoUtils,this.performanceClient);aV(n,e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await o1(r.generateCnf.bind(r),ri.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString)}else if(e.authenticationScheme===L.SSH){if(e.sshJwk)aQ(n,e.sshJwk);else throw nl(t7)}if((!nB.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&aS(n,e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{let n=tP(e.clientInfo,this.cryptoUtils.base64Decode);t={credential:`${n.uid}${R.CLIENT_INFO_SEPARATOR}${n.utid}`,type:o8.HOME_ACCOUNT_ID}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}else t=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&t)switch(t.type){case o8.HOME_ACCOUNT_ID:try{let e=tN(t.credential);aT(n,e)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case o8.UPN:aw(n,t.credential)}return e.embeddedClientId&&aX(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&aK(n,e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[i9]||aK(n,{[i9]:"1"}),al(n,e.correlationId,this.performanceClient),nj(n)}createLogoutUrlQueryString(e){let t=new Map;return e.postLogoutRedirectUri&&am(t,e.postLogoutRedirectUri),e.correlationId&&ab(t,e.correlationId),e.idTokenHint&&ay(t,e.idTokenHint),e.state&&a_(t,e.state),e.logoutHint&&aJ(t,e.logoutHint),e.extraQueryParameters&&aK(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&az(t),nj(t)}}class a7{constructor(e,t){this.cacheOutcome=B.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||y.EMPTY_STRING,this.wrapperVer=e.wrapperVer||y.EMPTY_STRING,this.telemetryCacheKey=x.CACHE_KEY+R.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${x.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&t.push(`broker_error=${n}`);let r=t.join(x.VALUE_SEPARATOR),o=[e,this.getRegionDiscoveryFields()].join(x.VALUE_SEPARATOR);return[x.SCHEMA_VERSION,o,r].join(x.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=a7.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join(x.VALUE_SEPARATOR),r=e.errors.slice(0,t).join(x.VALUE_SEPARATOR),o=e.errors.length,i=t<o?x.OVERFLOW_TRUE:x.OVERFLOW_FALSE,a=[o,i].join(x.VALUE_SEPARATOR);return[x.SCHEMA_VERSION,e.cacheHits,n,r,a].join(x.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=x.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof eu?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(x.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){let e=this.getLastRequests(),t=a7.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{let n={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}}static maxErrorsToSend(e){let t,n=0,r=0,o=e.errors.length;for(t=0;t<o;t++){let o=e.failedRequests[2*t]||y.EMPTY_STRING,i=e.failedRequests[2*t+1]||y.EMPTY_STRING,a=e.errors[t]||y.EMPTY_STRING;if((r+=o.toString().length+i.toString().length+a.length+3)<x.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||y.EMPTY_STRING),e.push(this.regionSource||y.EMPTY_STRING),e.push(this.regionOutcome||y.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return function(e){let{skus:t,libraryName:n,libraryVersion:r,extensionName:o,extensionVersion:i}=e,a=new Map([[0,[n,r]],[2,[o,i]]]),s=[];if(t?.length){if((s=t.split(",")).length<4)return t}else s=Array.from({length:4},()=>"|");return a.forEach((e,t)=>{2===e.length&&e[0]?.length&&e[1]?.length&&function(e){let{skuArr:t,index:n,skuName:r,skuVersion:o}=e;n>=t.length||(t[n]=[r,o].join("|"))}({skuArr:s,index:t,skuName:e[0],skuVersion:e[1]})}),s.join(",")}(e)}}class se{constructor(e,t,n,r,o,i,a,s,l){this.config=e,this.browserStorage=t,this.browserCrypto=n,this.networkClient=this.config.system.networkClient,this.eventHandler=o,this.navigationClient=i,this.nativeMessageHandler=s,this.correlationId=l||oC(),this.logger=r.clone(K.MSAL_SKU,oU,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e){if(e){tD.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(tD.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch(e){this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch(e){this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");let t=e||this.config.auth.redirectUri;return nV.getAbsoluteUrl(t,oN())}initializeServerTelemetryManager(e,t){return this.logger.verbose("initializeServerTelemetryManager called"),new a7({clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]},this.browserStorage)}async getDiscoveredAuthority(e){let{account:t}=e,n=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(ri.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);let r={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},o=e.requestAuthority||this.config.auth.authority,i=n?.length?"true"===n:this.config.auth.instanceAware,a=t&&i?this.config.auth.authority.replace(nV.getDomainFromUrl(o),t.environment):o,s=o3.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),l=await o1(aZ.createDiscoveredInstance,ri.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(s,this.config.system.networkClient,this.browserStorage,r,this.logger,this.correlationId,this.performanceClient);if(t&&!l.isAlias(t.environment))throw nl(tV.authorityMismatch);return l}}async function st(e,t,n,r){n.addQueueMeasurement(ri.InitializeBaseRequest,e.correlationId);let o=e.authority||t.auth.authority,i=[...e&&e.scopes||[]],a={...e,correlationId:e.correlationId,authority:o,scopes:i};if(a.authenticationScheme){if(a.authenticationScheme===L.SSH){if(!e.sshJwk)throw nl(tV.missingSshJwk);if(!e.sshKid)throw nl(tV.missingSshKid)}r.verbose(`Authentication Scheme set to "${a.authenticationScheme}" as configured in Auth request`)}else a.authenticationScheme=L.BEARER,r.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return t.cache.claimsBasedCachingEnabled&&e.claims&&!nB.isEmptyObj(e.claims)&&(a.requestedClaimsHash=await oR(e.claims)),a}async function sn(e,t,n,r,o){r.addQueueMeasurement(ri.InitializeSilentRequest,e.correlationId);let i=await o1(st,ri.InitializeBaseRequest,o,r,e.correlationId)(e,n,r,o);return{...e,...i,account:t,forceRefresh:e.forceRefresh||!1}}class sr extends se{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);let t={correlationId:this.correlationId||oC(),...e};if(e){if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){let n=this.getLogoutHintFromIdTokenClaims(e.account);n&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=n)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set")}else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=nV.getAbsoluteUrl(e.postLogoutRedirectUri,oN())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=nV.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,oN())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=nV.getAbsoluteUrl(oN(),oN())),t}getLogoutHintFromIdTokenClaims(e){let t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){return this.performanceClient.addQueueMeasurement(ri.StandardInteractionClientCreateAuthCodeClient,this.correlationId),new a9(await o1(this.getClientConfiguration.bind(this),ri.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e),this.performanceClient)}async getClientConfiguration(e){let{serverTelemetryManager:t,requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:i}=e;this.performanceClient.addQueueMeasurement(ri.StandardInteractionClientGetClientConfiguration,this.correlationId);let a=await o1(this.getDiscoveredAuthority.bind(this),ri.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:i}),s=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:s.loggerCallback,piiLoggingEnabled:s.piiLoggingEnabled,logLevel:s.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:K.MSAL_SKU,version:oU,cpu:y.EMPTY_STRING,os:y.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(ri.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);let n=this.getRedirectUri(e.redirectUri),r=o5.setRequestState(this.browserCrypto,e&&e.state||y.EMPTY_STRING,{interactionType:t}),o={...await o1(st,ri.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:n,state:r,nonce:e.nonce||oC(),responseMode:this.config.auth.OIDCOptions.serverResponseType};if(e.loginHint||e.sid)return o;let i=e.account||this.browserStorage.getActiveAccount();return i&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${i.homeAccountId}`,this.correlationId),o.account=i),o}}const so="user_switch",si={[so]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class sa extends eu{constructor(e,t,n){super(e,t),Object.setPrototypeOf(this,sa.prototype),this.name="NativeAuthError",this.ext=n}}function ss(e){return!!e.ext&&!!e.ext.status&&("PERSISTENT_ERROR"===e.ext.status||"DISABLED"===e.ext.status)||!!e.ext&&!!e.ext.error&&-0x7ffb78ff===e.ext.error||"ContentError"===e.errorCode||!1}function sl(e,t,n){if(n&&n.status)switch(n.status){case"ACCOUNT_UNAVAILABLE":return e$(eO.nativeAccountUnavailable);case"USER_INTERACTION_REQUIRED":return new eK(e,t);case"USER_CANCEL":return r5(rT);case"NO_NETWORK":return r5(rD)}return new sa(e,si[e]||t,n)}class sc extends a1{constructor(e,t){super(e,t)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(ri.SilentFlowClientAcquireCachedToken,e.correlationId);let t=B.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!nB.isEmptyObj(e.claims))throw this.setCacheOutcome(B.FORCE_REFRESH_OR_CLAIMS,e.correlationId),tR(tp);if(!e.account)throw tR(ts);let n=e.account.tenantId||function(e){let t=new nV(e).getUrlComponents(),n=t.PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case S.COMMON:case S.ORGANIZATIONS:case S.CONSUMERS:return;default:return n}}(e.authority),r=this.cacheManager.getTokenKeys(),o=this.cacheManager.getAccessToken(e.account,e,r,n,this.performanceClient,e.correlationId);if(o){if(nk(o.cachedAt)||nT(o.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(B.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),tR(tp);o.refreshOn&&nT(o.refreshOn,0)&&(t=B.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(B.NO_CACHED_ACCESS_TOKEN,e.correlationId),tR(tp);let i=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account),accessToken:o,idToken:this.cacheManager.getIdToken(e.account,r,n,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(i)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await o1(this.generateResultFromCacheRecord.bind(this),ri.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==B.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){let n;if(this.performanceClient?.addQueueMeasurement(ri.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId),e.idToken&&(n=nf(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){let e=n?.auth_time;if(!e)throw tR(e6);nm(e,t.maxAge)}return a4.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,n)}}class su extends sr{async acquireToken(e){this.performanceClient.addQueueMeasurement(ri.SilentCacheClientAcquireToken,e.correlationId);let t=this.initializeServerTelemetryManager(X.acquireTokenSilent_silentFlow),n=new sc(await o1(this.getClientConfiguration.bind(this),ri.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),this.performanceClient);this.logger.verbose("Silent auth client created");try{let t=(await o1(n.acquireCachedToken.bind(n),ri.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),t}catch(e){throw e instanceof r8&&e.errorCode===rK&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),e}}logout(e){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t?.account)}}class sd extends se{constructor(e,t,n,r,o,i,a,s,l,c,u,d){super(e,t,n,r,o,i,s,l,d),this.apiId=a,this.accountId=c,this.nativeMessageHandler=l,this.nativeStorageManager=u,this.silentCacheClient=new su(e,this.nativeStorageManager,n,r,o,i,s,l,d);let h=this.nativeMessageHandler.getExtensionId()===G.PREFERRED_EXTENSION_ID?"chrome":this.nativeMessageHandler.getExtensionId()?.length?"unknown":void 0;this.skus=a7.makeExtraSkuString({libraryName:K.MSAL_SKU,libraryVersion:oU,extensionName:h,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[ip.X_CLIENT_EXTRA_SKU]:this.skus}}async acquireToken(e,t){this.performanceClient.addQueueMeasurement(ri.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");let n=this.performanceClient.startMeasurement(ri.NativeInteractionClientAcquireToken,e.correlationId),r=ny.nowSeconds(),o=this.initializeServerTelemetryManager(this.apiId);try{let i=await this.initializeNativeRequest(e);try{let e=await this.acquireTokensFromCache(this.accountId,i);return n.end({success:!0,isNativeBroker:!1,fromCache:!0}),e}catch(e){if(t===er.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),e;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}let{...a}=i,s={method:$.GetToken,request:a},l=await this.nativeMessageHandler.sendMessage(s),c=this.validateNativeResponse(l);return await this.handleNativeResponse(c,i,r).then(e=>(n.end({success:!0,isNativeBroker:!0,requestId:e.requestId}),o.clearNativeBrokerErrorCode(),e)).catch(e=>{throw n.end({success:!1,errorCode:e.errorCode,subErrorCode:e.subError,isNativeBroker:!0}),e})}catch(e){throw e instanceof sa&&o.setNativeBrokerErrorCode(e.errorCode),e}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:nz.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),tR(ej.noAccountFound);let n=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!n)throw tR(ej.noAccountFound);try{let e=this.createSilentCacheRequest(t,n),r=await this.silentCacheClient.acquireToken(e),o={...n,idTokenClaims:r?.idTokenClaims,idToken:r?.idToken};return{...r,account:o}}catch(e){throw e}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");let{...n}=e;delete n.onRedirectNavigate;let r=await this.initializeNativeRequest(n),o={method:$.GetToken,request:r};try{let e=await this.nativeMessageHandler.sendMessage(o);this.validateNativeResponse(e)}catch(e){if(e instanceof sa&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(e.errorCode),ss(e)))throw e}this.browserStorage.setTemporaryCache(Q.NATIVE_REQUEST,JSON.stringify(r),!0);let i={apiId:X.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(a,i)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let n=this.browserStorage.getCachedNativeRequest();if(!n)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;let{prompt:r,...o}=n;r&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Q.NATIVE_REQUEST));let i={method:$.GetToken,request:o},a=ny.nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");let e=await this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(e);let t=this.handleNativeResponse(e,o,a);this.browserStorage.setInteractionInProgress(!1);let n=await t;return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),n}catch(e){throw this.browserStorage.setInteractionInProgress(!1),e}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,n){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");let r=ng.extractTokenClaims(e.id_token,oi),o=this.createHomeAccountIdentifier(e,r),i=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId})?.homeAccountId;if(t.extraParameters?.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(o!==i&&e.account.id!==t.accountId)throw sl(so);let a=await this.getDiscoveredAuthority({requestAuthority:t.authority}),s=a6(this.browserStorage,a,o,oi,r,e.client_info,void 0,r.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);let l=await this.generateAuthenticationResult(e,t,r,s,a.canonicalAuthority,n);return await this.cacheAccount(s),await this.cacheNativeTokens(e,t,o,r,e.access_token,l.tenantId,n),l}createHomeAccountIdentifier(e,t){return tD.generateHomeAccountId(e.client_info||y.EMPTY_STRING,tL.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?nz.fromString(e.scope):nz.fromString(t.scope)}async generatePopAccessToken(e,t){if(t.tokenType!==L.POP||!t.signPopToken)return e.access_token;{if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;let n=new a2(this.browserCrypto),r={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw tR(ej.keyIdMissing);return n.signPopToken(e.access_token,t.keyId,r)}}async generateAuthenticationResult(e,t,n,r,o,i){let a=this.addTelemetryFromNativeResponse(e),s=e.scope?nz.fromString(e.scope):nz.fromString(t.scope),l=e.account.properties||{},c=l.UID||n.oid||n.sub||y.EMPTY_STRING,u=l.TenantId||n.tid||y.EMPTY_STRING,d=tx(r.getAccountInfo(),void 0,n,e.id_token);d.nativeAccountId!==e.account.id&&(d.nativeAccountId=e.account.id);let h=await this.generatePopAccessToken(e,t),g=t.tokenType===L.POP?L.POP:L.BEARER;return{authority:o,uniqueId:c,tenantId:u,scopes:s.asArray(),account:d,idToken:e.id_token,idTokenClaims:n,accessToken:h,fromCache:!!a&&this.isResponseFromCache(a),expiresOn:ny.toDateFromSeconds(i+e.expires_in),tokenType:g,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e).catch(e=>{this.logger.error(`Error occurred while removing account context from browser storage. ${e}`)})}cacheNativeTokens(e,t,n,r,o,i,a){let s=nh.createIdTokenEntity(n,t.authority,e.id_token||"",t.clientId,r.tid||""),l=t.tokenType===L.POP?y.SHR_NONCE_VALIDITY:("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,c=this.generateScopes(e,t),u=nh.createAccessTokenEntity(n,t.authority,o,t.clientId,r.tid||i,c.printScopes(),a+l,0,oi,void 0,t.tokenType,void 0,t.keyId);return this.nativeStorageManager.saveCacheRecord({idToken:s,accessToken:u},this.correlationId,t.storeInCache)}addTelemetryFromNativeResponse(e){let t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw ed(ea.unexpectedError,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch(e){this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return void 0===e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");let t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});let n=new nV(t);n.validateAsUri();let{scopes:r,...o}=e,i=new nz(r||[]);i.appendScopes(C);let a={...o,accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:i.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:(()=>{switch(this.apiId){case X.ssoSilent:case X.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),I.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case I.NONE:case I.CONSENT:case I.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),r5(rZ)}})(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(a.signPopToken&&e.popKid)throw r5(r1);if(this.handleExtraBrokerParams(a),a.extraParameters=a.extraParameters||{},a.extraParameters.telemetry=G.MATS_TELEMETRY,e.authenticationScheme===L.POP){let t,n={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},r=new a2(this.browserCrypto);if(a.keyId)t=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:a.keyId})),a.signPopToken=!1;else{let o=await o1(r.generateCnf.bind(r),ri.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(n,this.logger);t=o.reqCnfString,a.keyId=o.kid,a.signPopToken=!0}a.reqCnf=t}return this.addRequestSKUs(a),a}handleExtraBrokerParams(e){let t=e.extraParameters&&e.extraParameters.hasOwnProperty(ip.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(ip.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(ip.CLIENT_ID);if(!e.embeddedClientId&&!t)return;let n="",r=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,n=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[ip.BROKER_REDIRECT_URI],n=e.extraParameters[ip.CLIENT_ID]),e.extraParameters={child_client_id:n,child_redirect_uri:r},this.performanceClient?.addFields({embeddedClientId:n,embeddedRedirectUri:r},e.correlationId)}}class sh{constructor(e,t,n,r){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=n,this.handshakeEvent=n.startMeasurement(ri.NativeMessageHandlerHandshake)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");let t={channel:G.CHANNEL_ID,extensionId:this.extensionId,responseId:oC(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(t)}`),this.messageChannel.port1.postMessage(t),new Promise((e,n)=>{this.resolvers.set(t.responseId,{resolve:e,reject:n})})}static async createProvider(e,t,n){e.trace("NativeMessageHandler - createProvider called.");try{let r=new sh(e,t,n,G.PREFERRED_EXTENSION_ID);return await r.sendHandshakeRequest(),r}catch(o){let r=new sh(e,t,n);return await r.sendHandshakeRequest(),r}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);let e={channel:G.CHANNEL_ID,extensionId:this.extensionId,responseId:oC(),body:{method:$.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=e=>{this.onChannelMessage(e)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,n)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:n}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),n(r5(rW)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;let t=e.data;if(t.channel&&t.channel===G.CHANNEL_ID&&(!t.extensionId||t.extensionId===this.extensionId)&&t.body.method===$.HandshakeRequest){let e=this.handshakeResolvers.get(t.responseId);if(!e){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),e.reject(r5(rY))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");let t=e.data,n=this.resolvers.get(t.responseId),r=this.handshakeResolvers.get(t.responseId);try{let e=t.body.method;if(e===$.Response){if(!n)return;let e=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(e)}`),"Success"!==e.status)n.reject(sl(e.code,e.description,e.ext));else if(e.result)e.result.code&&e.result.description?n.reject(sl(e.result.code,e.result.description,e.result.ext)):n.resolve(e.result);else throw ed(ea.unexpectedError,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(e===$.HandshakeResponse){if(!r){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),r.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(t){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${t}`),this.logger.errorPii(`Unable to parse ${e}`),n?n.reject(t):r&&r.reject(t)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isPlatformBrokerAvailable(e,t,n,r){if(t.trace("isPlatformBrokerAvailable called"),!e.system.allowPlatformBroker)return t.trace("isPlatformBrokerAvailable: allowPlatformBroker is not enabled, returning false"),!1;if(!n)return t.trace("isPlatformBrokerAvailable: Platform extension provider is not initialized, returning false"),!1;if(r)switch(r){case L.BEARER:case L.POP:t.trace("isPlatformBrokerAvailable: authenticationScheme is supported, returning true");break;default:return t.trace("isPlatformBrokerAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}var sg={};function sf(e,t,n,r){let o=t.correlationId,i=new Map;if(af(i,t.embeddedClientId||t.extraQueryParameters?.[im]||e.clientId),ag(i,[...t.scopes||[],...t.extraScopesToConsent||[]],!0,e.authority.options.OIDCOptions?.defaultScopes),ap(i,t.redirectUri),ab(i,o),ad(i,t.responseMode),aB(i),t.prompt&&(aA(i,t.prompt),r?.addFields({prompt:t.prompt},o)),t.domainHint&&(av(i,t.domainHint),r?.addFields({domainHintFromRequest:!0},o)),t.prompt!==I.SELECT_ACCOUNT){if(t.sid&&t.prompt===I.NONE)n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),ak(i,t.sid),r?.addFields({sidFromRequest:!0},o);else if(t.account){var a,s;let e=(a=t.account,a.idTokenClaims?.sid||null),l=(s=t.account,s.idTokenClaims?.login_hint||null);if(l&&t.domainHint&&(n.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),l=null),l){n.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),aC(i,l),r?.addFields({loginHintFromClaim:!0},o);try{let e=tN(t.account.homeAccountId);aT(i,e)}catch(e){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e&&t.prompt===I.NONE){n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),ak(i,e),r?.addFields({sidFromClaim:!0},o);try{let e=tN(t.account.homeAccountId);aT(i,e)}catch(e){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)n.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),aC(i,t.loginHint),aw(i,t.loginHint),r?.addFields({loginHintFromRequest:!0},o);else if(t.account.username){n.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),aC(i,t.account.username),r?.addFields({loginHintFromUpn:!0},o);try{let e=tN(t.account.homeAccountId);aT(i,e)}catch(e){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(n.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),aC(i,t.loginHint),aw(i,t.loginHint),r?.addFields({loginHintFromRequest:!0},o))}else n.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return t.nonce&&aR(i,t.nonce),t.state&&a_(i,t.state),(t.claims||e.clientCapabilities&&e.clientCapabilities.length>0)&&aS(i,t.claims,e.clientCapabilities),t.embeddedClientId&&aX(i,e.clientId,e.redirectUri),t.extraQueryParameters&&aK(i,t.extraQueryParameters),e.instanceAware&&az(i),i}function sp(e,t){let n=nj(t);return nV.appendQueryString(e.authorizationEndpoint,n)}function sm(e,t){if(sy(e,t),!e.code)throw tR(tv);return e}function sy(e,t){let n,r;if(!e.state||!t)throw e.state?tR(e3,"Cached State"):tR(e3,"Server State");try{n=decodeURIComponent(e.state)}catch(t){throw tR(e1,e.state)}try{r=decodeURIComponent(t)}catch(t){throw tR(e1,e.state)}if(n!==r)throw tR(e2);if(e.error||e.error_description||e.suberror){let t=function(e){let t="code=",n=e.error_uri?.lastIndexOf(t);return n&&n>=0?e.error_uri?.substring(n+t.length):void 0}(e);if(eG(e.error,e.error_description,e.suberror))throw new eK(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",t);throw new id(e.error||"",e.error_description,e.suberror,t)}}e(sg,"getStandardAuthorizeRequestParameters",()=>sf),e(sg,"getAuthorizeUrl",()=>sp),e(sg,"getAuthorizationCodePayload",()=>sm),e(sg,"validateAuthorizationResponse",()=>sy);class sv{constructor(e,t,n,r,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=n,this.logger=r,this.performanceClient=o}async handleCodeResponse(e,t){let n;this.performanceClient.addQueueMeasurement(ri.HandleCodeResponse,t.correlationId);try{n=sg.getAuthorizationCodePayload(e,t.state)}catch(e){if(e instanceof id&&e.subError===rT)throw r5(rT);throw e}return o1(this.handleCodeResponseFromServer.bind(this),ri.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(n,t)}async handleCodeResponseFromServer(e,t,n=!0){if(this.performanceClient.addQueueMeasurement(ri.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await o1(this.authModule.updateAuthority.bind(this.authModule),ri.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),n&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{let e=this.createCcsCredentials(t);e&&(this.authCodeRequest.ccsCredential=e)}return await o1(this.authModule.acquireToken.bind(this.authModule),ri.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:o8.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:o8.UPN}:null}}function sC(e,t,n){let r=nK.getDeserializedResponse(e);if(!r){if(nK.stripLeadingHashOrQuery(e))throw n.error(`A ${t} is present in the iframe but it does not contain known properties. It's likely that the ${t} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${t} detected is: ${e}`),r5(rp);throw n.error(`The request has returned to the redirectUri but a ${t} is not present. It's likely that the ${t} has been removed or the page has been redirected by code running on the redirectUri page.`),r5(rg)}return r}async function sw(e,t,n,r,o){let i=sg.getStandardAuthorizeRequestParameters({...e.auth,authority:t},n,r,o);if(ig.addLibraryInfo(i,{sku:K.MSAL_SKU,version:oU,os:"",cpu:""}),e.auth.protocolMode!==tU.OIDC&&ig.addApplicationTelemetry(i,e.telemetry.application),n.platformBroker&&(ig.addNativeBroker(i),n.authenticationScheme===L.POP)){let e,t=new oX(r,o),a=new a2(t);e=n.popKid?t.encodeKid(n.popKid):(await o1(a.generateCnf.bind(a),ri.PopTokenGenerateCnf,r,o,n.correlationId)(n,r)).reqCnfString,ig.addPopToken(i,e)}return ig.instrumentBrokerParams(i,n.correlationId,o),i}async function sT(e,t,n,r,o){if(!n.codeChallenge)throw nl(tV.pkceParamsMissing);let i=await o1(sw,ri.GetStandardParams,r,o,n.correlationId)(e,t,n,r,o);return ig.addResponseTypeCode(i),ig.addCodeChallengeParams(i,n.codeChallenge,y.S256_CODE_CHALLENGE_METHOD),sg.getAuthorizeUrl(t,i)}async function sk(e,t,n){e.addQueueMeasurement(ri.GeneratePkceCodes,n);let r=o0(sS,ri.GenerateCodeVerifier,t,e,n)(e,t,n),o=await o1(sb,ri.GenerateCodeChallengeFromVerifier,t,e,n)(r,e,t,n);return{verifier:r,challenge:o}}function sS(e,t,n){try{let r=new Uint8Array(32);return o0(oy,ri.GetRandomValues,t,e,n)(r),on(r)}catch(e){throw r5(ru)}}async function sb(e,t,n,r){t.addQueueMeasurement(ri.GenerateCodeChallengeFromVerifier,r);try{let o=await o1(om,ri.Sha256Digest,n,t,r)(e,t,r);return on(new Uint8Array(o))}catch(e){throw r5(ru)}}class sI extends sr{constructor(e,t,n,r,o,i,a,s,l,c){super(e,t,n,r,o,i,a,l,c),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=s}acquireToken(e,t){try{let n={popupName:this.generatePopupName(e.scopes||C,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};if(this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,n,t);return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),n.popup=this.openSizedPopup("about:blank",n),this.acquireTokenPopupAsync(e,n,t)}catch(e){return Promise.reject(e)}}logout(e){try{this.logger.verbose("logoutPopup called");let t=this.initializeLogoutRequest(e),n={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},r=e&&e.authority,o=e&&e.mainWindowRedirectUri;if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,n,r,o);return this.logger.verbose("asyncPopup set to false, opening popup"),n.popup=this.openSizedPopup("about:blank",n),this.logoutPopupAsync(t,n,r,o)}catch(e){return Promise.reject(e)}}async acquireTokenPopupAsync(e,t,n){this.logger.verbose("acquireTokenPopupAsync called");let r=this.initializeServerTelemetryManager(X.acquireTokenPopup),o=await o1(this.initializeAuthorizationRequest.bind(this),ri.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,a.Popup),i=n||await o1(sk,ri.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId);o.codeChallenge=i.challenge,t.popup&&oq(o.authority);try{let n,s=await o1(this.createAuthCodeClient.bind(this),ri.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),l=sh.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);l&&(n=this.performanceClient.startMeasurement(ri.FetchAccountIdWithNativeBroker,e.correlationId));let c=await o1(sT,ri.GetAuthCodeUrl,this.logger,this.performanceClient,o.correlationId)(this.config,s.authority,{...o,platformBroker:l},this.logger,this.performanceClient),u=this.initiateAuthRequest(c,t);this.eventHandler.emitEvent(ew.POPUP_OPENED,a.Popup,{popupWindow:u},null);let d=await this.monitorPopupForHash(u,t.popupWindowParent),h=o0(sC,ri.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(d,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(ih.removeThrottle(this.browserStorage,this.config.auth.clientId,o),h.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),n&&n.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw r5(rJ);let e=new sd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,X.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,h.accountId,this.nativeStorage,o.correlationId),{userRequestState:t}=o5.parseRequestState(this.browserCrypto,o.state);return await e.acquireToken({...o,state:t,prompt:void 0})}let g={...o,code:h.code||"",codeVerifier:i.verifier},f=new sv(s,this.browserStorage,g,this.logger,this.performanceClient);return await f.handleCodeResponse(h,o)}catch(e){throw t.popup?.close(),e instanceof eu&&(e.setCorrelationId(this.correlationId),r.cacheFailedRequest(e)),e}}async logoutPopupAsync(e,t,n,r){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(ew.LOGOUT_START,a.Popup,e);let o=this.initializeServerTelemetryManager(X.logoutPopup);try{await this.clearCacheOnLogout(e.account);let i=await o1(this.createAuthCodeClient.bind(this),ri.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:n,account:e.account||void 0});try{i.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&i.authority.protocolMode===tU.OIDC){if(this.browserStorage.removeAccount(e.account?.homeAccountId),this.eventHandler.emitEvent(ew.LOGOUT_SUCCESS,a.Popup,e),r){let e={apiId:X.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=nV.getAbsoluteUrl(r,oN());await this.navigationClient.navigateInternal(t,e)}t.popup?.close();return}}let s=i.getLogoutUri(e);this.eventHandler.emitEvent(ew.LOGOUT_SUCCESS,a.Popup,e);let l=this.openPopup(s,t);if(this.eventHandler.emitEvent(ew.POPUP_OPENED,a.Popup,{popupWindow:l},null),await this.monitorPopupForHash(l,t.popupWindowParent).catch(()=>{}),r){let e={apiId:X.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=nV.getAbsoluteUrl(r,oN());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${t}`),await this.navigationClient.navigateInternal(t,e)}else this.logger.verbose("No main window navigation requested")}catch(e){throw t.popup?.close(),e instanceof eu&&(e.setCorrelationId(this.correlationId),o.cacheFailedRequest(e)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(ew.LOGOUT_FAILURE,a.Popup,null,e),this.eventHandler.emitEvent(ew.LOGOUT_END,a.Popup),e}this.eventHandler.emitEvent(ew.LOGOUT_END,a.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),r5(rh)}monitorPopupForHash(e,t){return new Promise((t,n)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");let r=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(r),n(r5(rT));return}let o="";try{o=e.location.href}catch(e){}if(!o||"about:blank"===o)return;clearInterval(r);let i="",a=this.config.auth.OIDCOptions.serverResponseType;e&&(i=a===E.QUERY?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),t(i)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let n;if(t.popup?(n=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),n.location.assign(e)):void 0===t.popup&&(this.logger.verbosePii(`Opening popup window to: ${e}`),n=this.openSizedPopup(e,t)),!n)throw r5(rw);return n.focus&&n.focus(),this.currentWindow=n,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),n}catch(e){throw this.logger.error("error opening popup "+e.message),this.browserStorage.setInteractionInProgress(!1),r5(rC)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:n,popupWindowParent:r}){let o=r.screenLeft?r.screenLeft:r.screenX,i=r.screenTop?r.screenTop:r.screenY,a=r.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,s=r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=n.popupSize?.width,c=n.popupSize?.height,u=n.popupPosition?.top,d=n.popupPosition?.left;return(!l||l<0||l>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=K.POPUP_WIDTH),(!c||c<0||c>s)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),c=K.POPUP_HEIGHT),(!u||u<0||u>s)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),u=Math.max(0,s/2-K.POPUP_HEIGHT/2+i)),(!d||d<0||d>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),d=Math.max(0,a/2-K.POPUP_WIDTH/2+o)),r.open(e,t,`width=${l}, height=${c}, top=${u}, left=${d}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(a.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,t){return`${K.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){let t=e.account&&e.account.homeAccountId;return`${K.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}}class sE{constructor(e,t,n,r,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=n,this.logger=r,this.performanceClient=o}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){t.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(Q.ORIGIN_URI,t.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(Q.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);let n={apiId:X.acquireTokenRedirect,timeout:t.redirectTimeout,noHistory:!1};if("function"==typeof t.onRedirectNavigate){if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),!1!==t.onRedirectNavigate(e)){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await t.navigationClient.navigateExternal(e,n);return}this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await t.navigationClient.navigateExternal(e,n);return}throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),r5(rh)}async handleCodeResponse(e,t){let n;this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);let r=this.browserStorage.generateStateKey(t),o=this.browserStorage.getTemporaryCache(r);if(!o)throw tR(ej.stateNotFound,"Cached State");try{n=sg.getAuthorizationCodePayload(e,o)}catch(e){if(e instanceof id&&e.subError===rT)throw r5(rT);throw e}let i=this.browserStorage.generateNonceKey(o),a=this.browserStorage.getTemporaryCache(i);if(this.authCodeRequest.code=n.code,n.cloud_instance_host_name&&await o1(this.authModule.updateAuthority.bind(this.authModule),ri.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(n.cloud_instance_host_name,this.authCodeRequest.correlationId),n.nonce=a||void 0,n.state=o,n.client_info)this.authCodeRequest.clientInfo=n.client_info;else{let e=this.checkCcsCredentials();e&&(this.authCodeRequest.ccsCredential=e)}let s=await this.authModule.acquireToken(this.authCodeRequest,n);return this.browserStorage.cleanRequestByState(t),s}checkCcsCredentials(){let e=this.browserStorage.getTemporaryCache(Q.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch(t){this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}class sA extends sr{constructor(e,t,n,r,o,i,a,s,l,c){super(e,t,n,r,o,i,a,l,c),this.nativeStorage=s}async acquireToken(e){let t=await o1(this.initializeAuthorizationRequest.bind(this),ri.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,a.Redirect),n=await o1(sk,ri.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId);t.codeChallenge=n.challenge,this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||"",t.account||null);let r=this.initializeServerTelemetryManager(X.acquireTokenRedirect),o=e=>{e.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(t.state),this.eventHandler.emitEvent(ew.RESTORE_FROM_BFCACHE,a.Redirect))};try{let i=await o1(this.createAuthCodeClient.bind(this),ri.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),a={...t,code:"",codeVerifier:n.verifier},s=new sE(i,this.browserStorage,a,this.logger,this.performanceClient),l=await o1(sT,ri.GetAuthCodeUrl,this.logger,this.performanceClient,t.correlationId)(this.config,i.authority,{...t,platformBroker:sh.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)},this.logger,this.performanceClient),c=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${c}`),window.addEventListener("pageshow",o),await s.initiateAuthRequest(l,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:c,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(e){throw e instanceof eu&&(e.setCorrelationId(this.correlationId),r.cacheFailedRequest(e)),window.removeEventListener("pageshow",o),this.browserStorage.cleanRequestByState(t.state),e}}async handleRedirectPromise(e="",t){let n=this.initializeServerTelemetryManager(X.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let[r,o]=this.getRedirectResponse(e||"");if(!r)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(a.Redirect),"back_forward"!==function(){if("undefined"==typeof window||void 0===window.performance||"function"!=typeof window.performance.getEntriesByType)return;let e=window.performance.getEntriesByType("navigation"),t=e.length?e[0]:void 0;return t?.type}()?t.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;let i=this.browserStorage.getTemporaryCache(Q.ORIGIN_URI,!0)||y.EMPTY_STRING,s=nV.removeHashFromUrl(i),l=nV.removeHashFromUrl(window.location.href);if(s===l&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),i.indexOf("#")>-1&&function(e){let t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""}(i),await this.handleResponse(r,n);if(!this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(r,n);if(!oP()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Q.URL_HASH,o,!0);let e={apiId:X.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},t=!0;if(i&&"null"!==i)this.logger.verbose(`Navigating to loginRequestUrl: ${i}`),t=await this.navigationClient.navigateInternal(i,e);else{let n=function(){let e=new nV(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}();this.browserStorage.setTemporaryCache(Q.ORIGIN_URI,n,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),t=await this.navigationClient.navigateInternal(n,e)}if(!t)return await this.handleResponse(r,n)}return null}catch(e){throw e instanceof eu&&(e.setCorrelationId(this.correlationId),n.cacheFailedRequest(e)),this.browserStorage.cleanRequestByInteractionType(a.Redirect),e}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===E.QUERY?window.location.search:window.location.hash);let n=nK.getDeserializedResponse(t);if(n){var r;try{!function(e,t,n){if(!e.state)throw r5(rf);let r=ia(t,e.state);if(!r)throw r5(rm);if(r.interactionType!==n)throw r5(ry)}(n,this.browserCrypto,a.Redirect)}catch(e){return e instanceof eu&&this.logger.error(`Interaction type validation failed due to ${e.errorCode}: ${e.errorMessage}`),[null,""]}return(r=window).location.hash="","function"==typeof r.history.replaceState&&r.history.replaceState(null,"",`${r.location.origin}${r.location.pathname}${r.location.search}`),this.logger.verbose("Hash contains known properties, returning response hash"),[n,t]}let o=this.browserStorage.getTemporaryCache(Q.URL_HASH,!0);return(this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Q.URL_HASH)),o&&(n=nK.getDeserializedResponse(o)))?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[n,o]):[null,""]}async handleResponse(e,t){let n=e.state;if(!n)throw r5(rf);let r=this.browserStorage.getCachedRequest(n);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw r5(rJ);let t=new sd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,X.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,r.correlationId),{userRequestState:o}=o5.parseRequestState(this.browserCrypto,n);return t.acquireToken({...r,state:o,prompt:void 0}).finally(()=>{this.browserStorage.cleanRequestByState(n)})}let o=this.browserStorage.getCachedAuthority(n);if(!o)throw r5(rM);let i=await o1(this.createAuthCodeClient.bind(this),ri.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:o});return ih.removeThrottle(this.browserStorage,this.config.auth.clientId,r),new sE(i,this.browserStorage,r,this.logger,this.performanceClient).handleCodeResponse(e,n)}async logout(e){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e),n=this.initializeServerTelemetryManager(X.logout);try{this.eventHandler.emitEvent(ew.LOGOUT_START,a.Redirect,e),await this.clearCacheOnLogout(t.account);let r={apiId:X.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=await o1(this.createAuthCodeClient.bind(this),ri.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(o.authority.protocolMode===tU.OIDC)try{o.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId){this.browserStorage.removeAccount(t.account?.homeAccountId),this.eventHandler.emitEvent(ew.LOGOUT_SUCCESS,a.Redirect,t);return}}let i=o.getLogoutUri(t);if(this.eventHandler.emitEvent(ew.LOGOUT_SUCCESS,a.Redirect,t),e&&"function"==typeof e.onRedirectNavigate){let t=e.onRedirectNavigate(i);if(!1!==t){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(i,r);return}this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(i,r);return}}catch(e){throw e instanceof eu&&(e.setCorrelationId(this.correlationId),n.cacheFailedRequest(e)),this.eventHandler.emitEvent(ew.LOGOUT_FAILURE,a.Redirect,null,e),this.eventHandler.emitEvent(ew.LOGOUT_END,a.Redirect),e}this.eventHandler.emitEvent(ew.LOGOUT_END,a.Redirect)}getRedirectStartPage(e){let t=e||window.location.href;return nV.getAbsoluteUrl(t,oN())}}async function s_(e,t,n,r,o){if(t.addQueueMeasurement(ri.SilentHandlerInitiateAuthRequest,r),!e)throw n.info("Navigate url is empty"),r5(rh);return o?o1(sP,ri.SilentHandlerLoadFrame,n,t,r)(e,o,t,r):o0(sN,ri.SilentHandlerLoadFrameSync,n,t,r)(e)}async function sR(e,t,n,r,o,i,a){return r.addQueueMeasurement(ri.SilentHandlerMonitorIframeForHash,i),new Promise((r,i)=>{t<1e4&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${t}ms) than the default (10000ms). This may result in timeouts.`);let s=window.setTimeout(()=>{window.clearInterval(l),i(r5(rS))},t),l=window.setInterval(()=>{let t="",n=e.contentWindow;try{t=n?n.location.href:""}catch(e){}if(!t||"about:blank"===t)return;let o="";n&&(o=a===E.QUERY?n.location.search:n.location.hash),window.clearTimeout(s),window.clearInterval(l),r(o)},n)}).finally(()=>{o0(sM,ri.RemoveHiddenIframe,o,r,i)(e)})}function sP(e,t,n,r){return n.addQueueMeasurement(ri.SilentHandlerLoadFrame,r),new Promise((n,r)=>{let o=sO();window.setTimeout(()=>{if(!o){r("Unable to load iframe");return}o.src=e,n(o)},t)})}function sN(e){let t=sO();return t.src=e,t}function sO(){let e=document.createElement("iframe");return e.className="msalSilentIframe",e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(e),e}function sM(e){document.body===e.parentNode&&document.body.removeChild(e)}class sx extends sr{constructor(e,t,n,r,o,i,a,s,l,c,u){super(e,t,n,r,o,i,s,c,u),this.apiId=a,this.nativeStorage=l}async acquireToken(e){let t;this.performanceClient.addQueueMeasurement(ri.SilentIframeClientAcquireToken,e.correlationId),e.loginHint||e.sid||e.account&&e.account.username||this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");let n={...e};n.prompt?n.prompt!==I.NONE&&n.prompt!==I.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${n.prompt} with ${I.NONE}`),n.prompt=I.NONE):n.prompt=I.NONE;let r=await o1(this.initializeAuthorizationRequest.bind(this),ri.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(n,a.Silent);oq(r.authority);let o=this.initializeServerTelemetryManager(this.apiId);try{return t=await o1(this.createAuthCodeClient.bind(this),ri.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),await o1(this.silentTokenHelper.bind(this),ri.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(t,r)}catch(i){if(i instanceof eu&&(i.setCorrelationId(this.correlationId),o.cacheFailedRequest(i)),!t||!(i instanceof eu)||i.errorCode!==K.INVALID_GRANT_ERROR)throw i;this.performanceClient.addFields({retryError:i.errorCode},this.correlationId);let r=await o1(this.initializeAuthorizationRequest.bind(this),ri.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(n,a.Silent);return await o1(this.silentTokenHelper.bind(this),ri.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(t,r)}}logout(){return Promise.reject(r5(r_))}async silentTokenHelper(e,t){let n=t.correlationId;this.performanceClient.addQueueMeasurement(ri.SilentIframeClientTokenHelper,n);let r=await o1(sk,ri.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),o={...t,codeChallenge:r.challenge},i=await o1(sT,ri.GetAuthCodeUrl,this.logger,this.performanceClient,n)(this.config,e.authority,{...o,platformBroker:sh.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,o.authenticationScheme)},this.logger,this.performanceClient),a=await o1(s_,ri.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,n)(i,this.performanceClient,this.logger,n,this.config.system.navigateFrameWait),s=this.config.auth.OIDCOptions.serverResponseType,l=await o1(sR,ri.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,n)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,s),c=o0(sC,ri.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,s,this.logger);if(c.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw r5(rJ);let e=new sd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,c.accountId,this.browserStorage,n),{userRequestState:t}=o5.parseRequestState(this.browserCrypto,o.state);return o1(e.acquireToken.bind(e),ri.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,n)({...o,state:t,prompt:o.prompt||I.NONE})}let u={...o,code:c.code||"",codeVerifier:r.verifier},d=new sv(e,this.browserStorage,u,this.logger,this.performanceClient);return o1(d.handleCodeResponse.bind(d),ri.HandleCodeResponse,this.logger,this.performanceClient,n)(c,o)}}class sL extends a1{constructor(e,t){super(e,t)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(ri.RefreshTokenClientAcquireToken,e.correlationId);let t=nv(),n=await o1(this.executeTokenRequest.bind(this),ri.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),r=n.headers?.[T.X_MS_REQUEST_ID],o=new a4(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n.body),o1(o.handleServerTokenResponse.bind(o),ri.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,r)}async acquireTokenByRefreshToken(e){if(!e)throw nl(t2);if(this.performanceClient?.addQueueMeasurement(ri.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw tR(ts);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await o1(this.acquireTokenWithCachedRefreshToken.bind(this),ri.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){let e=n instanceof eK&&n.errorCode===eM,t=n instanceof id&&n.errorCode===U.INVALID_GRANT_ERROR&&n.subError===U.CLIENT_MISMATCH_ERROR;if(e||t);else throw n}return o1(this.acquireTokenWithCachedRefreshToken.bind(this),ri.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){this.performanceClient?.addQueueMeasurement(ri.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let n=o0(this.cacheManager.getRefreshToken.bind(this.cacheManager),ri.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!n)throw e$(eM);if(n.expiresOn&&nT(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),e$(eL);let r={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||L.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:o8.HOME_ACCOUNT_ID}};try{return await o1(this.acquireToken.bind(this),ri.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(r)}catch(t){if(t instanceof eK&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),t.subError===eH)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let e=nb(n);this.cacheManager.removeRefreshToken(e)}throw t}}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(ri.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),r=nV.appendQueryString(t.tokenEndpoint,n),o=await o1(this.createTokenRequestBody.bind(this),ri.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),i=this.createTokenRequestHeaders(e.ccsCredential),a=o6(this.config.authOptions.clientId,e);return o1(this.executePostToTokenEndpoint.bind(this),ri.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(r,o,i,a,e.correlationId,ri.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(ri.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let t=new Map;if(af(t,e.embeddedClientId||e.tokenBodyParameters?.[im]||this.config.authOptions.clientId),e.redirectUri&&ap(t,e.redirectUri),ag(t,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),aF(t,"refresh_token"),aB(t),aI(t,this.config.libraryInfo),aE(t,this.config.telemetry.application),aY(t),this.serverTelemetryManager&&!rr(this.config)&&aW(t,this.serverTelemetryManager),aM(t,e.refreshToken),this.config.clientCredentials.clientSecret&&aL(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let n=this.config.clientCredentials.clientAssertion;aq(t,await a5(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),aU(t,n.assertionType)}if(e.authenticationScheme===L.POP){let n,r=new a2(this.cryptoUtils,this.performanceClient);aV(t,e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await o1(r.generateCnf.bind(r),ri.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString)}else if(e.authenticationScheme===L.SSH){if(e.sshJwk)aQ(t,e.sshJwk);else throw nl(t7)}if((!nB.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&aS(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case o8.HOME_ACCOUNT_ID:try{let n=tN(e.ccsCredential.credential);aT(t,n)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case o8.UPN:aw(t,e.ccsCredential.credential)}return e.embeddedClientId&&aX(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&aK(t,e.tokenBodyParameters),al(t,e.correlationId,this.performanceClient),nj(t)}}class sq extends sr{async acquireToken(e){this.performanceClient.addQueueMeasurement(ri.SilentRefreshClientAcquireToken,e.correlationId);let t=await o1(st,ri.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),n={...e,...t};e.redirectUri&&(n.redirectUri=this.getRedirectUri(e.redirectUri));let r=this.initializeServerTelemetryManager(X.acquireTokenSilent_silentFlow),o=await this.createRefreshTokenClient({serverTelemetryManager:r,authorityUrl:n.authority,azureCloudOptions:n.azureCloudOptions,account:n.account});return o1(o.acquireTokenByRefreshToken.bind(o),ri.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(n).catch(e=>{throw e.setCorrelationId(this.correlationId),r.cacheFailedRequest(e),e})}logout(){return Promise.reject(r5(r_))}async createRefreshTokenClient(e){return new sL(await o1(this.getClientConfiguration.bind(this),ri.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),this.performanceClient)}}class sU{constructor(e,t,n,r){this.isBrowserEnvironment="undefined"!=typeof window,this.config=e,this.storage=t,this.logger=n,this.cryptoObj=r}async loadExternalTokens(e,t,n){if(!this.isBrowserEnvironment)throw r5(rq);let r=e.correlationId||oC(),o=t.id_token?ng.extractTokenClaims(t.id_token,oi):void 0,i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new o3(o3.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,i,this.logger,e.correlationId||oC()):void 0,s=await this.loadAccount(e,n.clientInfo||t.client_info||"",r,o,a),l=await this.loadIdToken(t,s.homeAccountId,s.environment,s.realm,r),c=await this.loadAccessToken(e,t,s.homeAccountId,s.environment,s.realm,n,r),u=await this.loadRefreshToken(t,s.homeAccountId,s.environment,r);return this.generateAuthenticationResult(e,{account:s,idToken:l,accessToken:c,refreshToken:u},o,a)}async loadAccount(e,t,n,r,o){if(this.logger.verbose("TokenCache - loading account"),e.account){let t=tD.createFromAccountInfo(e.account);return await this.storage.setAccount(t,n),t}if(!o||!t&&!r)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),r5(rz);let i=tD.generateHomeAccountId(t,o.authorityType,this.logger,this.cryptoObj,r),a=r?.tid,s=a6(this.storage,o,i,oi,r,t,o.hostnameAndPort,a,void 0,void 0,this.logger);return await this.storage.setAccount(s,n),s}async loadIdToken(e,t,n,r,o){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");let i=nh.createIdTokenEntity(t,n,e.id_token,this.config.auth.clientId,r);return await this.storage.setIdTokenCredential(i,o),i}async loadAccessToken(e,t,n,r,o,i,a){if(!t.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");let s=t.scope?nz.fromString(t.scope):new nz(e.scopes),l=i.expiresOn||t.expires_in+ny.nowSeconds(),c=i.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+ny.nowSeconds(),u=nh.createAccessTokenEntity(n,r,t.access_token,this.config.auth.clientId,o,s.printScopes(),l,c,oi);return await this.storage.setAccessTokenCredential(u,a),u}async loadRefreshToken(e,t,n,r){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");let o=nh.createRefreshTokenEntity(t,n,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(o,r),o}generateAuthenticationResult(e,t,n,r){let o,i="",a=[],s=null;t?.accessToken&&(i=t.accessToken.secret,a=nz.fromString(t.accessToken.target).asArray(),s=ny.toDateFromSeconds(t.accessToken.expiresOn),o=ny.toDateFromSeconds(t.accessToken.extendedExpiresOn));let l=t.account;return{authority:r?r.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:a,account:l.getAccountInfo(),idToken:t.idToken?.secret||"",idTokenClaims:n||{},accessToken:i,fromCache:!0,expiresOn:s,correlationId:e.correlationId||"",requestId:"",extExpiresOn:o,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}}class sD extends a9{constructor(e){super(e),this.includeRedirectUri=!1}}class sH extends sr{constructor(e,t,n,r,o,i,a,s,l,c){super(e,t,n,r,o,i,s,l,c),this.apiId=a}async acquireToken(e){if(!e.code)throw r5(rG);let t=await o1(this.initializeAuthorizationRequest.bind(this),ri.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,a.Silent),n=this.initializeServerTelemetryManager(this.apiId);try{let r={...t,code:e.code},o=await o1(this.getClientConfiguration.bind(this),ri.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),i=new sD(o);this.logger.verbose("Auth code client created");let a=new sv(i,this.browserStorage,r,this.logger,this.performanceClient);return await o1(a.handleCodeResponseFromServer.bind(a),ri.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(e){throw e instanceof eu&&(e.setCorrelationId(this.correlationId),n.cacheFailedRequest(e)),e}}logout(){return Promise.reject(r5(r_))}}function sF(e){let t=e?.idTokenClaims;return t?.tfp||t?.acr?"B2C":t?.tid?t?.tid==="9188040d-6c67-4c5b-b112-36a304b66dad"?"MSA":"AAD":void 0}function sB(e,t){try{ox(e)}catch(e){throw t.end({success:!1},e),e}}class sz{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new oX(this.logger,this.performanceClient):nc,this.eventHandler=new iu(this.logger),this.browserStorage=this.isBrowserEnvironment?new is(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,function(e){let t,n=e.cloudDiscoveryMetadata;if(n)try{t=JSON.parse(n)}catch(e){throw nl(t8)}return{canonicalAuthority:e.authority?o4(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:t}}(this.config.auth)):ic(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);let t={cacheLocation:j.MemoryStorage,temporaryCacheLocation:j.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new is(this.config.auth.clientId,t,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new sU(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,t){let n=new sz(e);return await n.initialize(t),n}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(ew.INITIALIZE_END);return}let t=e?.correlationId||this.getRequestCorrelationId(),n=this.config.system.allowPlatformBroker,r=this.performanceClient.startMeasurement(ri.InitializeClientApplication,t);if(this.eventHandler.emitEvent(ew.INITIALIZE_START),await o1(this.browserStorage.initialize.bind(this.browserStorage),ri.InitializeCache,this.logger,this.performanceClient,t)(t),n)try{this.nativeExtensionProvider=await sh.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(e){this.logger.verbose(e)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await o1(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),ri.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,t)(this.performanceClient,t)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(t),this.initialized=!0,this.eventHandler.emitEvent(ew.INITIALIZE_END),r.end({allowPlatformBroker:n,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),oM(this.initialized),this.isBrowserEnvironment){let t=e||"",n=this.redirectResponse.get(t);return void 0===n?(n=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,n),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),n}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){let t,n=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),o=r&&sh.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,i=o?r?.correlationId:this.browserStorage.getTemporaryCache(Q.CORRELATION_ID,!0)||"",s=this.performanceClient.startMeasurement(ri.AcquireTokenRedirect,i);if(this.eventHandler.emitEvent(ew.HANDLE_REDIRECT_START,a.Redirect),o&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");let e=new sd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,X.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,r.accountId,this.nativeInternalStorage,r.correlationId);t=o1(e.handleRedirectPromise.bind(e),ri.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(this.performanceClient,s.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");let n=this.createRedirectClient(i);t=o1(n.handleRedirectPromise.bind(n),ri.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(e,s)}return t.then(e=>(e?(n.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(ew.LOGIN_SUCCESS,a.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(ew.ACQUIRE_TOKEN_SUCCESS,a.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),s.end({success:!0,accountType:sF(e.account)})):s.event.errorCode?s.end({success:!1}):s.discard(),this.eventHandler.emitEvent(ew.HANDLE_REDIRECT_END,a.Redirect),e)).catch(e=>{throw n.length>0?this.eventHandler.emitEvent(ew.ACQUIRE_TOKEN_FAILURE,a.Redirect,null,e):this.eventHandler.emitEvent(ew.LOGIN_FAILURE,a.Redirect,null,e),this.eventHandler.emitEvent(ew.HANDLE_REDIRECT_END,a.Redirect),s.end({success:!1},e),e})}async acquireTokenRedirect(e){let t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);let n=this.performanceClient.startMeasurement(ri.AcquireTokenPreRedirect,t);n.add({accountType:sF(e.account),scenarioId:e.scenarioId});let r=e.onRedirectNavigate;if(r)e.onRedirectNavigate=e=>{let t="function"==typeof r?r(e):void 0;return!1!==t?n.end({success:!0}):n.discard(),t};else{let e=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=t=>{let r="function"==typeof e?e(t):void 0;return!1!==r?n.end({success:!0}):n.discard(),r}}let o=this.getAllAccounts().length>0;try{let r;return oL(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),o?this.eventHandler.emitEvent(ew.ACQUIRE_TOKEN_START,a.Redirect,e):this.eventHandler.emitEvent(ew.LOGIN_START,a.Redirect,e),r=this.nativeExtensionProvider&&this.canUsePlatformBroker(e)?new sd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,X.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,n).catch(n=>{if(n instanceof sa&&ss(n))return this.nativeExtensionProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(n instanceof eK)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),n}):this.createRedirectClient(t).acquireToken(e),await r}catch(e){throw n.end({success:!1},e),o?this.eventHandler.emitEvent(ew.ACQUIRE_TOKEN_FAILURE,a.Redirect,null,e):this.eventHandler.emitEvent(ew.LOGIN_FAILURE,a.Redirect,null,e),e}}acquireTokenPopup(e){let t,n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(ri.AcquireTokenPopup,n);r.add({scenarioId:e.scenarioId,accountType:sF(e.account)});try{this.logger.verbose("acquireTokenPopup called",n),sB(this.initialized,r),this.browserStorage.setInteractionInProgress(!0)}catch(e){return Promise.reject(e)}let o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(ew.ACQUIRE_TOKEN_START,a.Popup,e):this.eventHandler.emitEvent(ew.LOGIN_START,a.Popup,e);let i=this.getPreGeneratedPkceCodes(n);return(this.canUsePlatformBroker(e)?this.acquireTokenNative({...e,correlationId:n},X.acquireTokenPopup).then(e=>(this.browserStorage.setInteractionInProgress(!1),r.end({success:!0,isNativeBroker:!0,accountType:sF(e.account)}),e)).catch(t=>{if(t instanceof sa&&ss(t))return this.nativeExtensionProvider=void 0,this.createPopupClient(n).acquireToken(e,i);if(t instanceof eK)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(n).acquireToken(e,i);throw this.browserStorage.setInteractionInProgress(!1),t}):this.createPopupClient(n).acquireToken(e,i)).then(e=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(ew.LOGIN_SUCCESS,a.Popup,e):this.eventHandler.emitEvent(ew.ACQUIRE_TOKEN_SUCCESS,a.Popup,e),r.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:sF(e.account)}),e)).catch(e=>(o.length>0?this.eventHandler.emitEvent(ew.ACQUIRE_TOKEN_FAILURE,a.Popup,null,e):this.eventHandler.emitEvent(ew.LOGIN_FAILURE,a.Popup,null,e),r.end({success:!1},e),Promise.reject(e))).finally(()=>this.config.system.asyncPopups&&this.preGeneratePkceCodes(n))}trackPageVisibilityWithMeasurement(){let e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){let t,n=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:n};return this.ssoSilentMeasurement=this.performanceClient.startMeasurement(ri.SsoSilent,n),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:sF(e.account)}),sB(this.initialized,this.ssoSilentMeasurement),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",n),this.eventHandler.emitEvent(ew.SSO_SILENT_START,a.Silent,r),(this.canUsePlatformBroker(r)?this.acquireTokenNative(r,X.ssoSilent).catch(e=>{if(e instanceof sa&&ss(e))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw e}):this.createSilentIframeClient(r.correlationId).acquireToken(r)).then(e=>(this.eventHandler.emitEvent(ew.SSO_SILENT_SUCCESS,a.Silent,e),this.ssoSilentMeasurement?.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:sF(e.account)}),e)).catch(e=>{throw this.eventHandler.emitEvent(ew.SSO_SILENT_FAILURE,a.Silent,null,e),this.ssoSilentMeasurement?.end({success:!1},e),e}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){let t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);let n=this.performanceClient.startMeasurement(ri.AcquireTokenByCode,t);sB(this.initialized,n),this.eventHandler.emitEvent(ew.ACQUIRE_TOKEN_BY_CODE_START,a.Silent,e),n.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw r5(rj);if(e.code){let r=e.code,o=this.hybridAuthCodeResponses.get(r);return o?(this.logger.verbose("Existing acquireTokenByCode request found",t),n.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),o=this.acquireTokenByCodeAsync({...e,correlationId:t}).then(e=>(this.eventHandler.emitEvent(ew.ACQUIRE_TOKEN_BY_CODE_SUCCESS,a.Silent,e),this.hybridAuthCodeResponses.delete(r),n.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:sF(e.account)}),e)).catch(e=>{throw this.hybridAuthCodeResponses.delete(r),this.eventHandler.emitEvent(ew.ACQUIRE_TOKEN_BY_CODE_FAILURE,a.Silent,null,e),n.end({success:!1},e),e}),this.hybridAuthCodeResponses.set(r,o)),await o}if(e.nativeAccountId){if(this.canUsePlatformBroker(e,e.nativeAccountId)){let r=await this.acquireTokenNative({...e,correlationId:t},X.acquireTokenByCode,e.nativeAccountId).catch(e=>{throw e instanceof sa&&ss(e)&&(this.nativeExtensionProvider=void 0),e});return n.end({accountType:sF(r.account),success:!0}),r}throw r5(rQ)}else throw r5(r$)}catch(e){throw this.eventHandler.emitEvent(ew.ACQUIRE_TOKEN_BY_CODE_FAILURE,a.Silent,null,e),n.end({success:!1},e),e}}async acquireTokenByCodeAsync(e){this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(ri.AcquireTokenByCodeAsync,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);let t=this.createSilentAuthCodeClient(e.correlationId);return await t.acquireToken(e).then(e=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:e.fromCache,isNativeBroker:e.fromNativeBroker}),e)).catch(e=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},e),e}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(ri.AcquireTokenFromCache,e.correlationId),t){case er.Default:case er.AccessToken:case er.AccessTokenAndRefreshToken:let n=this.createSilentCacheClient(e.correlationId);return o1(n.acquireToken.bind(n),ri.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw tR(ej.tokenRefreshRequired)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(ri.AcquireTokenByRefreshToken,e.correlationId),t){case er.Default:case er.AccessTokenAndRefreshToken:case er.RefreshToken:case er.RefreshTokenAndNetwork:let n=this.createSilentRefreshClient(e.correlationId);return o1(n.acquireToken.bind(n),ri.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw tR(ej.tokenRefreshRequired)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(ri.AcquireTokenBySilentIframe,e.correlationId);let t=this.createSilentIframeClient(e.correlationId);return o1(t.acquireToken.bind(t),ri.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){let t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect({correlationId:t,...e})}async logoutRedirect(e){let t=this.getRequestCorrelationId(e);return oL(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),this.createRedirectClient(t).logout(e)}logoutPopup(e){try{let t=this.getRequestCorrelationId(e);return ox(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(t).logout(e)}catch(e){return Promise.reject(e)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}let t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){var t,n,r;return t=this.logger,n=this.browserStorage,r=this.isBrowserEnvironment,t.verbose("getAllAccounts called"),r?n.getAllAccounts(e):[]}getAccount(e){return function(e,t,n){if(t.trace("getAccount called"),0===Object.keys(e).length)return t.warning("getAccount: No accountFilter provided"),null;let r=n.getAccountInfoFilteredBy(e);return r?(t.verbose("getAccount: Account matching provided filter found, returning"),r):(t.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByUsername(e){return function(e,t,n){if(t.trace("getAccountByUsername called"),!e)return t.warning("getAccountByUsername: No username provided"),null;let r=n.getAccountInfoFilteredBy({username:e});return r?(t.verbose("getAccountByUsername: Account matching username found, returning"),t.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${e}`),r):(t.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return function(e,t,n){if(t.trace("getAccountByHomeId called"),!e)return t.warning("getAccountByHomeId: No homeAccountId provided"),null;let r=n.getAccountInfoFilteredBy({homeAccountId:e});return r?(t.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),t.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${e}`),r):(t.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return function(e,t,n){if(t.trace("getAccountByLocalId called"),!e)return t.warning("getAccountByLocalId: No localAccountId provided"),null;let r=n.getAccountInfoFilteredBy({localAccountId:e});return r?(t.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),t.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${e}`),r):(t.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}setActiveAccount(e){!function(e,t){t.setActiveAccount(e)}(e,this.browserStorage)}getActiveAccount(){return this.browserStorage.getActiveAccount()}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");let n=tD.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return(await this.browserStorage.setAccount(n,e.correlationId),e.fromNativeBroker)?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,n,r){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw r5(rJ);return new sd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,n||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,r)}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!sh.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isPlatformBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case I.NONE:case I.CONSENT:case I.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!!(t||this.getNativeAccountId(e))||(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1)}getNativeAccountId(e){let t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new sI(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new sA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new sx(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,X.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new su(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new sq(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new sH(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,X.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return oO(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==j.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==j.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?oC():y.EMPTY_STRING}async loginRedirect(e){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect({correlationId:t,...e||ee})}loginPopup(e){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup({correlationId:t,...e||ee})}async acquireTokenSilent(e){let t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(ri.AcquireTokenSilent,t);n.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),sB(this.initialized,n),this.logger.verbose("acquireTokenSilent called",t);let r=e.account||this.getActiveAccount();if(!r)throw r5(rR);return n.add({accountType:sF(r)}),this.acquireTokenSilentDeduped(e,r,t).then(r=>(n.end({success:!0,fromCache:r.fromCache,isNativeBroker:r.fromNativeBroker,accessTokenSize:r.accessToken.length,idTokenSize:r.idToken.length}),{...r,state:e.state,correlationId:t})).catch(e=>{throw e instanceof eu&&e.setCorrelationId(t),n.end({success:!1},e),e})}async acquireTokenSilentDeduped(e,t,n){let r=JSON.stringify(o6(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority,correlationId:n},t.homeAccountId)),o=this.activeSilentTokenRequests.get(r);if(void 0!==o)return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",n),this.performanceClient.addFields({deduped:!0},n),o;{this.logger.verbose("acquireTokenSilent called for the first time, storing active request",n),this.performanceClient.addFields({deduped:!1},n);let o=o1(this.acquireTokenSilentAsync.bind(this),ri.AcquireTokenSilentAsync,this.logger,this.performanceClient,n)({...e,correlationId:n},t);return this.activeSilentTokenRequests.set(r,o),o.finally(()=>{this.activeSilentTokenRequests.delete(r)})}}async acquireTokenSilentAsync(e,t){let n=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(ri.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(ew.ACQUIRE_TOKEN_START,a.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",n);let r=await o1(sn,ri.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),o=e.cacheLookupPolicy||er.Default;return this.acquireTokenSilentNoIframe(r,o).catch(async e=>{if(function(e,t){let n=!(e instanceof eK&&e.subError!==eO.badToken),r=e.errorCode===K.INVALID_GRANT_ERROR||e.errorCode===ej.tokenRefreshRequired,o=n&&r||e.errorCode===eO.noTokensFound||e.errorCode===eO.refreshTokenExpired,i=eo.includes(t);return o&&i}(e,o)){if(this.activeIframeRequest){if(o===er.Skip)return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",r.correlationId),o1(this.acquireTokenBySilentIframe.bind(this),ri.AcquireTokenBySilentIframe,this.logger,this.performanceClient,r.correlationId)(r);{let[t,n]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${n}`,r.correlationId);let i=this.performanceClient.startMeasurement(ri.AwaitConcurrentIframe,r.correlationId);i.add({awaitIframeCorrelationId:n});let a=await t;if(i.end({success:a}),a)return this.logger.verbose(`Parallel iframe request with correlationId: ${n} succeeded. Retrying cache and/or RT redemption`,r.correlationId),this.acquireTokenSilentNoIframe(r,o);throw this.logger.info(`Iframe request with correlationId: ${n} failed. Interaction is required.`),e}}{let e;return this.activeIframeRequest=[new Promise(t=>{e=t}),r.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",r.correlationId),o1(this.acquireTokenBySilentIframe.bind(this),ri.AcquireTokenBySilentIframe,this.logger,this.performanceClient,r.correlationId)(r).then(t=>(e(!0),t)).catch(t=>{throw e(!1),t}).finally(()=>{this.activeIframeRequest=void 0})}}throw e}).then(t=>(this.eventHandler.emitEvent(ew.ACQUIRE_TOKEN_SUCCESS,a.Silent,t),e.correlationId&&this.performanceClient.addFields({fromCache:t.fromCache,isNativeBroker:t.fromNativeBroker},e.correlationId),t)).catch(e=>{throw this.eventHandler.emitEvent(ew.ACQUIRE_TOKEN_FAILURE,a.Silent,null,e),e}).finally(()=>{document.removeEventListener("visibilitychange",n)})}async acquireTokenSilentNoIframe(e,t){return sh.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,X.acquireTokenSilent_silentFlow,e.account.nativeAccountId,t).catch(async e=>{if(e instanceof sa&&ss(e))throw this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,tR(ej.tokenRefreshRequired);throw e})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===er.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),o1(this.acquireTokenFromCache.bind(this),ri.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(n=>{if(t===er.AccessToken)throw n;return this.eventHandler.emitEvent(ew.ACQUIRE_TOKEN_NETWORK_START,a.Silent,e),o1(this.acquireTokenByRefreshToken.bind(this),ri.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await o1(sk,ri.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");let t=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${t?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}}async function sK(e,t){let n=new oz(e);return await n.initialize(),sz.createController(n,t)}class sG{static async createPublicClientApplication(e){let t=await sK(e);return new sG(e,t)}constructor(e,t){this.controller=t||new sz(new oz(e))}async initialize(e){return this.controller.initialize(e)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}const s$=document.getElementById("root");if(!s$)throw Error("Root element not found");t(p).createRoot(s$).render((0,g.jsx)(t(f).StrictMode,{children:(0,g.jsx)(()=>{let[e,t]=(0,f.useState)(null),[n,r]=(0,f.useState)(null);return((0,f.useEffect)(()=>{(async()=>{try{let e=await tH();if(!e.auth.clientId)throw Error("Client ID is missing in the configuration");let n={auth:{clientId:e.auth.clientId,authority:e.auth.authority,redirectUri:e.auth.redirectUri},cache:e.cache},r=new sG(n);await r.initialize(),t(r)}catch(e){r(e),console.error("MSAL Initialization Error:",e)}})()},[]),n)?(0,g.jsx)("div",{className:"error",children:"Failed to initialize authentication. Please try refreshing the page."}):e?(0,g.jsx)(eA,{instance:e,children:(0,g.jsx)(t$,{})}):(0,g.jsx)("div",{className:"loading",children:"Loading authentication..."})},{})}));
//# sourceMappingURL=ClientApp.4711bc96.js.map
